(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Au={exports:{}},Ps={},Ou={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function Ny(){if(mp)return Me;mp=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,E={};function T(L,A,x){this.props=L,this.context=A,this.refs=E,this.updater=x||v}T.prototype.isReactComponent={},T.prototype.setState=function(L,A){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,A,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function M(){}M.prototype=T.prototype;function J(L,A,x){this.props=L,this.context=A,this.refs=E,this.updater=x||v}var I=J.prototype=new M;I.constructor=J,k(I,T.prototype),I.isPureReactComponent=!0;var U=Array.isArray,X=Object.prototype.hasOwnProperty,R={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function ie(L,A,x){var ae,ve={},he=null,we=null;if(A!=null)for(ae in A.ref!==void 0&&(we=A.ref),A.key!==void 0&&(he=""+A.key),A)X.call(A,ae)&&!se.hasOwnProperty(ae)&&(ve[ae]=A[ae]);var Ce=arguments.length-2;if(Ce===1)ve.children=x;else if(1<Ce){for(var Pe=Array(Ce),Fe=0;Fe<Ce;Fe++)Pe[Fe]=arguments[Fe+2];ve.children=Pe}if(L&&L.defaultProps)for(ae in Ce=L.defaultProps,Ce)ve[ae]===void 0&&(ve[ae]=Ce[ae]);return{$$typeof:e,type:L,key:he,ref:we,props:ve,_owner:R.current}}function le(L,A){return{$$typeof:e,type:L.type,key:A,ref:L.ref,props:L.props,_owner:L._owner}}function me(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function Q(L){var A={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(x){return A[x]})}var W=/\/+/g;function j(L,A){return typeof L=="object"&&L!==null&&L.key!=null?Q(""+L.key):A.toString(36)}function B(L,A,x,ae,ve){var he=typeof L;(he==="undefined"||he==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(he){case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case e:case t:we=!0}}if(we)return we=L,ve=ve(we),L=ae===""?"."+j(we,0):ae,U(ve)?(x="",L!=null&&(x=L.replace(W,"$&/")+"/"),B(ve,A,x,"",function(Fe){return Fe})):ve!=null&&(me(ve)&&(ve=le(ve,x+(!ve.key||we&&we.key===ve.key?"":(""+ve.key).replace(W,"$&/")+"/")+L)),A.push(ve)),1;if(we=0,ae=ae===""?".":ae+":",U(L))for(var Ce=0;Ce<L.length;Ce++){he=L[Ce];var Pe=ae+j(he,Ce);we+=B(he,A,x,Pe,ve)}else if(Pe=S(L),typeof Pe=="function")for(L=Pe.call(L),Ce=0;!(he=L.next()).done;)he=he.value,Pe=ae+j(he,Ce++),we+=B(he,A,x,Pe,ve);else if(he==="object")throw A=String(L),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.");return we}function O(L,A,x){if(L==null)return L;var ae=[],ve=0;return B(L,ae,"","",function(he){return A.call(x,he,ve++)}),ae}function K(L){if(L._status===-1){var A=L._result;A=A(),A.then(function(x){(L._status===0||L._status===-1)&&(L._status=1,L._result=x)},function(x){(L._status===0||L._status===-1)&&(L._status=2,L._result=x)}),L._status===-1&&(L._status=0,L._result=A)}if(L._status===1)return L._result.default;throw L._result}var ee={current:null},z={transition:null},re={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:z,ReactCurrentOwner:R};function w(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:O,forEach:function(L,A,x){O(L,function(){A.apply(this,arguments)},x)},count:function(L){var A=0;return O(L,function(){A++}),A},toArray:function(L){return O(L,function(A){return A})||[]},only:function(L){if(!me(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Me.Component=T,Me.Fragment=i,Me.Profiler=o,Me.PureComponent=J,Me.StrictMode=s,Me.Suspense=p,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Me.act=w,Me.cloneElement=function(L,A,x){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ae=k({},L.props),ve=L.key,he=L.ref,we=L._owner;if(A!=null){if(A.ref!==void 0&&(he=A.ref,we=R.current),A.key!==void 0&&(ve=""+A.key),L.type&&L.type.defaultProps)var Ce=L.type.defaultProps;for(Pe in A)X.call(A,Pe)&&!se.hasOwnProperty(Pe)&&(ae[Pe]=A[Pe]===void 0&&Ce!==void 0?Ce[Pe]:A[Pe])}var Pe=arguments.length-2;if(Pe===1)ae.children=x;else if(1<Pe){Ce=Array(Pe);for(var Fe=0;Fe<Pe;Fe++)Ce[Fe]=arguments[Fe+2];ae.children=Ce}return{$$typeof:e,type:L.type,key:ve,ref:he,props:ae,_owner:we}},Me.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Me.createElement=ie,Me.createFactory=function(L){var A=ie.bind(null,L);return A.type=L,A},Me.createRef=function(){return{current:null}},Me.forwardRef=function(L){return{$$typeof:h,render:L}},Me.isValidElement=me,Me.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:K}},Me.memo=function(L,A){return{$$typeof:d,type:L,compare:A===void 0?null:A}},Me.startTransition=function(L){var A=z.transition;z.transition={};try{L()}finally{z.transition=A}},Me.unstable_act=w,Me.useCallback=function(L,A){return ee.current.useCallback(L,A)},Me.useContext=function(L){return ee.current.useContext(L)},Me.useDebugValue=function(){},Me.useDeferredValue=function(L){return ee.current.useDeferredValue(L)},Me.useEffect=function(L,A){return ee.current.useEffect(L,A)},Me.useId=function(){return ee.current.useId()},Me.useImperativeHandle=function(L,A,x){return ee.current.useImperativeHandle(L,A,x)},Me.useInsertionEffect=function(L,A){return ee.current.useInsertionEffect(L,A)},Me.useLayoutEffect=function(L,A){return ee.current.useLayoutEffect(L,A)},Me.useMemo=function(L,A){return ee.current.useMemo(L,A)},Me.useReducer=function(L,A,x){return ee.current.useReducer(L,A,x)},Me.useRef=function(L){return ee.current.useRef(L)},Me.useState=function(L){return ee.current.useState(L)},Me.useSyncExternalStore=function(L,A,x){return ee.current.useSyncExternalStore(L,A,x)},Me.useTransition=function(){return ee.current.useTransition()},Me.version="18.3.1",Me}var gp;function lh(){return gp||(gp=1,Ou.exports=Ny()),Ou.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function By(){if(vp)return Ps;vp=1;var e=lh(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,p,d){var m,g={},S=null,v=null;d!==void 0&&(S=""+d),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(v=p.ref);for(m in p)s.call(p,m)&&!a.hasOwnProperty(m)&&(g[m]=p[m]);if(h&&h.defaultProps)for(m in p=h.defaultProps,p)g[m]===void 0&&(g[m]=p[m]);return{$$typeof:t,type:h,key:S,ref:v,props:g,_owner:o.current}}return Ps.Fragment=i,Ps.jsx=u,Ps.jsxs=u,Ps}var yp;function Iy(){return yp||(yp=1,Au.exports=By()),Au.exports}var b=Iy(),pe=lh();const Nn=Ul(pe);var _l={},zu={exports:{}},qt={},Fu={exports:{}},Hu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function Ay(){return Sp||(Sp=1,(function(e){function t(z,re){var w=z.length;z.push(re);e:for(;0<w;){var L=w-1>>>1,A=z[L];if(0<o(A,re))z[L]=re,z[w]=A,w=L;else break e}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var re=z[0],w=z.pop();if(w!==re){z[0]=w;e:for(var L=0,A=z.length,x=A>>>1;L<x;){var ae=2*(L+1)-1,ve=z[ae],he=ae+1,we=z[he];if(0>o(ve,w))he<A&&0>o(we,ve)?(z[L]=we,z[he]=w,L=he):(z[L]=ve,z[ae]=w,L=ae);else if(he<A&&0>o(we,w))z[L]=we,z[he]=w,L=he;else break e}}return re}function o(z,re){var w=z.sortIndex-re.sortIndex;return w!==0?w:z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var p=[],d=[],m=1,g=null,S=3,v=!1,k=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(z){for(var re=i(d);re!==null;){if(re.callback===null)s(d);else if(re.startTime<=z)s(d),re.sortIndex=re.expirationTime,t(p,re);else break;re=i(d)}}function U(z){if(E=!1,I(z),!k)if(i(p)!==null)k=!0,K(X);else{var re=i(d);re!==null&&ee(U,re.startTime-z)}}function X(z,re){k=!1,E&&(E=!1,M(ie),ie=-1),v=!0;var w=S;try{for(I(re),g=i(p);g!==null&&(!(g.expirationTime>re)||z&&!Q());){var L=g.callback;if(typeof L=="function"){g.callback=null,S=g.priorityLevel;var A=L(g.expirationTime<=re);re=e.unstable_now(),typeof A=="function"?g.callback=A:g===i(p)&&s(p),I(re)}else s(p);g=i(p)}if(g!==null)var x=!0;else{var ae=i(d);ae!==null&&ee(U,ae.startTime-re),x=!1}return x}finally{g=null,S=w,v=!1}}var R=!1,se=null,ie=-1,le=5,me=-1;function Q(){return!(e.unstable_now()-me<le)}function W(){if(se!==null){var z=e.unstable_now();me=z;var re=!0;try{re=se(!0,z)}finally{re?j():(R=!1,se=null)}}else R=!1}var j;if(typeof J=="function")j=function(){J(W)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,O=B.port2;B.port1.onmessage=W,j=function(){O.postMessage(null)}}else j=function(){T(W,0)};function K(z){se=z,R||(R=!0,j())}function ee(z,re){ie=T(function(){z(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){k||v||(k=!0,K(X))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return i(p)},e.unstable_next=function(z){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var w=S;S=re;try{return z()}finally{S=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,re){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var w=S;S=z;try{return re()}finally{S=w}},e.unstable_scheduleCallback=function(z,re,w){var L=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?L+w:L):w=L,z){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=w+A,z={id:m++,callback:re,priorityLevel:z,startTime:w,expirationTime:A,sortIndex:-1},w>L?(z.sortIndex=w,t(d,z),i(p)===null&&z===i(d)&&(E?(M(ie),ie=-1):E=!0,ee(U,w-L))):(z.sortIndex=A,t(p,z),k||v||(k=!0,K(X))),z},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(z){var re=S;return function(){var w=S;S=re;try{return z.apply(this,arguments)}finally{S=w}}}})(Hu)),Hu}var wp;function Oy(){return wp||(wp=1,Fu.exports=Ay()),Fu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function zy(){if(xp)return qt;xp=1;var e=lh(),t=Oy();function i(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,n){u(r,n),u(r+"Capture",n)}function u(r,n){for(o[r]=n,r=0;r<n.length;r++)s.add(n[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function S(r){return p.call(g,r)?!0:p.call(m,r)?!1:d.test(r)?g[r]=!0:(m[r]=!0,!1)}function v(r,n,l,c){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function k(r,n,l,c){if(n===null||typeof n>"u"||v(r,n,l,c))return!0;if(c)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function E(r,n,l,c,f,_,y){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=n,this.sanitizeURL=_,this.removeEmptyString=y}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){T[r]=new E(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];T[n]=new E(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){T[r]=new E(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){T[r]=new E(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){T[r]=new E(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){T[r]=new E(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){T[r]=new E(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){T[r]=new E(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){T[r]=new E(r,5,!1,r.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function J(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(M,J);T[n]=new E(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(M,J);T[n]=new E(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(M,J);T[n]=new E(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){T[r]=new E(r,1,!1,r.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){T[r]=new E(r,1,!1,r.toLowerCase(),null,!0,!0)});function I(r,n,l,c){var f=T.hasOwnProperty(n)?T[n]:null;(f!==null?f.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(k(n,l,f,c)&&(l=null),c||f===null?S(n)&&(l===null?r.removeAttribute(n):r.setAttribute(n,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(n=f.attributeName,c=f.attributeNamespace,l===null?r.removeAttribute(n):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,c?r.setAttributeNS(c,n,l):r.setAttribute(n,l))))}var U=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),R=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),Q=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),z=Symbol.iterator;function re(r){return r===null||typeof r!="object"?null:(r=z&&r[z]||r["@@iterator"],typeof r=="function"?r:null)}var w=Object.assign,L;function A(r){if(L===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return`
`+L+r}var x=!1;function ae(r,n){if(!r||x)return"";x=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(H){var c=H}Reflect.construct(r,[],n)}else{try{n.call()}catch(H){c=H}r.call(n.prototype)}else{try{throw Error()}catch(H){c=H}r()}}catch(H){if(H&&c&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),_=c.stack.split(`
`),y=f.length-1,C=_.length-1;1<=y&&0<=C&&f[y]!==_[C];)C--;for(;1<=y&&0<=C;y--,C--)if(f[y]!==_[C]){if(y!==1||C!==1)do if(y--,C--,0>C||f[y]!==_[C]){var P=`
`+f[y].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=y&&0<=C);break}}}finally{x=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?A(r):""}function ve(r){switch(r.tag){case 5:return A(r.type);case 16:return A("Lazy");case 13:return A("Suspense");case 19:return A("SuspenseList");case 0:case 2:case 15:return r=ae(r.type,!1),r;case 11:return r=ae(r.type.render,!1),r;case 1:return r=ae(r.type,!0),r;default:return""}}function he(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case se:return"Fragment";case R:return"Portal";case le:return"Profiler";case ie:return"StrictMode";case j:return"Suspense";case B:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Q:return(r.displayName||"Context")+".Consumer";case me:return(r._context.displayName||"Context")+".Provider";case W:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return n=r.displayName||null,n!==null?n:he(r.type)||"Memo";case K:n=r._payload,r=r._init;try{return he(r(n))}catch{}}return null}function we(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(n);case 8:return n===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ce(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Pe(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Fe(r){var n=Pe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),c=""+r[n];if(!r.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,_=l.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){c=""+y,_.call(this,y)}}),Object.defineProperty(r,n,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(y){c=""+y},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function It(r){r._valueTracker||(r._valueTracker=Fe(r))}function Jt(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var l=n.getValue(),c="";return r&&(c=Pe(r)?r.checked?"true":"false":r.value),r=c,r!==l?(n.setValue(r),!0):!1}function Ne(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Ur(r,n){var l=n.checked;return w({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Wn(r,n){var l=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;l=Ce(n.value!=null?n.value:l),r._wrapperState={initialChecked:c,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Un(r,n){n=n.checked,n!=null&&I(r,"checked",n,!1)}function rn(r,n){Un(r,n);var l=Ce(n.value),c=n.type;if(l!=null)c==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?nn(r,n.type,l):n.hasOwnProperty("defaultValue")&&nn(r,n.type,Ce(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function io(r,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,l||n===r.value||(r.value=n),r.defaultValue=n}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function nn(r,n,l){(n!=="number"||Ne(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var ii=Array.isArray;function ni(r,n,l,c){if(r=r.options,n){n={};for(var f=0;f<l.length;f++)n["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=n.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Ce(l),n=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,c&&(r[f].defaultSelected=!0);return}n!==null||r[f].disabled||(n=r[f])}n!==null&&(n.selected=!0)}}function $n(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(i(91));return w({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function no(r,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(i(92));if(ii(l)){if(1<l.length)throw Error(i(93));l=l[0]}n=l}n==null&&(n=""),l=n}r._wrapperState={initialValue:Ce(l)}}function so(r,n){var l=Ce(n.value),c=Ce(n.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),n.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),c!=null&&(r.defaultValue=""+c)}function oo(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function $(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?$(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var xe,Te=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,c,f){MSApp.execUnsafeLocalFunction(function(){return r(n,l,c,f)})}:r})(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(xe=xe||document.createElement("div"),xe.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=xe.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function Be(r,n){if(n){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=n;return}}r.textContent=n}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$r=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(r){$r.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),Ct[n]=Ct[r]})});function ar(r,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||Ct.hasOwnProperty(r)&&Ct[r]?(""+n).trim():n+"px"}function si(r,n){r=r.style;for(var l in n)if(n.hasOwnProperty(l)){var c=l.indexOf("--")===0,f=ar(l,n[l],c);l==="float"&&(l="cssFloat"),c?r.setProperty(l,f):r[l]=f}}var Ni=w({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(r,n){if(n){if(Ni[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(i(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(i(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(n.style!=null&&typeof n.style!="object")throw Error(i(62))}}function Rr(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zt=null;function Ql(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jl=null,sn=null,on=null;function Mh(r){if(r=ds(r)){if(typeof Jl!="function")throw Error(i(280));var n=r.stateNode;n&&(n=Do(n),Jl(r.stateNode,r.type,n))}}function Nh(r){sn?on?on.push(r):on=[r]:sn=r}function Bh(){if(sn){var r=sn,n=on;if(on=sn=null,Mh(r),n)for(r=0;r<n.length;r++)Mh(n[r])}}function Ih(r,n){return r(n)}function Ah(){}var Zl=!1;function Oh(r,n,l){if(Zl)return r(n,l);Zl=!0;try{return Ih(r,n,l)}finally{Zl=!1,(sn!==null||on!==null)&&(Ah(),Bh())}}function Vn(r,n){var l=r.stateNode;if(l===null)return null;var c=Do(l);if(c===null)return null;l=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,n,typeof l));return l}var ea=!1;if(h)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){ea=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{ea=!1}function Fg(r,n,l,c,f,_,y,C,P){var H=Array.prototype.slice.call(arguments,3);try{n.apply(l,H)}catch(Y){this.onError(Y)}}var qn=!1,lo=null,ao=!1,ta=null,Hg={onError:function(r){qn=!0,lo=r}};function jg(r,n,l,c,f,_,y,C,P){qn=!1,lo=null,Fg.apply(Hg,arguments)}function Wg(r,n,l,c,f,_,y,C,P){if(jg.apply(this,arguments),qn){if(qn){var H=lo;qn=!1,lo=null}else throw Error(i(198));ao||(ao=!0,ta=H)}}function Bi(r){var n=r,l=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,(n.flags&4098)!==0&&(l=n.return),r=n.return;while(r)}return n.tag===3?l:null}function zh(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function Fh(r){if(Bi(r)!==r)throw Error(i(188))}function Ug(r){var n=r.alternate;if(!n){if(n=Bi(r),n===null)throw Error(i(188));return n!==r?null:r}for(var l=r,c=n;;){var f=l.return;if(f===null)break;var _=f.alternate;if(_===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===_.child){for(_=f.child;_;){if(_===l)return Fh(f),r;if(_===c)return Fh(f),n;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=f,c=_;else{for(var y=!1,C=f.child;C;){if(C===l){y=!0,l=f,c=_;break}if(C===c){y=!0,c=f,l=_;break}C=C.sibling}if(!y){for(C=_.child;C;){if(C===l){y=!0,l=_,c=f;break}if(C===c){y=!0,c=_,l=f;break}C=C.sibling}if(!y)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:n}function Hh(r){return r=Ug(r),r!==null?jh(r):null}function jh(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=jh(r);if(n!==null)return n;r=r.sibling}return null}var Wh=t.unstable_scheduleCallback,Uh=t.unstable_cancelCallback,$g=t.unstable_shouldYield,Vg=t.unstable_requestPaint,rt=t.unstable_now,Kg=t.unstable_getCurrentPriorityLevel,ra=t.unstable_ImmediatePriority,$h=t.unstable_UserBlockingPriority,uo=t.unstable_NormalPriority,qg=t.unstable_LowPriority,Vh=t.unstable_IdlePriority,co=null,Lr=null;function Yg(r){if(Lr&&typeof Lr.onCommitFiberRoot=="function")try{Lr.onCommitFiberRoot(co,r,void 0,(r.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Qg,Xg=Math.log,Gg=Math.LN2;function Qg(r){return r>>>=0,r===0?32:31-(Xg(r)/Gg|0)|0}var ho=64,fo=4194304;function Yn(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function po(r,n){var l=r.pendingLanes;if(l===0)return 0;var c=0,f=r.suspendedLanes,_=r.pingedLanes,y=l&268435455;if(y!==0){var C=y&~f;C!==0?c=Yn(C):(_&=y,_!==0&&(c=Yn(_)))}else y=l&~f,y!==0?c=Yn(y):_!==0&&(c=Yn(_));if(c===0)return 0;if(n!==0&&n!==c&&(n&f)===0&&(f=c&-c,_=n&-n,f>=_||f===16&&(_&4194240)!==0))return n;if((c&4)!==0&&(c|=l&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=c;0<n;)l=31-Sr(n),f=1<<l,c|=r[l],n&=~f;return c}function Jg(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zg(r,n){for(var l=r.suspendedLanes,c=r.pingedLanes,f=r.expirationTimes,_=r.pendingLanes;0<_;){var y=31-Sr(_),C=1<<y,P=f[y];P===-1?((C&l)===0||(C&c)!==0)&&(f[y]=Jg(C,n)):P<=n&&(r.expiredLanes|=C),_&=~C}}function ia(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Kh(){var r=ho;return ho<<=1,(ho&4194240)===0&&(ho=64),r}function na(r){for(var n=[],l=0;31>l;l++)n.push(r);return n}function Xn(r,n,l){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-Sr(n),r[n]=l}function ev(r,n){var l=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Sr(l),_=1<<f;n[f]=0,c[f]=-1,r[f]=-1,l&=~_}}function sa(r,n){var l=r.entangledLanes|=n;for(r=r.entanglements;l;){var c=31-Sr(l),f=1<<c;f&n|r[c]&n&&(r[c]|=n),l&=~f}}var ze=0;function qh(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Yh,oa,Xh,Gh,Qh,la=!1,_o=[],oi=null,li=null,ai=null,Gn=new Map,Qn=new Map,ui=[],tv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jh(r,n){switch(r){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Gn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(n.pointerId)}}function Jn(r,n,l,c,f,_){return r===null||r.nativeEvent!==_?(r={blockedOn:n,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[f]},n!==null&&(n=ds(n),n!==null&&oa(n)),r):(r.eventSystemFlags|=c,n=r.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),r)}function rv(r,n,l,c,f){switch(n){case"focusin":return oi=Jn(oi,r,n,l,c,f),!0;case"dragenter":return li=Jn(li,r,n,l,c,f),!0;case"mouseover":return ai=Jn(ai,r,n,l,c,f),!0;case"pointerover":var _=f.pointerId;return Gn.set(_,Jn(Gn.get(_)||null,r,n,l,c,f)),!0;case"gotpointercapture":return _=f.pointerId,Qn.set(_,Jn(Qn.get(_)||null,r,n,l,c,f)),!0}return!1}function Zh(r){var n=Ii(r.target);if(n!==null){var l=Bi(n);if(l!==null){if(n=l.tag,n===13){if(n=zh(l),n!==null){r.blockedOn=n,Qh(r.priority,function(){Xh(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function mo(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var l=ua(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Zt=c,l.target.dispatchEvent(c),Zt=null}else return n=ds(l),n!==null&&oa(n),r.blockedOn=l,!1;n.shift()}return!0}function ed(r,n,l){mo(r)&&l.delete(n)}function iv(){la=!1,oi!==null&&mo(oi)&&(oi=null),li!==null&&mo(li)&&(li=null),ai!==null&&mo(ai)&&(ai=null),Gn.forEach(ed),Qn.forEach(ed)}function Zn(r,n){r.blockedOn===n&&(r.blockedOn=null,la||(la=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iv)))}function es(r){function n(f){return Zn(f,r)}if(0<_o.length){Zn(_o[0],r);for(var l=1;l<_o.length;l++){var c=_o[l];c.blockedOn===r&&(c.blockedOn=null)}}for(oi!==null&&Zn(oi,r),li!==null&&Zn(li,r),ai!==null&&Zn(ai,r),Gn.forEach(n),Qn.forEach(n),l=0;l<ui.length;l++)c=ui[l],c.blockedOn===r&&(c.blockedOn=null);for(;0<ui.length&&(l=ui[0],l.blockedOn===null);)Zh(l),l.blockedOn===null&&ui.shift()}var ln=U.ReactCurrentBatchConfig,go=!0;function nv(r,n,l,c){var f=ze,_=ln.transition;ln.transition=null;try{ze=1,aa(r,n,l,c)}finally{ze=f,ln.transition=_}}function sv(r,n,l,c){var f=ze,_=ln.transition;ln.transition=null;try{ze=4,aa(r,n,l,c)}finally{ze=f,ln.transition=_}}function aa(r,n,l,c){if(go){var f=ua(r,n,l,c);if(f===null)Ea(r,n,c,vo,l),Jh(r,c);else if(rv(f,r,n,l,c))c.stopPropagation();else if(Jh(r,c),n&4&&-1<tv.indexOf(r)){for(;f!==null;){var _=ds(f);if(_!==null&&Yh(_),_=ua(r,n,l,c),_===null&&Ea(r,n,c,vo,l),_===f)break;f=_}f!==null&&c.stopPropagation()}else Ea(r,n,c,null,l)}}var vo=null;function ua(r,n,l,c){if(vo=null,r=Ql(c),r=Ii(r),r!==null)if(n=Bi(r),n===null)r=null;else if(l=n.tag,l===13){if(r=zh(n),r!==null)return r;r=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return vo=r,null}function td(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kg()){case ra:return 1;case $h:return 4;case uo:case qg:return 16;case Vh:return 536870912;default:return 16}default:return 16}}var ci=null,ca=null,yo=null;function rd(){if(yo)return yo;var r,n=ca,l=n.length,c,f="value"in ci?ci.value:ci.textContent,_=f.length;for(r=0;r<l&&n[r]===f[r];r++);var y=l-r;for(c=1;c<=y&&n[l-c]===f[_-c];c++);return yo=f.slice(r,1<c?1-c:void 0)}function So(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function wo(){return!0}function id(){return!1}function er(r){function n(l,c,f,_,y){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=_,this.target=y,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(l=r[C],this[C]=l?l(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wo:id,this.isPropagationStopped=id,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),n}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ha=er(an),ts=w({},an,{view:0,detail:0}),ov=er(ts),da,fa,rs,xo=w({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rs&&(rs&&r.type==="mousemove"?(da=r.screenX-rs.screenX,fa=r.screenY-rs.screenY):fa=da=0,rs=r),da)},movementY:function(r){return"movementY"in r?r.movementY:fa}}),nd=er(xo),lv=w({},xo,{dataTransfer:0}),av=er(lv),uv=w({},ts,{relatedTarget:0}),pa=er(uv),cv=w({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),hv=er(cv),dv=w({},an,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fv=er(dv),pv=w({},an,{data:0}),sd=er(pv),_v={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vv(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=gv[r])?!!n[r]:!1}function _a(){return vv}var yv=w({},ts,{key:function(r){if(r.key){var n=_v[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=So(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?mv[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(r){return r.type==="keypress"?So(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?So(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Sv=er(yv),wv=w({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),od=er(wv),xv=w({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a}),Cv=er(xv),kv=w({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),bv=er(kv),Ev=w({},xo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Pv=er(Ev),Rv=[9,13,27,32],ma=h&&"CompositionEvent"in window,is=null;h&&"documentMode"in document&&(is=document.documentMode);var Lv=h&&"TextEvent"in window&&!is,ld=h&&(!ma||is&&8<is&&11>=is),ad=" ",ud=!1;function cd(r,n){switch(r){case"keyup":return Rv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var un=!1;function Dv(r,n){switch(r){case"compositionend":return hd(n);case"keypress":return n.which!==32?null:(ud=!0,ad);case"textInput":return r=n.data,r===ad&&ud?null:r;default:return null}}function Tv(r,n){if(un)return r==="compositionend"||!ma&&cd(r,n)?(r=rd(),yo=ca=ci=null,un=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ld&&n.locale!=="ko"?null:n.data;default:return null}}var Mv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!Mv[r.type]:n==="textarea"}function fd(r,n,l,c){Nh(c),n=Po(n,"onChange"),0<n.length&&(l=new ha("onChange","change",null,l,c),r.push({event:l,listeners:n}))}var ns=null,ss=null;function Nv(r){Td(r,0)}function Co(r){var n=pn(r);if(Jt(n))return r}function Bv(r,n){if(r==="change")return n}var pd=!1;if(h){var ga;if(h){var va="oninput"in document;if(!va){var _d=document.createElement("div");_d.setAttribute("oninput","return;"),va=typeof _d.oninput=="function"}ga=va}else ga=!1;pd=ga&&(!document.documentMode||9<document.documentMode)}function md(){ns&&(ns.detachEvent("onpropertychange",gd),ss=ns=null)}function gd(r){if(r.propertyName==="value"&&Co(ss)){var n=[];fd(n,ss,r,Ql(r)),Oh(Nv,n)}}function Iv(r,n,l){r==="focusin"?(md(),ns=n,ss=l,ns.attachEvent("onpropertychange",gd)):r==="focusout"&&md()}function Av(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Co(ss)}function Ov(r,n){if(r==="click")return Co(n)}function zv(r,n){if(r==="input"||r==="change")return Co(n)}function Fv(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var wr=typeof Object.is=="function"?Object.is:Fv;function os(r,n){if(wr(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var l=Object.keys(r),c=Object.keys(n);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!p.call(n,f)||!wr(r[f],n[f]))return!1}return!0}function vd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function yd(r,n){var l=vd(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=n&&c>=n)return{node:l,offset:n-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=vd(l)}}function Sd(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Sd(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function wd(){for(var r=window,n=Ne();n instanceof r.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)r=n.contentWindow;else break;n=Ne(r.document)}return n}function ya(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function Hv(r){var n=wd(),l=r.focusedElem,c=r.selectionRange;if(n!==l&&l&&l.ownerDocument&&Sd(l.ownerDocument.documentElement,l)){if(c!==null&&ya(l)){if(n=c.start,r=c.end,r===void 0&&(r=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(r,l.value.length);else if(r=(n=l.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,_=Math.min(c.start,f);c=c.end===void 0?_:Math.min(c.end,f),!r.extend&&_>c&&(f=c,c=_,_=f),f=yd(l,_);var y=yd(l,c);f&&y&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==y.node||r.focusOffset!==y.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),r.removeAllRanges(),_>c?(r.addRange(n),r.extend(y.node,y.offset)):(n.setEnd(y.node,y.offset),r.addRange(n)))}}for(n=[],r=l;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)r=n[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var jv=h&&"documentMode"in document&&11>=document.documentMode,cn=null,Sa=null,ls=null,wa=!1;function xd(r,n,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wa||cn==null||cn!==Ne(c)||(c=cn,"selectionStart"in c&&ya(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ls&&os(ls,c)||(ls=c,c=Po(Sa,"onSelect"),0<c.length&&(n=new ha("onSelect","select",null,n,l),r.push({event:n,listeners:c}),n.target=cn)))}function ko(r,n){var l={};return l[r.toLowerCase()]=n.toLowerCase(),l["Webkit"+r]="webkit"+n,l["Moz"+r]="moz"+n,l}var hn={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},xa={},Cd={};h&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function bo(r){if(xa[r])return xa[r];if(!hn[r])return r;var n=hn[r],l;for(l in n)if(n.hasOwnProperty(l)&&l in Cd)return xa[r]=n[l];return r}var kd=bo("animationend"),bd=bo("animationiteration"),Ed=bo("animationstart"),Pd=bo("transitionend"),Rd=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(r,n){Rd.set(r,n),a(n,[r])}for(var Ca=0;Ca<Ld.length;Ca++){var ka=Ld[Ca],Wv=ka.toLowerCase(),Uv=ka[0].toUpperCase()+ka.slice(1);hi(Wv,"on"+Uv)}hi(kd,"onAnimationEnd"),hi(bd,"onAnimationIteration"),hi(Ed,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Pd,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$v=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Dd(r,n,l){var c=r.type||"unknown-event";r.currentTarget=l,Wg(c,n,void 0,r),r.currentTarget=null}function Td(r,n){n=(n&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],f=c.event;c=c.listeners;e:{var _=void 0;if(n)for(var y=c.length-1;0<=y;y--){var C=c[y],P=C.instance,H=C.currentTarget;if(C=C.listener,P!==_&&f.isPropagationStopped())break e;Dd(f,C,H),_=P}else for(y=0;y<c.length;y++){if(C=c[y],P=C.instance,H=C.currentTarget,C=C.listener,P!==_&&f.isPropagationStopped())break e;Dd(f,C,H),_=P}}}if(ao)throw r=ta,ao=!1,ta=null,r}function $e(r,n){var l=n[Ma];l===void 0&&(l=n[Ma]=new Set);var c=r+"__bubble";l.has(c)||(Md(n,r,2,!1),l.add(c))}function ba(r,n,l){var c=0;n&&(c|=4),Md(l,r,c,n)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function us(r){if(!r[Eo]){r[Eo]=!0,s.forEach(function(l){l!=="selectionchange"&&($v.has(l)||ba(l,!1,r),ba(l,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[Eo]||(n[Eo]=!0,ba("selectionchange",!1,n))}}function Md(r,n,l,c){switch(td(n)){case 1:var f=nv;break;case 4:f=sv;break;default:f=aa}l=f.bind(null,n,l,r),f=void 0,!ea||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?r.addEventListener(n,l,{capture:!0,passive:f}):r.addEventListener(n,l,!0):f!==void 0?r.addEventListener(n,l,{passive:f}):r.addEventListener(n,l,!1)}function Ea(r,n,l,c,f){var _=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var C=c.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(y===4)for(y=c.return;y!==null;){var P=y.tag;if((P===3||P===4)&&(P=y.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;y=y.return}for(;C!==null;){if(y=Ii(C),y===null)return;if(P=y.tag,P===5||P===6){c=_=y;continue e}C=C.parentNode}}c=c.return}Oh(function(){var H=_,Y=Ql(l),G=[];e:{var q=Rd.get(r);if(q!==void 0){var ce=ha,fe=r;switch(r){case"keypress":if(So(l)===0)break e;case"keydown":case"keyup":ce=Sv;break;case"focusin":fe="focus",ce=pa;break;case"focusout":fe="blur",ce=pa;break;case"beforeblur":case"afterblur":ce=pa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Cv;break;case kd:case bd:case Ed:ce=hv;break;case Pd:ce=bv;break;case"scroll":ce=ov;break;case"wheel":ce=Pv;break;case"copy":case"cut":case"paste":ce=fv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=od}var _e=(n&4)!==0,it=!_e&&r==="scroll",N=_e?q!==null?q+"Capture":null:q;_e=[];for(var D=H,F;D!==null;){F=D;var te=F.stateNode;if(F.tag===5&&te!==null&&(F=te,N!==null&&(te=Vn(D,N),te!=null&&_e.push(cs(D,te,F)))),it)break;D=D.return}0<_e.length&&(q=new ce(q,fe,null,l,Y),G.push({event:q,listeners:_e}))}}if((n&7)===0){e:{if(q=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",q&&l!==Zt&&(fe=l.relatedTarget||l.fromElement)&&(Ii(fe)||fe[Vr]))break e;if((ce||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,ce?(fe=l.relatedTarget||l.toElement,ce=H,fe=fe?Ii(fe):null,fe!==null&&(it=Bi(fe),fe!==it||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=H),ce!==fe)){if(_e=nd,te="onMouseLeave",N="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(_e=od,te="onPointerLeave",N="onPointerEnter",D="pointer"),it=ce==null?q:pn(ce),F=fe==null?q:pn(fe),q=new _e(te,D+"leave",ce,l,Y),q.target=it,q.relatedTarget=F,te=null,Ii(Y)===H&&(_e=new _e(N,D+"enter",fe,l,Y),_e.target=F,_e.relatedTarget=it,te=_e),it=te,ce&&fe)t:{for(_e=ce,N=fe,D=0,F=_e;F;F=dn(F))D++;for(F=0,te=N;te;te=dn(te))F++;for(;0<D-F;)_e=dn(_e),D--;for(;0<F-D;)N=dn(N),F--;for(;D--;){if(_e===N||N!==null&&_e===N.alternate)break t;_e=dn(_e),N=dn(N)}_e=null}else _e=null;ce!==null&&Nd(G,q,ce,_e,!1),fe!==null&&it!==null&&Nd(G,it,fe,_e,!0)}}e:{if(q=H?pn(H):window,ce=q.nodeName&&q.nodeName.toLowerCase(),ce==="select"||ce==="input"&&q.type==="file")var ge=Bv;else if(dd(q))if(pd)ge=zv;else{ge=Av;var ye=Iv}else(ce=q.nodeName)&&ce.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ge=Ov);if(ge&&(ge=ge(r,H))){fd(G,ge,l,Y);break e}ye&&ye(r,q,H),r==="focusout"&&(ye=q._wrapperState)&&ye.controlled&&q.type==="number"&&nn(q,"number",q.value)}switch(ye=H?pn(H):window,r){case"focusin":(dd(ye)||ye.contentEditable==="true")&&(cn=ye,Sa=H,ls=null);break;case"focusout":ls=Sa=cn=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,xd(G,l,Y);break;case"selectionchange":if(jv)break;case"keydown":case"keyup":xd(G,l,Y)}var Se;if(ma)e:{switch(r){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else un?cd(r,l)&&(ke="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ke="onCompositionStart");ke&&(ld&&l.locale!=="ko"&&(un||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&un&&(Se=rd()):(ci=Y,ca="value"in ci?ci.value:ci.textContent,un=!0)),ye=Po(H,ke),0<ye.length&&(ke=new sd(ke,r,null,l,Y),G.push({event:ke,listeners:ye}),Se?ke.data=Se:(Se=hd(l),Se!==null&&(ke.data=Se)))),(Se=Lv?Dv(r,l):Tv(r,l))&&(H=Po(H,"onBeforeInput"),0<H.length&&(Y=new sd("onBeforeInput","beforeinput",null,l,Y),G.push({event:Y,listeners:H}),Y.data=Se))}Td(G,n)})}function cs(r,n,l){return{instance:r,listener:n,currentTarget:l}}function Po(r,n){for(var l=n+"Capture",c=[];r!==null;){var f=r,_=f.stateNode;f.tag===5&&_!==null&&(f=_,_=Vn(r,l),_!=null&&c.unshift(cs(r,_,f)),_=Vn(r,n),_!=null&&c.push(cs(r,_,f))),r=r.return}return c}function dn(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Nd(r,n,l,c,f){for(var _=n._reactName,y=[];l!==null&&l!==c;){var C=l,P=C.alternate,H=C.stateNode;if(P!==null&&P===c)break;C.tag===5&&H!==null&&(C=H,f?(P=Vn(l,_),P!=null&&y.unshift(cs(l,P,C))):f||(P=Vn(l,_),P!=null&&y.push(cs(l,P,C)))),l=l.return}y.length!==0&&r.push({event:n,listeners:y})}var Vv=/\r\n?/g,Kv=/\u0000|\uFFFD/g;function Bd(r){return(typeof r=="string"?r:""+r).replace(Vv,`
`).replace(Kv,"")}function Ro(r,n,l){if(n=Bd(n),Bd(r)!==n&&l)throw Error(i(425))}function Lo(){}var Pa=null,Ra=null;function La(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Da=typeof setTimeout=="function"?setTimeout:void 0,qv=typeof clearTimeout=="function"?clearTimeout:void 0,Id=typeof Promise=="function"?Promise:void 0,Yv=typeof queueMicrotask=="function"?queueMicrotask:typeof Id<"u"?function(r){return Id.resolve(null).then(r).catch(Xv)}:Da;function Xv(r){setTimeout(function(){throw r})}function Ta(r,n){var l=n,c=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(c===0){r.removeChild(f),es(n);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=f}while(l);es(n)}function di(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Ad(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return r;n--}else l==="/$"&&n++}r=r.previousSibling}return null}var fn=Math.random().toString(36).slice(2),Dr="__reactFiber$"+fn,hs="__reactProps$"+fn,Vr="__reactContainer$"+fn,Ma="__reactEvents$"+fn,Gv="__reactListeners$"+fn,Qv="__reactHandles$"+fn;function Ii(r){var n=r[Dr];if(n)return n;for(var l=r.parentNode;l;){if(n=l[Vr]||l[Dr]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(r=Ad(r);r!==null;){if(l=r[Dr])return l;r=Ad(r)}return n}r=l,l=r.parentNode}return null}function ds(r){return r=r[Dr]||r[Vr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function pn(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(i(33))}function Do(r){return r[hs]||null}var Na=[],_n=-1;function fi(r){return{current:r}}function Ve(r){0>_n||(r.current=Na[_n],Na[_n]=null,_n--)}function je(r,n){_n++,Na[_n]=r.current,r.current=n}var pi={},Lt=fi(pi),Wt=fi(!1),Ai=pi;function mn(r,n){var l=r.type.contextTypes;if(!l)return pi;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var f={},_;for(_ in l)f[_]=n[_];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=f),f}function Ut(r){return r=r.childContextTypes,r!=null}function To(){Ve(Wt),Ve(Lt)}function Od(r,n,l){if(Lt.current!==pi)throw Error(i(168));je(Lt,n),je(Wt,l)}function zd(r,n,l){var c=r.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return l;c=c.getChildContext();for(var f in c)if(!(f in n))throw Error(i(108,we(r)||"Unknown",f));return w({},l,c)}function Mo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pi,Ai=Lt.current,je(Lt,r),je(Wt,Wt.current),!0}function Fd(r,n,l){var c=r.stateNode;if(!c)throw Error(i(169));l?(r=zd(r,n,Ai),c.__reactInternalMemoizedMergedChildContext=r,Ve(Wt),Ve(Lt),je(Lt,r)):Ve(Wt),je(Wt,l)}var Kr=null,No=!1,Ba=!1;function Hd(r){Kr===null?Kr=[r]:Kr.push(r)}function Jv(r){No=!0,Hd(r)}function _i(){if(!Ba&&Kr!==null){Ba=!0;var r=0,n=ze;try{var l=Kr;for(ze=1;r<l.length;r++){var c=l[r];do c=c(!0);while(c!==null)}Kr=null,No=!1}catch(f){throw Kr!==null&&(Kr=Kr.slice(r+1)),Wh(ra,_i),f}finally{ze=n,Ba=!1}}return null}var gn=[],vn=0,Bo=null,Io=0,ur=[],cr=0,Oi=null,qr=1,Yr="";function zi(r,n){gn[vn++]=Io,gn[vn++]=Bo,Bo=r,Io=n}function jd(r,n,l){ur[cr++]=qr,ur[cr++]=Yr,ur[cr++]=Oi,Oi=r;var c=qr;r=Yr;var f=32-Sr(c)-1;c&=~(1<<f),l+=1;var _=32-Sr(n)+f;if(30<_){var y=f-f%5;_=(c&(1<<y)-1).toString(32),c>>=y,f-=y,qr=1<<32-Sr(n)+f|l<<f|c,Yr=_+r}else qr=1<<_|l<<f|c,Yr=r}function Ia(r){r.return!==null&&(zi(r,1),jd(r,1,0))}function Aa(r){for(;r===Bo;)Bo=gn[--vn],gn[vn]=null,Io=gn[--vn],gn[vn]=null;for(;r===Oi;)Oi=ur[--cr],ur[cr]=null,Yr=ur[--cr],ur[cr]=null,qr=ur[--cr],ur[cr]=null}var tr=null,rr=null,qe=!1,xr=null;function Wd(r,n){var l=pr(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=r,n=r.deletions,n===null?(r.deletions=[l],r.flags|=16):n.push(l)}function Ud(r,n){switch(r.tag){case 5:var l=r.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,tr=r,rr=di(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,tr=r,rr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=Oi!==null?{id:qr,overflow:Yr}:null,r.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=pr(18,null,null,0),l.stateNode=n,l.return=r,r.child=l,tr=r,rr=null,!0):!1;default:return!1}}function Oa(r){return(r.mode&1)!==0&&(r.flags&128)===0}function za(r){if(qe){var n=rr;if(n){var l=n;if(!Ud(r,n)){if(Oa(r))throw Error(i(418));n=di(l.nextSibling);var c=tr;n&&Ud(r,n)?Wd(c,l):(r.flags=r.flags&-4097|2,qe=!1,tr=r)}}else{if(Oa(r))throw Error(i(418));r.flags=r.flags&-4097|2,qe=!1,tr=r}}}function $d(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;tr=r}function Ao(r){if(r!==tr)return!1;if(!qe)return $d(r),qe=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!La(r.type,r.memoizedProps)),n&&(n=rr)){if(Oa(r))throw Vd(),Error(i(418));for(;n;)Wd(r,n),n=di(n.nextSibling)}if($d(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(n===0){rr=di(r.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}r=r.nextSibling}rr=null}}else rr=tr?di(r.stateNode.nextSibling):null;return!0}function Vd(){for(var r=rr;r;)r=di(r.nextSibling)}function yn(){rr=tr=null,qe=!1}function Fa(r){xr===null?xr=[r]:xr.push(r)}var Zv=U.ReactCurrentBatchConfig;function fs(r,n,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(i(309));var c=l.stateNode}if(!c)throw Error(i(147,r));var f=c,_=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===_?n.ref:(n=function(y){var C=f.refs;y===null?delete C[_]:C[_]=y},n._stringRef=_,n)}if(typeof r!="string")throw Error(i(284));if(!l._owner)throw Error(i(290,r))}return r}function Oo(r,n){throw r=Object.prototype.toString.call(n),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function Kd(r){var n=r._init;return n(r._payload)}function qd(r){function n(N,D){if(r){var F=N.deletions;F===null?(N.deletions=[D],N.flags|=16):F.push(D)}}function l(N,D){if(!r)return null;for(;D!==null;)n(N,D),D=D.sibling;return null}function c(N,D){for(N=new Map;D!==null;)D.key!==null?N.set(D.key,D):N.set(D.index,D),D=D.sibling;return N}function f(N,D){return N=Ci(N,D),N.index=0,N.sibling=null,N}function _(N,D,F){return N.index=F,r?(F=N.alternate,F!==null?(F=F.index,F<D?(N.flags|=2,D):F):(N.flags|=2,D)):(N.flags|=1048576,D)}function y(N){return r&&N.alternate===null&&(N.flags|=2),N}function C(N,D,F,te){return D===null||D.tag!==6?(D=Du(F,N.mode,te),D.return=N,D):(D=f(D,F),D.return=N,D)}function P(N,D,F,te){var ge=F.type;return ge===se?Y(N,D,F.props.children,te,F.key):D!==null&&(D.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===K&&Kd(ge)===D.type)?(te=f(D,F.props),te.ref=fs(N,D,F),te.return=N,te):(te=ll(F.type,F.key,F.props,null,N.mode,te),te.ref=fs(N,D,F),te.return=N,te)}function H(N,D,F,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=Tu(F,N.mode,te),D.return=N,D):(D=f(D,F.children||[]),D.return=N,D)}function Y(N,D,F,te,ge){return D===null||D.tag!==7?(D=Ki(F,N.mode,te,ge),D.return=N,D):(D=f(D,F),D.return=N,D)}function G(N,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Du(""+D,N.mode,F),D.return=N,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case X:return F=ll(D.type,D.key,D.props,null,N.mode,F),F.ref=fs(N,null,D),F.return=N,F;case R:return D=Tu(D,N.mode,F),D.return=N,D;case K:var te=D._init;return G(N,te(D._payload),F)}if(ii(D)||re(D))return D=Ki(D,N.mode,F,null),D.return=N,D;Oo(N,D)}return null}function q(N,D,F,te){var ge=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ge!==null?null:C(N,D,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case X:return F.key===ge?P(N,D,F,te):null;case R:return F.key===ge?H(N,D,F,te):null;case K:return ge=F._init,q(N,D,ge(F._payload),te)}if(ii(F)||re(F))return ge!==null?null:Y(N,D,F,te,null);Oo(N,F)}return null}function ce(N,D,F,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number")return N=N.get(F)||null,C(D,N,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case X:return N=N.get(te.key===null?F:te.key)||null,P(D,N,te,ge);case R:return N=N.get(te.key===null?F:te.key)||null,H(D,N,te,ge);case K:var ye=te._init;return ce(N,D,F,ye(te._payload),ge)}if(ii(te)||re(te))return N=N.get(F)||null,Y(D,N,te,ge,null);Oo(D,te)}return null}function fe(N,D,F,te){for(var ge=null,ye=null,Se=D,ke=D=0,mt=null;Se!==null&&ke<F.length;ke++){Se.index>ke?(mt=Se,Se=null):mt=Se.sibling;var Ae=q(N,Se,F[ke],te);if(Ae===null){Se===null&&(Se=mt);break}r&&Se&&Ae.alternate===null&&n(N,Se),D=_(Ae,D,ke),ye===null?ge=Ae:ye.sibling=Ae,ye=Ae,Se=mt}if(ke===F.length)return l(N,Se),qe&&zi(N,ke),ge;if(Se===null){for(;ke<F.length;ke++)Se=G(N,F[ke],te),Se!==null&&(D=_(Se,D,ke),ye===null?ge=Se:ye.sibling=Se,ye=Se);return qe&&zi(N,ke),ge}for(Se=c(N,Se);ke<F.length;ke++)mt=ce(Se,N,ke,F[ke],te),mt!==null&&(r&&mt.alternate!==null&&Se.delete(mt.key===null?ke:mt.key),D=_(mt,D,ke),ye===null?ge=mt:ye.sibling=mt,ye=mt);return r&&Se.forEach(function(ki){return n(N,ki)}),qe&&zi(N,ke),ge}function _e(N,D,F,te){var ge=re(F);if(typeof ge!="function")throw Error(i(150));if(F=ge.call(F),F==null)throw Error(i(151));for(var ye=ge=null,Se=D,ke=D=0,mt=null,Ae=F.next();Se!==null&&!Ae.done;ke++,Ae=F.next()){Se.index>ke?(mt=Se,Se=null):mt=Se.sibling;var ki=q(N,Se,Ae.value,te);if(ki===null){Se===null&&(Se=mt);break}r&&Se&&ki.alternate===null&&n(N,Se),D=_(ki,D,ke),ye===null?ge=ki:ye.sibling=ki,ye=ki,Se=mt}if(Ae.done)return l(N,Se),qe&&zi(N,ke),ge;if(Se===null){for(;!Ae.done;ke++,Ae=F.next())Ae=G(N,Ae.value,te),Ae!==null&&(D=_(Ae,D,ke),ye===null?ge=Ae:ye.sibling=Ae,ye=Ae);return qe&&zi(N,ke),ge}for(Se=c(N,Se);!Ae.done;ke++,Ae=F.next())Ae=ce(Se,N,ke,Ae.value,te),Ae!==null&&(r&&Ae.alternate!==null&&Se.delete(Ae.key===null?ke:Ae.key),D=_(Ae,D,ke),ye===null?ge=Ae:ye.sibling=Ae,ye=Ae);return r&&Se.forEach(function(My){return n(N,My)}),qe&&zi(N,ke),ge}function it(N,D,F,te){if(typeof F=="object"&&F!==null&&F.type===se&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case X:e:{for(var ge=F.key,ye=D;ye!==null;){if(ye.key===ge){if(ge=F.type,ge===se){if(ye.tag===7){l(N,ye.sibling),D=f(ye,F.props.children),D.return=N,N=D;break e}}else if(ye.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===K&&Kd(ge)===ye.type){l(N,ye.sibling),D=f(ye,F.props),D.ref=fs(N,ye,F),D.return=N,N=D;break e}l(N,ye);break}else n(N,ye);ye=ye.sibling}F.type===se?(D=Ki(F.props.children,N.mode,te,F.key),D.return=N,N=D):(te=ll(F.type,F.key,F.props,null,N.mode,te),te.ref=fs(N,D,F),te.return=N,N=te)}return y(N);case R:e:{for(ye=F.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){l(N,D.sibling),D=f(D,F.children||[]),D.return=N,N=D;break e}else{l(N,D);break}else n(N,D);D=D.sibling}D=Tu(F,N.mode,te),D.return=N,N=D}return y(N);case K:return ye=F._init,it(N,D,ye(F._payload),te)}if(ii(F))return fe(N,D,F,te);if(re(F))return _e(N,D,F,te);Oo(N,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,D!==null&&D.tag===6?(l(N,D.sibling),D=f(D,F),D.return=N,N=D):(l(N,D),D=Du(F,N.mode,te),D.return=N,N=D),y(N)):l(N,D)}return it}var Sn=qd(!0),Yd=qd(!1),zo=fi(null),Fo=null,wn=null,Ha=null;function ja(){Ha=wn=Fo=null}function Wa(r){var n=zo.current;Ve(zo),r._currentValue=n}function Ua(r,n,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),r===l)break;r=r.return}}function xn(r,n){Fo=r,Ha=wn=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&n)!==0&&($t=!0),r.firstContext=null)}function hr(r){var n=r._currentValue;if(Ha!==r)if(r={context:r,memoizedValue:n,next:null},wn===null){if(Fo===null)throw Error(i(308));wn=r,Fo.dependencies={lanes:0,firstContext:r}}else wn=wn.next=r;return n}var Fi=null;function $a(r){Fi===null?Fi=[r]:Fi.push(r)}function Xd(r,n,l,c){var f=n.interleaved;return f===null?(l.next=l,$a(n)):(l.next=f.next,f.next=l),n.interleaved=l,Xr(r,c)}function Xr(r,n){r.lanes|=n;var l=r.alternate;for(l!==null&&(l.lanes|=n),l=r,r=r.return;r!==null;)r.childLanes|=n,l=r.alternate,l!==null&&(l.childLanes|=n),l=r,r=r.return;return l.tag===3?l.stateNode:null}var mi=!1;function Va(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Gr(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function gi(r,n,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Ie&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,Xr(r,l)}return f=c.interleaved,f===null?(n.next=n,$a(c)):(n.next=f.next,f.next=n),c.interleaved=n,Xr(r,l)}function Ho(r,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var c=n.lanes;c&=r.pendingLanes,l|=c,n.lanes=l,sa(r,l)}}function Qd(r,n){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var y={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};_===null?f=_=y:_=_.next=y,l=l.next}while(l!==null);_===null?f=_=n:_=_.next=n}else f=_=n;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:_,shared:c.shared,effects:c.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=n:r.next=n,l.lastBaseUpdate=n}function jo(r,n,l,c){var f=r.updateQueue;mi=!1;var _=f.firstBaseUpdate,y=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var P=C,H=P.next;P.next=null,y===null?_=H:y.next=H,y=P;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,C=Y.lastBaseUpdate,C!==y&&(C===null?Y.firstBaseUpdate=H:C.next=H,Y.lastBaseUpdate=P))}if(_!==null){var G=f.baseState;y=0,Y=H=P=null,C=_;do{var q=C.lane,ce=C.eventTime;if((c&q)===q){Y!==null&&(Y=Y.next={eventTime:ce,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var fe=r,_e=C;switch(q=n,ce=l,_e.tag){case 1:if(fe=_e.payload,typeof fe=="function"){G=fe.call(ce,G,q);break e}G=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=_e.payload,q=typeof fe=="function"?fe.call(ce,G,q):fe,q==null)break e;G=w({},G,q);break e;case 2:mi=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,q=f.effects,q===null?f.effects=[C]:q.push(C))}else ce={eventTime:ce,lane:q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Y===null?(H=Y=ce,P=G):Y=Y.next=ce,y|=q;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;q=C,C=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);if(Y===null&&(P=G),f.baseState=P,f.firstBaseUpdate=H,f.lastBaseUpdate=Y,n=f.shared.interleaved,n!==null){f=n;do y|=f.lane,f=f.next;while(f!==n)}else _===null&&(f.shared.lanes=0);Wi|=y,r.lanes=y,r.memoizedState=G}}function Jd(r,n,l){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var c=r[n],f=c.callback;if(f!==null){if(c.callback=null,c=l,typeof f!="function")throw Error(i(191,f));f.call(c)}}}var ps={},Tr=fi(ps),_s=fi(ps),ms=fi(ps);function Hi(r){if(r===ps)throw Error(i(174));return r}function Ka(r,n){switch(je(ms,n),je(_s,r),je(Tr,ps),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:oe(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=oe(n,r)}Ve(Tr),je(Tr,n)}function Cn(){Ve(Tr),Ve(_s),Ve(ms)}function Zd(r){Hi(ms.current);var n=Hi(Tr.current),l=oe(n,r.type);n!==l&&(je(_s,r),je(Tr,l))}function qa(r){_s.current===r&&(Ve(Tr),Ve(_s))}var Xe=fi(0);function Wo(r){for(var n=r;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ya=[];function Xa(){for(var r=0;r<Ya.length;r++)Ya[r]._workInProgressVersionPrimary=null;Ya.length=0}var Uo=U.ReactCurrentDispatcher,Ga=U.ReactCurrentBatchConfig,ji=0,Ge=null,ut=null,pt=null,$o=!1,gs=!1,vs=0,ey=0;function Dt(){throw Error(i(321))}function Qa(r,n){if(n===null)return!1;for(var l=0;l<n.length&&l<r.length;l++)if(!wr(r[l],n[l]))return!1;return!0}function Ja(r,n,l,c,f,_){if(ji=_,Ge=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Uo.current=r===null||r.memoizedState===null?ny:sy,r=l(c,f),gs){_=0;do{if(gs=!1,vs=0,25<=_)throw Error(i(301));_+=1,pt=ut=null,n.updateQueue=null,Uo.current=oy,r=l(c,f)}while(gs)}if(Uo.current=qo,n=ut!==null&&ut.next!==null,ji=0,pt=ut=Ge=null,$o=!1,n)throw Error(i(300));return r}function Za(){var r=vs!==0;return vs=0,r}function Mr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ge.memoizedState=pt=r:pt=pt.next=r,pt}function dr(){if(ut===null){var r=Ge.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var n=pt===null?Ge.memoizedState:pt.next;if(n!==null)pt=n,ut=r;else{if(r===null)throw Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?Ge.memoizedState=pt=r:pt=pt.next=r}return pt}function ys(r,n){return typeof n=="function"?n(r):n}function eu(r){var n=dr(),l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=ut,f=c.baseQueue,_=l.pending;if(_!==null){if(f!==null){var y=f.next;f.next=_.next,_.next=y}c.baseQueue=f=_,l.pending=null}if(f!==null){_=f.next,c=c.baseState;var C=y=null,P=null,H=_;do{var Y=H.lane;if((ji&Y)===Y)P!==null&&(P=P.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),c=H.hasEagerState?H.eagerState:r(c,H.action);else{var G={lane:Y,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};P===null?(C=P=G,y=c):P=P.next=G,Ge.lanes|=Y,Wi|=Y}H=H.next}while(H!==null&&H!==_);P===null?y=c:P.next=C,wr(c,n.memoizedState)||($t=!0),n.memoizedState=c,n.baseState=y,n.baseQueue=P,l.lastRenderedState=c}if(r=l.interleaved,r!==null){f=r;do _=f.lane,Ge.lanes|=_,Wi|=_,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function tu(r){var n=dr(),l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,f=l.pending,_=n.memoizedState;if(f!==null){l.pending=null;var y=f=f.next;do _=r(_,y.action),y=y.next;while(y!==f);wr(_,n.memoizedState)||($t=!0),n.memoizedState=_,n.baseQueue===null&&(n.baseState=_),l.lastRenderedState=_}return[_,c]}function ef(){}function tf(r,n){var l=Ge,c=dr(),f=n(),_=!wr(c.memoizedState,f);if(_&&(c.memoizedState=f,$t=!0),c=c.queue,ru(sf.bind(null,l,c,r),[r]),c.getSnapshot!==n||_||pt!==null&&pt.memoizedState.tag&1){if(l.flags|=2048,Ss(9,nf.bind(null,l,c,f,n),void 0,null),_t===null)throw Error(i(349));(ji&30)!==0||rf(l,n,f)}return f}function rf(r,n,l){r.flags|=16384,r={getSnapshot:n,value:l},n=Ge.updateQueue,n===null?(n={lastEffect:null,stores:null},Ge.updateQueue=n,n.stores=[r]):(l=n.stores,l===null?n.stores=[r]:l.push(r))}function nf(r,n,l,c){n.value=l,n.getSnapshot=c,of(n)&&lf(r)}function sf(r,n,l){return l(function(){of(n)&&lf(r)})}function of(r){var n=r.getSnapshot;r=r.value;try{var l=n();return!wr(r,l)}catch{return!0}}function lf(r){var n=Xr(r,1);n!==null&&Er(n,r,1,-1)}function af(r){var n=Mr();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:r},n.queue=r,r=r.dispatch=iy.bind(null,Ge,r),[n.memoizedState,r]}function Ss(r,n,l,c){return r={tag:r,create:n,destroy:l,deps:c,next:null},n=Ge.updateQueue,n===null?(n={lastEffect:null,stores:null},Ge.updateQueue=n,n.lastEffect=r.next=r):(l=n.lastEffect,l===null?n.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,n.lastEffect=r)),r}function uf(){return dr().memoizedState}function Vo(r,n,l,c){var f=Mr();Ge.flags|=r,f.memoizedState=Ss(1|n,l,void 0,c===void 0?null:c)}function Ko(r,n,l,c){var f=dr();c=c===void 0?null:c;var _=void 0;if(ut!==null){var y=ut.memoizedState;if(_=y.destroy,c!==null&&Qa(c,y.deps)){f.memoizedState=Ss(n,l,_,c);return}}Ge.flags|=r,f.memoizedState=Ss(1|n,l,_,c)}function cf(r,n){return Vo(8390656,8,r,n)}function ru(r,n){return Ko(2048,8,r,n)}function hf(r,n){return Ko(4,2,r,n)}function df(r,n){return Ko(4,4,r,n)}function ff(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function pf(r,n,l){return l=l!=null?l.concat([r]):null,Ko(4,4,ff.bind(null,n,r),l)}function iu(){}function _f(r,n){var l=dr();n=n===void 0?null:n;var c=l.memoizedState;return c!==null&&n!==null&&Qa(n,c[1])?c[0]:(l.memoizedState=[r,n],r)}function mf(r,n){var l=dr();n=n===void 0?null:n;var c=l.memoizedState;return c!==null&&n!==null&&Qa(n,c[1])?c[0]:(r=r(),l.memoizedState=[r,n],r)}function gf(r,n,l){return(ji&21)===0?(r.baseState&&(r.baseState=!1,$t=!0),r.memoizedState=l):(wr(l,n)||(l=Kh(),Ge.lanes|=l,Wi|=l,r.baseState=!0),n)}function ty(r,n){var l=ze;ze=l!==0&&4>l?l:4,r(!0);var c=Ga.transition;Ga.transition={};try{r(!1),n()}finally{ze=l,Ga.transition=c}}function vf(){return dr().memoizedState}function ry(r,n,l){var c=wi(r);if(l={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null},yf(r))Sf(n,l);else if(l=Xd(r,n,l,c),l!==null){var f=Ot();Er(l,r,c,f),wf(l,n,c)}}function iy(r,n,l){var c=wi(r),f={lane:c,action:l,hasEagerState:!1,eagerState:null,next:null};if(yf(r))Sf(n,f);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=n.lastRenderedReducer,_!==null))try{var y=n.lastRenderedState,C=_(y,l);if(f.hasEagerState=!0,f.eagerState=C,wr(C,y)){var P=n.interleaved;P===null?(f.next=f,$a(n)):(f.next=P.next,P.next=f),n.interleaved=f;return}}catch{}finally{}l=Xd(r,n,f,c),l!==null&&(f=Ot(),Er(l,r,c,f),wf(l,n,c))}}function yf(r){var n=r.alternate;return r===Ge||n!==null&&n===Ge}function Sf(r,n){gs=$o=!0;var l=r.pending;l===null?n.next=n:(n.next=l.next,l.next=n),r.pending=n}function wf(r,n,l){if((l&4194240)!==0){var c=n.lanes;c&=r.pendingLanes,l|=c,n.lanes=l,sa(r,l)}}var qo={readContext:hr,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},ny={readContext:hr,useCallback:function(r,n){return Mr().memoizedState=[r,n===void 0?null:n],r},useContext:hr,useEffect:cf,useImperativeHandle:function(r,n,l){return l=l!=null?l.concat([r]):null,Vo(4194308,4,ff.bind(null,n,r),l)},useLayoutEffect:function(r,n){return Vo(4194308,4,r,n)},useInsertionEffect:function(r,n){return Vo(4,2,r,n)},useMemo:function(r,n){var l=Mr();return n=n===void 0?null:n,r=r(),l.memoizedState=[r,n],r},useReducer:function(r,n,l){var c=Mr();return n=l!==void 0?l(n):n,c.memoizedState=c.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},c.queue=r,r=r.dispatch=ry.bind(null,Ge,r),[c.memoizedState,r]},useRef:function(r){var n=Mr();return r={current:r},n.memoizedState=r},useState:af,useDebugValue:iu,useDeferredValue:function(r){return Mr().memoizedState=r},useTransition:function(){var r=af(!1),n=r[0];return r=ty.bind(null,r[1]),Mr().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,l){var c=Ge,f=Mr();if(qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=n(),_t===null)throw Error(i(349));(ji&30)!==0||rf(c,n,l)}f.memoizedState=l;var _={value:l,getSnapshot:n};return f.queue=_,cf(sf.bind(null,c,_,r),[r]),c.flags|=2048,Ss(9,nf.bind(null,c,_,l,n),void 0,null),l},useId:function(){var r=Mr(),n=_t.identifierPrefix;if(qe){var l=Yr,c=qr;l=(c&~(1<<32-Sr(c)-1)).toString(32)+l,n=":"+n+"R"+l,l=vs++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=ey++,n=":"+n+"r"+l.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},sy={readContext:hr,useCallback:_f,useContext:hr,useEffect:ru,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:df,useMemo:mf,useReducer:eu,useRef:uf,useState:function(){return eu(ys)},useDebugValue:iu,useDeferredValue:function(r){var n=dr();return gf(n,ut.memoizedState,r)},useTransition:function(){var r=eu(ys)[0],n=dr().memoizedState;return[r,n]},useMutableSource:ef,useSyncExternalStore:tf,useId:vf,unstable_isNewReconciler:!1},oy={readContext:hr,useCallback:_f,useContext:hr,useEffect:ru,useImperativeHandle:pf,useInsertionEffect:hf,useLayoutEffect:df,useMemo:mf,useReducer:tu,useRef:uf,useState:function(){return tu(ys)},useDebugValue:iu,useDeferredValue:function(r){var n=dr();return ut===null?n.memoizedState=r:gf(n,ut.memoizedState,r)},useTransition:function(){var r=tu(ys)[0],n=dr().memoizedState;return[r,n]},useMutableSource:ef,useSyncExternalStore:tf,useId:vf,unstable_isNewReconciler:!1};function Cr(r,n){if(r&&r.defaultProps){n=w({},n),r=r.defaultProps;for(var l in r)n[l]===void 0&&(n[l]=r[l]);return n}return n}function nu(r,n,l,c){n=r.memoizedState,l=l(c,n),l=l==null?n:w({},n,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Yo={isMounted:function(r){return(r=r._reactInternals)?Bi(r)===r:!1},enqueueSetState:function(r,n,l){r=r._reactInternals;var c=Ot(),f=wi(r),_=Gr(c,f);_.payload=n,l!=null&&(_.callback=l),n=gi(r,_,f),n!==null&&(Er(n,r,f,c),Ho(n,r,f))},enqueueReplaceState:function(r,n,l){r=r._reactInternals;var c=Ot(),f=wi(r),_=Gr(c,f);_.tag=1,_.payload=n,l!=null&&(_.callback=l),n=gi(r,_,f),n!==null&&(Er(n,r,f,c),Ho(n,r,f))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var l=Ot(),c=wi(r),f=Gr(l,c);f.tag=2,n!=null&&(f.callback=n),n=gi(r,f,c),n!==null&&(Er(n,r,c,l),Ho(n,r,c))}};function xf(r,n,l,c,f,_,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,y):n.prototype&&n.prototype.isPureReactComponent?!os(l,c)||!os(f,_):!0}function Cf(r,n,l){var c=!1,f=pi,_=n.contextType;return typeof _=="object"&&_!==null?_=hr(_):(f=Ut(n)?Ai:Lt.current,c=n.contextTypes,_=(c=c!=null)?mn(r,f):pi),n=new n(l,_),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Yo,r.stateNode=n,n._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=_),n}function kf(r,n,l,c){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,c),n.state!==r&&Yo.enqueueReplaceState(n,n.state,null)}function su(r,n,l,c){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},Va(r);var _=n.contextType;typeof _=="object"&&_!==null?f.context=hr(_):(_=Ut(n)?Ai:Lt.current,f.context=mn(r,_)),f.state=r.memoizedState,_=n.getDerivedStateFromProps,typeof _=="function"&&(nu(r,n,_,l),f.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&Yo.enqueueReplaceState(f,f.state,null),jo(r,l,f,c),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function kn(r,n){try{var l="",c=n;do l+=ve(c),c=c.return;while(c);var f=l}catch(_){f=`
Error generating stack: `+_.message+`
`+_.stack}return{value:r,source:n,stack:f,digest:null}}function ou(r,n,l){return{value:r,source:null,stack:l??null,digest:n??null}}function lu(r,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var ly=typeof WeakMap=="function"?WeakMap:Map;function bf(r,n,l){l=Gr(-1,l),l.tag=3,l.payload={element:null};var c=n.value;return l.callback=function(){tl||(tl=!0,xu=c),lu(r,n)},l}function Ef(r,n,l){l=Gr(-1,l),l.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=n.value;l.payload=function(){return c(f)},l.callback=function(){lu(r,n)}}var _=r.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(l.callback=function(){lu(r,n),typeof c!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})}),l}function Pf(r,n,l){var c=r.pingCache;if(c===null){c=r.pingCache=new ly;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(l)||(f.add(l),r=wy.bind(null,r,n,l),n.then(r,r))}function Rf(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function Lf(r,n,l,c,f){return(r.mode&1)===0?(r===n?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Gr(-1,1),n.tag=2,gi(l,n,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var ay=U.ReactCurrentOwner,$t=!1;function At(r,n,l,c){n.child=r===null?Yd(n,null,l,c):Sn(n,r.child,l,c)}function Df(r,n,l,c,f){l=l.render;var _=n.ref;return xn(n,f),c=Ja(r,n,l,c,_,f),l=Za(),r!==null&&!$t?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~f,Qr(r,n,f)):(qe&&l&&Ia(n),n.flags|=1,At(r,n,c,f),n.child)}function Tf(r,n,l,c,f){if(r===null){var _=l.type;return typeof _=="function"&&!Lu(_)&&_.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=_,Mf(r,n,_,c,f)):(r=ll(l.type,null,c,n,n.mode,f),r.ref=n.ref,r.return=n,n.child=r)}if(_=r.child,(r.lanes&f)===0){var y=_.memoizedProps;if(l=l.compare,l=l!==null?l:os,l(y,c)&&r.ref===n.ref)return Qr(r,n,f)}return n.flags|=1,r=Ci(_,c),r.ref=n.ref,r.return=n,n.child=r}function Mf(r,n,l,c,f){if(r!==null){var _=r.memoizedProps;if(os(_,c)&&r.ref===n.ref)if($t=!1,n.pendingProps=c=_,(r.lanes&f)!==0)(r.flags&131072)!==0&&($t=!0);else return n.lanes=r.lanes,Qr(r,n,f)}return au(r,n,l,c,f)}function Nf(r,n,l){var c=n.pendingProps,f=c.children,_=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(En,ir),ir|=l;else{if((l&1073741824)===0)return r=_!==null?_.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,je(En,ir),ir|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=_!==null?_.baseLanes:l,je(En,ir),ir|=c}else _!==null?(c=_.baseLanes|l,n.memoizedState=null):c=l,je(En,ir),ir|=c;return At(r,n,f,l),n.child}function Bf(r,n){var l=n.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function au(r,n,l,c,f){var _=Ut(l)?Ai:Lt.current;return _=mn(n,_),xn(n,f),l=Ja(r,n,l,c,_,f),c=Za(),r!==null&&!$t?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~f,Qr(r,n,f)):(qe&&c&&Ia(n),n.flags|=1,At(r,n,l,f),n.child)}function If(r,n,l,c,f){if(Ut(l)){var _=!0;Mo(n)}else _=!1;if(xn(n,f),n.stateNode===null)Go(r,n),Cf(n,l,c),su(n,l,c,f),c=!0;else if(r===null){var y=n.stateNode,C=n.memoizedProps;y.props=C;var P=y.context,H=l.contextType;typeof H=="object"&&H!==null?H=hr(H):(H=Ut(l)?Ai:Lt.current,H=mn(n,H));var Y=l.getDerivedStateFromProps,G=typeof Y=="function"||typeof y.getSnapshotBeforeUpdate=="function";G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==c||P!==H)&&kf(n,y,c,H),mi=!1;var q=n.memoizedState;y.state=q,jo(n,c,y,f),P=n.memoizedState,C!==c||q!==P||Wt.current||mi?(typeof Y=="function"&&(nu(n,l,Y,c),P=n.memoizedState),(C=mi||xf(n,l,C,c,q,P,H))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=P),y.props=c,y.state=P,y.context=H,c=C):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,Gd(r,n),C=n.memoizedProps,H=n.type===n.elementType?C:Cr(n.type,C),y.props=H,G=n.pendingProps,q=y.context,P=l.contextType,typeof P=="object"&&P!==null?P=hr(P):(P=Ut(l)?Ai:Lt.current,P=mn(n,P));var ce=l.getDerivedStateFromProps;(Y=typeof ce=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==G||q!==P)&&kf(n,y,c,P),mi=!1,q=n.memoizedState,y.state=q,jo(n,c,y,f);var fe=n.memoizedState;C!==G||q!==fe||Wt.current||mi?(typeof ce=="function"&&(nu(n,l,ce,c),fe=n.memoizedState),(H=mi||xf(n,l,H,c,q,fe,P)||!1)?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,fe,P),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,fe,P)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===r.memoizedProps&&q===r.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&q===r.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=fe),y.props=c,y.state=fe,y.context=P,c=H):(typeof y.componentDidUpdate!="function"||C===r.memoizedProps&&q===r.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&q===r.memoizedState||(n.flags|=1024),c=!1)}return uu(r,n,l,c,_,f)}function uu(r,n,l,c,f,_){Bf(r,n);var y=(n.flags&128)!==0;if(!c&&!y)return f&&Fd(n,l,!1),Qr(r,n,_);c=n.stateNode,ay.current=n;var C=y&&typeof l.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,r!==null&&y?(n.child=Sn(n,r.child,null,_),n.child=Sn(n,null,C,_)):At(r,n,C,_),n.memoizedState=c.state,f&&Fd(n,l,!0),n.child}function Af(r){var n=r.stateNode;n.pendingContext?Od(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Od(r,n.context,!1),Ka(r,n.containerInfo)}function Of(r,n,l,c,f){return yn(),Fa(f),n.flags|=256,At(r,n,l,c),n.child}var cu={dehydrated:null,treeContext:null,retryLane:0};function hu(r){return{baseLanes:r,cachePool:null,transitions:null}}function zf(r,n,l){var c=n.pendingProps,f=Xe.current,_=!1,y=(n.flags&128)!==0,C;if((C=y)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(_=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),je(Xe,f&1),r===null)return za(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((n.mode&1)===0?n.lanes=1:r.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(y=c.children,r=c.fallback,_?(c=n.mode,_=n.child,y={mode:"hidden",children:y},(c&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=y):_=al(y,c,0,null),r=Ki(r,c,l,null),_.return=n,r.return=n,_.sibling=r,n.child=_,n.child.memoizedState=hu(l),n.memoizedState=cu,r):du(n,y));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return uy(r,n,y,c,C,f,l);if(_){_=c.fallback,y=n.mode,f=r.child,C=f.sibling;var P={mode:"hidden",children:c.children};return(y&1)===0&&n.child!==f?(c=n.child,c.childLanes=0,c.pendingProps=P,n.deletions=null):(c=Ci(f,P),c.subtreeFlags=f.subtreeFlags&14680064),C!==null?_=Ci(C,_):(_=Ki(_,y,l,null),_.flags|=2),_.return=n,c.return=n,c.sibling=_,n.child=c,c=_,_=n.child,y=r.child.memoizedState,y=y===null?hu(l):{baseLanes:y.baseLanes|l,cachePool:null,transitions:y.transitions},_.memoizedState=y,_.childLanes=r.childLanes&~l,n.memoizedState=cu,c}return _=r.child,r=_.sibling,c=Ci(_,{mode:"visible",children:c.children}),(n.mode&1)===0&&(c.lanes=l),c.return=n,c.sibling=null,r!==null&&(l=n.deletions,l===null?(n.deletions=[r],n.flags|=16):l.push(r)),n.child=c,n.memoizedState=null,c}function du(r,n){return n=al({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Xo(r,n,l,c){return c!==null&&Fa(c),Sn(n,r.child,null,l),r=du(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function uy(r,n,l,c,f,_,y){if(l)return n.flags&256?(n.flags&=-257,c=ou(Error(i(422))),Xo(r,n,y,c)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(_=c.fallback,f=n.mode,c=al({mode:"visible",children:c.children},f,0,null),_=Ki(_,f,y,null),_.flags|=2,c.return=n,_.return=n,c.sibling=_,n.child=c,(n.mode&1)!==0&&Sn(n,r.child,null,y),n.child.memoizedState=hu(y),n.memoizedState=cu,_);if((n.mode&1)===0)return Xo(r,n,y,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var C=c.dgst;return c=C,_=Error(i(419)),c=ou(_,c,void 0),Xo(r,n,y,c)}if(C=(y&r.childLanes)!==0,$t||C){if(c=_t,c!==null){switch(y&-y){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|y))!==0?0:f,f!==0&&f!==_.retryLane&&(_.retryLane=f,Xr(r,f),Er(c,r,f,-1))}return Ru(),c=ou(Error(i(421))),Xo(r,n,y,c)}return f.data==="$?"?(n.flags|=128,n.child=r.child,n=xy.bind(null,r),f._reactRetry=n,null):(r=_.treeContext,rr=di(f.nextSibling),tr=n,qe=!0,xr=null,r!==null&&(ur[cr++]=qr,ur[cr++]=Yr,ur[cr++]=Oi,qr=r.id,Yr=r.overflow,Oi=n),n=du(n,c.children),n.flags|=4096,n)}function Ff(r,n,l){r.lanes|=n;var c=r.alternate;c!==null&&(c.lanes|=n),Ua(r.return,n,l)}function fu(r,n,l,c,f){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=f)}function Hf(r,n,l){var c=n.pendingProps,f=c.revealOrder,_=c.tail;if(At(r,n,c.children,l),c=Xe.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ff(r,l,n);else if(r.tag===19)Ff(r,l,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(je(Xe,c),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(l=n.child,f=null;l!==null;)r=l.alternate,r!==null&&Wo(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=n.child,n.child=null):(f=l.sibling,l.sibling=null),fu(n,!1,f,l,_);break;case"backwards":for(l=null,f=n.child,n.child=null;f!==null;){if(r=f.alternate,r!==null&&Wo(r)===null){n.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}fu(n,!0,l,null,_);break;case"together":fu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Go(r,n){(n.mode&1)===0&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Qr(r,n,l){if(r!==null&&(n.dependencies=r.dependencies),Wi|=n.lanes,(l&n.childLanes)===0)return null;if(r!==null&&n.child!==r.child)throw Error(i(153));if(n.child!==null){for(r=n.child,l=Ci(r,r.pendingProps),n.child=l,l.return=n;r.sibling!==null;)r=r.sibling,l=l.sibling=Ci(r,r.pendingProps),l.return=n;l.sibling=null}return n.child}function cy(r,n,l){switch(n.tag){case 3:Af(n),yn();break;case 5:Zd(n);break;case 1:Ut(n.type)&&Mo(n);break;case 4:Ka(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,f=n.memoizedProps.value;je(zo,c._currentValue),c._currentValue=f;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(je(Xe,Xe.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?zf(r,n,l):(je(Xe,Xe.current&1),r=Qr(r,n,l),r!==null?r.sibling:null);je(Xe,Xe.current&1);break;case 19:if(c=(l&n.childLanes)!==0,(r.flags&128)!==0){if(c)return Hf(r,n,l);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),je(Xe,Xe.current),c)break;return null;case 22:case 23:return n.lanes=0,Nf(r,n,l)}return Qr(r,n,l)}var jf,pu,Wf,Uf;jf=function(r,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},pu=function(){},Wf=function(r,n,l,c){var f=r.memoizedProps;if(f!==c){r=n.stateNode,Hi(Tr.current);var _=null;switch(l){case"input":f=Ur(r,f),c=Ur(r,c),_=[];break;case"select":f=w({},f,{value:void 0}),c=w({},c,{value:void 0}),_=[];break;case"textarea":f=$n(r,f),c=$n(r,c),_=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=Lo)}kt(l,c);var y;l=null;for(H in f)if(!c.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var C=f[H];for(y in C)C.hasOwnProperty(y)&&(l||(l={}),l[y]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?_||(_=[]):(_=_||[]).push(H,null));for(H in c){var P=c[H];if(C=f!=null?f[H]:void 0,c.hasOwnProperty(H)&&P!==C&&(P!=null||C!=null))if(H==="style")if(C){for(y in C)!C.hasOwnProperty(y)||P&&P.hasOwnProperty(y)||(l||(l={}),l[y]="");for(y in P)P.hasOwnProperty(y)&&C[y]!==P[y]&&(l||(l={}),l[y]=P[y])}else l||(_||(_=[]),_.push(H,l)),l=P;else H==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,C=C?C.__html:void 0,P!=null&&C!==P&&(_=_||[]).push(H,P)):H==="children"?typeof P!="string"&&typeof P!="number"||(_=_||[]).push(H,""+P):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(P!=null&&H==="onScroll"&&$e("scroll",r),_||C===P||(_=[])):(_=_||[]).push(H,P))}l&&(_=_||[]).push("style",l);var H=_;(n.updateQueue=H)&&(n.flags|=4)}},Uf=function(r,n,l,c){l!==c&&(n.flags|=4)};function ws(r,n){if(!qe)switch(r.tailMode){case"hidden":n=r.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Tt(r){var n=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(n)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=c,r.childLanes=l,n}function hy(r,n,l){var c=n.pendingProps;switch(Aa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(n),null;case 1:return Ut(n.type)&&To(),Tt(n),null;case 3:return c=n.stateNode,Cn(),Ve(Wt),Ve(Lt),Xa(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Ao(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,xr!==null&&(bu(xr),xr=null))),pu(r,n),Tt(n),null;case 5:qa(n);var f=Hi(ms.current);if(l=n.type,r!==null&&n.stateNode!=null)Wf(r,n,l,c,f),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(i(166));return Tt(n),null}if(r=Hi(Tr.current),Ao(n)){c=n.stateNode,l=n.type;var _=n.memoizedProps;switch(c[Dr]=n,c[hs]=_,r=(n.mode&1)!==0,l){case"dialog":$e("cancel",c),$e("close",c);break;case"iframe":case"object":case"embed":$e("load",c);break;case"video":case"audio":for(f=0;f<as.length;f++)$e(as[f],c);break;case"source":$e("error",c);break;case"img":case"image":case"link":$e("error",c),$e("load",c);break;case"details":$e("toggle",c);break;case"input":Wn(c,_),$e("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!_.multiple},$e("invalid",c);break;case"textarea":no(c,_),$e("invalid",c)}kt(l,_),f=null;for(var y in _)if(_.hasOwnProperty(y)){var C=_[y];y==="children"?typeof C=="string"?c.textContent!==C&&(_.suppressHydrationWarning!==!0&&Ro(c.textContent,C,r),f=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(_.suppressHydrationWarning!==!0&&Ro(c.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(y)&&C!=null&&y==="onScroll"&&$e("scroll",c)}switch(l){case"input":It(c),io(c,_,!0);break;case"textarea":It(c),oo(c);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(c.onclick=Lo)}c=f,n.updateQueue=c,c!==null&&(n.flags|=4)}else{y=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=$(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=y.createElement(l,{is:c.is}):(r=y.createElement(l),l==="select"&&(y=r,c.multiple?y.multiple=!0:c.size&&(y.size=c.size))):r=y.createElementNS(r,l),r[Dr]=n,r[hs]=c,jf(r,n,!1,!1),n.stateNode=r;e:{switch(y=Rr(l,c),l){case"dialog":$e("cancel",r),$e("close",r),f=c;break;case"iframe":case"object":case"embed":$e("load",r),f=c;break;case"video":case"audio":for(f=0;f<as.length;f++)$e(as[f],r);f=c;break;case"source":$e("error",r),f=c;break;case"img":case"image":case"link":$e("error",r),$e("load",r),f=c;break;case"details":$e("toggle",r),f=c;break;case"input":Wn(r,c),f=Ur(r,c),$e("invalid",r);break;case"option":f=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},f=w({},c,{value:void 0}),$e("invalid",r);break;case"textarea":no(r,c),f=$n(r,c),$e("invalid",r);break;default:f=c}kt(l,f),C=f;for(_ in C)if(C.hasOwnProperty(_)){var P=C[_];_==="style"?si(r,P):_==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Te(r,P)):_==="children"?typeof P=="string"?(l!=="textarea"||P!=="")&&Be(r,P):typeof P=="number"&&Be(r,""+P):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?P!=null&&_==="onScroll"&&$e("scroll",r):P!=null&&I(r,_,P,y))}switch(l){case"input":It(r),io(r,c,!1);break;case"textarea":It(r),oo(r);break;case"option":c.value!=null&&r.setAttribute("value",""+Ce(c.value));break;case"select":r.multiple=!!c.multiple,_=c.value,_!=null?ni(r,!!c.multiple,_,!1):c.defaultValue!=null&&ni(r,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Lo)}switch(l){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Tt(n),null;case 6:if(r&&n.stateNode!=null)Uf(r,n,r.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(i(166));if(l=Hi(ms.current),Hi(Tr.current),Ao(n)){if(c=n.stateNode,l=n.memoizedProps,c[Dr]=n,(_=c.nodeValue!==l)&&(r=tr,r!==null))switch(r.tag){case 3:Ro(c.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ro(c.nodeValue,l,(r.mode&1)!==0)}_&&(n.flags|=4)}else c=(l.nodeType===9?l:l.ownerDocument).createTextNode(c),c[Dr]=n,n.stateNode=c}return Tt(n),null;case 13:if(Ve(Xe),c=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(qe&&rr!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Vd(),yn(),n.flags|=98560,_=!1;else if(_=Ao(n),c!==null&&c.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(_=n.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Dr]=n}else yn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),_=!1}else xr!==null&&(bu(xr),xr=null),_=!0;if(!_)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(n.child.flags|=8192,(n.mode&1)!==0&&(r===null||(Xe.current&1)!==0?ct===0&&(ct=3):Ru())),n.updateQueue!==null&&(n.flags|=4),Tt(n),null);case 4:return Cn(),pu(r,n),r===null&&us(n.stateNode.containerInfo),Tt(n),null;case 10:return Wa(n.type._context),Tt(n),null;case 17:return Ut(n.type)&&To(),Tt(n),null;case 19:if(Ve(Xe),_=n.memoizedState,_===null)return Tt(n),null;if(c=(n.flags&128)!==0,y=_.rendering,y===null)if(c)ws(_,!1);else{if(ct!==0||r!==null&&(r.flags&128)!==0)for(r=n.child;r!==null;){if(y=Wo(r),y!==null){for(n.flags|=128,ws(_,!1),c=y.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=l,l=n.child;l!==null;)_=l,r=c,_.flags&=14680066,y=_.alternate,y===null?(_.childLanes=0,_.lanes=r,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=y.childLanes,_.lanes=y.lanes,_.child=y.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=y.memoizedProps,_.memoizedState=y.memoizedState,_.updateQueue=y.updateQueue,_.type=y.type,r=y.dependencies,_.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return je(Xe,Xe.current&1|2),n.child}r=r.sibling}_.tail!==null&&rt()>Pn&&(n.flags|=128,c=!0,ws(_,!1),n.lanes=4194304)}else{if(!c)if(r=Wo(y),r!==null){if(n.flags|=128,c=!0,l=r.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),ws(_,!0),_.tail===null&&_.tailMode==="hidden"&&!y.alternate&&!qe)return Tt(n),null}else 2*rt()-_.renderingStartTime>Pn&&l!==1073741824&&(n.flags|=128,c=!0,ws(_,!1),n.lanes=4194304);_.isBackwards?(y.sibling=n.child,n.child=y):(l=_.last,l!==null?l.sibling=y:n.child=y,_.last=y)}return _.tail!==null?(n=_.tail,_.rendering=n,_.tail=n.sibling,_.renderingStartTime=rt(),n.sibling=null,l=Xe.current,je(Xe,c?l&1|2:l&1),n):(Tt(n),null);case 22:case 23:return Pu(),c=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(n.flags|=8192),c&&(n.mode&1)!==0?(ir&1073741824)!==0&&(Tt(n),n.subtreeFlags&6&&(n.flags|=8192)):Tt(n),null;case 24:return null;case 25:return null}throw Error(i(156,n.tag))}function dy(r,n){switch(Aa(n),n.tag){case 1:return Ut(n.type)&&To(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return Cn(),Ve(Wt),Ve(Lt),Xa(),r=n.flags,(r&65536)!==0&&(r&128)===0?(n.flags=r&-65537|128,n):null;case 5:return qa(n),null;case 13:if(Ve(Xe),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(i(340));yn()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Ve(Xe),null;case 4:return Cn(),null;case 10:return Wa(n.type._context),null;case 22:case 23:return Pu(),null;case 24:return null;default:return null}}var Qo=!1,Mt=!1,fy=typeof WeakSet=="function"?WeakSet:Set,de=null;function bn(r,n){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(c){Ze(r,n,c)}else l.current=null}function _u(r,n,l){try{l()}catch(c){Ze(r,n,c)}}var $f=!1;function py(r,n){if(Pa=go,r=wd(),ya(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var y=0,C=-1,P=-1,H=0,Y=0,G=r,q=null;t:for(;;){for(var ce;G!==l||f!==0&&G.nodeType!==3||(C=y+f),G!==_||c!==0&&G.nodeType!==3||(P=y+c),G.nodeType===3&&(y+=G.nodeValue.length),(ce=G.firstChild)!==null;)q=G,G=ce;for(;;){if(G===r)break t;if(q===l&&++H===f&&(C=y),q===_&&++Y===c&&(P=y),(ce=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=ce}l=C===-1||P===-1?null:{start:C,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ra={focusedElem:r,selectionRange:l},go=!1,de=n;de!==null;)if(n=de,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,de=r;else for(;de!==null;){n=de;try{var fe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var _e=fe.memoizedProps,it=fe.memoizedState,N=n.stateNode,D=N.getSnapshotBeforeUpdate(n.elementType===n.type?_e:Cr(n.type,_e),it);N.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var F=n.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(te){Ze(n,n.return,te)}if(r=n.sibling,r!==null){r.return=n.return,de=r;break}de=n.return}return fe=$f,$f=!1,fe}function xs(r,n,l){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&r)===r){var _=f.destroy;f.destroy=void 0,_!==void 0&&_u(n,l,_)}f=f.next}while(f!==c)}}function Jo(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&r)===r){var c=l.create;l.destroy=c()}l=l.next}while(l!==n)}}function mu(r){var n=r.ref;if(n!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof n=="function"?n(r):n.current=r}}function Vf(r){var n=r.alternate;n!==null&&(r.alternate=null,Vf(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[Dr],delete n[hs],delete n[Ma],delete n[Gv],delete n[Qv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Kf(r){return r.tag===5||r.tag===3||r.tag===4}function qf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Kf(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function gu(r,n,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(r,n):l.insertBefore(r,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(r,l)):(n=l,n.appendChild(r)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Lo));else if(c!==4&&(r=r.child,r!==null))for(gu(r,n,l),r=r.sibling;r!==null;)gu(r,n,l),r=r.sibling}function vu(r,n,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,n?l.insertBefore(r,n):l.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(vu(r,n,l),r=r.sibling;r!==null;)vu(r,n,l),r=r.sibling}var bt=null,kr=!1;function vi(r,n,l){for(l=l.child;l!==null;)Yf(r,n,l),l=l.sibling}function Yf(r,n,l){if(Lr&&typeof Lr.onCommitFiberUnmount=="function")try{Lr.onCommitFiberUnmount(co,l)}catch{}switch(l.tag){case 5:Mt||bn(l,n);case 6:var c=bt,f=kr;bt=null,vi(r,n,l),bt=c,kr=f,bt!==null&&(kr?(r=bt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):bt.removeChild(l.stateNode));break;case 18:bt!==null&&(kr?(r=bt,l=l.stateNode,r.nodeType===8?Ta(r.parentNode,l):r.nodeType===1&&Ta(r,l),es(r)):Ta(bt,l.stateNode));break;case 4:c=bt,f=kr,bt=l.stateNode.containerInfo,kr=!0,vi(r,n,l),bt=c,kr=f;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=l.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var _=f,y=_.destroy;_=_.tag,y!==void 0&&((_&2)!==0||(_&4)!==0)&&_u(l,n,y),f=f.next}while(f!==c)}vi(r,n,l);break;case 1:if(!Mt&&(bn(l,n),c=l.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=l.memoizedProps,c.state=l.memoizedState,c.componentWillUnmount()}catch(C){Ze(l,n,C)}vi(r,n,l);break;case 21:vi(r,n,l);break;case 22:l.mode&1?(Mt=(c=Mt)||l.memoizedState!==null,vi(r,n,l),Mt=c):vi(r,n,l);break;default:vi(r,n,l)}}function Xf(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new fy),n.forEach(function(c){var f=Cy.bind(null,r,c);l.has(c)||(l.add(c),c.then(f,f))})}}function br(r,n){var l=n.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c];try{var _=r,y=n,C=y;e:for(;C!==null;){switch(C.tag){case 5:bt=C.stateNode,kr=!1;break e;case 3:bt=C.stateNode.containerInfo,kr=!0;break e;case 4:bt=C.stateNode.containerInfo,kr=!0;break e}C=C.return}if(bt===null)throw Error(i(160));Yf(_,y,f),bt=null,kr=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(H){Ze(f,n,H)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Gf(n,r),n=n.sibling}function Gf(r,n){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(br(n,r),Nr(r),c&4){try{xs(3,r,r.return),Jo(3,r)}catch(_e){Ze(r,r.return,_e)}try{xs(5,r,r.return)}catch(_e){Ze(r,r.return,_e)}}break;case 1:br(n,r),Nr(r),c&512&&l!==null&&bn(l,l.return);break;case 5:if(br(n,r),Nr(r),c&512&&l!==null&&bn(l,l.return),r.flags&32){var f=r.stateNode;try{Be(f,"")}catch(_e){Ze(r,r.return,_e)}}if(c&4&&(f=r.stateNode,f!=null)){var _=r.memoizedProps,y=l!==null?l.memoizedProps:_,C=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{C==="input"&&_.type==="radio"&&_.name!=null&&Un(f,_),Rr(C,y);var H=Rr(C,_);for(y=0;y<P.length;y+=2){var Y=P[y],G=P[y+1];Y==="style"?si(f,G):Y==="dangerouslySetInnerHTML"?Te(f,G):Y==="children"?Be(f,G):I(f,Y,G,H)}switch(C){case"input":rn(f,_);break;case"textarea":so(f,_);break;case"select":var q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!_.multiple;var ce=_.value;ce!=null?ni(f,!!_.multiple,ce,!1):q!==!!_.multiple&&(_.defaultValue!=null?ni(f,!!_.multiple,_.defaultValue,!0):ni(f,!!_.multiple,_.multiple?[]:"",!1))}f[hs]=_}catch(_e){Ze(r,r.return,_e)}}break;case 6:if(br(n,r),Nr(r),c&4){if(r.stateNode===null)throw Error(i(162));f=r.stateNode,_=r.memoizedProps;try{f.nodeValue=_}catch(_e){Ze(r,r.return,_e)}}break;case 3:if(br(n,r),Nr(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{es(n.containerInfo)}catch(_e){Ze(r,r.return,_e)}break;case 4:br(n,r),Nr(r);break;case 13:br(n,r),Nr(r),f=r.child,f.flags&8192&&(_=f.memoizedState!==null,f.stateNode.isHidden=_,!_||f.alternate!==null&&f.alternate.memoizedState!==null||(wu=rt())),c&4&&Xf(r);break;case 22:if(Y=l!==null&&l.memoizedState!==null,r.mode&1?(Mt=(H=Mt)||Y,br(n,r),Mt=H):br(n,r),Nr(r),c&8192){if(H=r.memoizedState!==null,(r.stateNode.isHidden=H)&&!Y&&(r.mode&1)!==0)for(de=r,Y=r.child;Y!==null;){for(G=de=Y;de!==null;){switch(q=de,ce=q.child,q.tag){case 0:case 11:case 14:case 15:xs(4,q,q.return);break;case 1:bn(q,q.return);var fe=q.stateNode;if(typeof fe.componentWillUnmount=="function"){c=q,l=q.return;try{n=c,fe.props=n.memoizedProps,fe.state=n.memoizedState,fe.componentWillUnmount()}catch(_e){Ze(c,l,_e)}}break;case 5:bn(q,q.return);break;case 22:if(q.memoizedState!==null){Zf(G);continue}}ce!==null?(ce.return=q,de=ce):Zf(G)}Y=Y.sibling}e:for(Y=null,G=r;;){if(G.tag===5){if(Y===null){Y=G;try{f=G.stateNode,H?(_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(C=G.stateNode,P=G.memoizedProps.style,y=P!=null&&P.hasOwnProperty("display")?P.display:null,C.style.display=ar("display",y))}catch(_e){Ze(r,r.return,_e)}}}else if(G.tag===6){if(Y===null)try{G.stateNode.nodeValue=H?"":G.memoizedProps}catch(_e){Ze(r,r.return,_e)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===r)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===r)break e;for(;G.sibling===null;){if(G.return===null||G.return===r)break e;Y===G&&(Y=null),G=G.return}Y===G&&(Y=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:br(n,r),Nr(r),c&4&&Xf(r);break;case 21:break;default:br(n,r),Nr(r)}}function Nr(r){var n=r.flags;if(n&2){try{e:{for(var l=r.return;l!==null;){if(Kf(l)){var c=l;break e}l=l.return}throw Error(i(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Be(f,""),c.flags&=-33);var _=qf(r);vu(r,_,f);break;case 3:case 4:var y=c.stateNode.containerInfo,C=qf(r);gu(r,C,y);break;default:throw Error(i(161))}}catch(P){Ze(r,r.return,P)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function _y(r,n,l){de=r,Qf(r)}function Qf(r,n,l){for(var c=(r.mode&1)!==0;de!==null;){var f=de,_=f.child;if(f.tag===22&&c){var y=f.memoizedState!==null||Qo;if(!y){var C=f.alternate,P=C!==null&&C.memoizedState!==null||Mt;C=Qo;var H=Mt;if(Qo=y,(Mt=P)&&!H)for(de=f;de!==null;)y=de,P=y.child,y.tag===22&&y.memoizedState!==null?ep(f):P!==null?(P.return=y,de=P):ep(f);for(;_!==null;)de=_,Qf(_),_=_.sibling;de=f,Qo=C,Mt=H}Jf(r)}else(f.subtreeFlags&8772)!==0&&_!==null?(_.return=f,de=_):Jf(r)}}function Jf(r){for(;de!==null;){var n=de;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Mt||Jo(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!Mt)if(l===null)c.componentDidMount();else{var f=n.elementType===n.type?l.memoizedProps:Cr(n.type,l.memoizedProps);c.componentDidUpdate(f,l.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var _=n.updateQueue;_!==null&&Jd(n,_,c);break;case 3:var y=n.updateQueue;if(y!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}Jd(n,y,l)}break;case 5:var C=n.stateNode;if(l===null&&n.flags&4){l=C;var P=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&l.focus();break;case"img":P.src&&(l.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var H=n.alternate;if(H!==null){var Y=H.memoizedState;if(Y!==null){var G=Y.dehydrated;G!==null&&es(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Mt||n.flags&512&&mu(n)}catch(q){Ze(n,n.return,q)}}if(n===r){de=null;break}if(l=n.sibling,l!==null){l.return=n.return,de=l;break}de=n.return}}function Zf(r){for(;de!==null;){var n=de;if(n===r){de=null;break}var l=n.sibling;if(l!==null){l.return=n.return,de=l;break}de=n.return}}function ep(r){for(;de!==null;){var n=de;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Jo(4,n)}catch(P){Ze(n,l,P)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var f=n.return;try{c.componentDidMount()}catch(P){Ze(n,f,P)}}var _=n.return;try{mu(n)}catch(P){Ze(n,_,P)}break;case 5:var y=n.return;try{mu(n)}catch(P){Ze(n,y,P)}}}catch(P){Ze(n,n.return,P)}if(n===r){de=null;break}var C=n.sibling;if(C!==null){C.return=n.return,de=C;break}de=n.return}}var my=Math.ceil,Zo=U.ReactCurrentDispatcher,yu=U.ReactCurrentOwner,fr=U.ReactCurrentBatchConfig,Ie=0,_t=null,st=null,Et=0,ir=0,En=fi(0),ct=0,Cs=null,Wi=0,el=0,Su=0,ks=null,Vt=null,wu=0,Pn=1/0,Jr=null,tl=!1,xu=null,yi=null,rl=!1,Si=null,il=0,bs=0,Cu=null,nl=-1,sl=0;function Ot(){return(Ie&6)!==0?rt():nl!==-1?nl:nl=rt()}function wi(r){return(r.mode&1)===0?1:(Ie&2)!==0&&Et!==0?Et&-Et:Zv.transition!==null?(sl===0&&(sl=Kh()),sl):(r=ze,r!==0||(r=window.event,r=r===void 0?16:td(r.type)),r)}function Er(r,n,l,c){if(50<bs)throw bs=0,Cu=null,Error(i(185));Xn(r,l,c),((Ie&2)===0||r!==_t)&&(r===_t&&((Ie&2)===0&&(el|=l),ct===4&&xi(r,Et)),Kt(r,c),l===1&&Ie===0&&(n.mode&1)===0&&(Pn=rt()+500,No&&_i()))}function Kt(r,n){var l=r.callbackNode;Zg(r,n);var c=po(r,r===_t?Et:0);if(c===0)l!==null&&Uh(l),r.callbackNode=null,r.callbackPriority=0;else if(n=c&-c,r.callbackPriority!==n){if(l!=null&&Uh(l),n===1)r.tag===0?Jv(rp.bind(null,r)):Hd(rp.bind(null,r)),Yv(function(){(Ie&6)===0&&_i()}),l=null;else{switch(qh(c)){case 1:l=ra;break;case 4:l=$h;break;case 16:l=uo;break;case 536870912:l=Vh;break;default:l=uo}l=cp(l,tp.bind(null,r))}r.callbackPriority=n,r.callbackNode=l}}function tp(r,n){if(nl=-1,sl=0,(Ie&6)!==0)throw Error(i(327));var l=r.callbackNode;if(Rn()&&r.callbackNode!==l)return null;var c=po(r,r===_t?Et:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||n)n=ol(r,c);else{n=c;var f=Ie;Ie|=2;var _=np();(_t!==r||Et!==n)&&(Jr=null,Pn=rt()+500,$i(r,n));do try{yy();break}catch(C){ip(r,C)}while(!0);ja(),Zo.current=_,Ie=f,st!==null?n=0:(_t=null,Et=0,n=ct)}if(n!==0){if(n===2&&(f=ia(r),f!==0&&(c=f,n=ku(r,f))),n===1)throw l=Cs,$i(r,0),xi(r,c),Kt(r,rt()),l;if(n===6)xi(r,c);else{if(f=r.current.alternate,(c&30)===0&&!gy(f)&&(n=ol(r,c),n===2&&(_=ia(r),_!==0&&(c=_,n=ku(r,_))),n===1))throw l=Cs,$i(r,0),xi(r,c),Kt(r,rt()),l;switch(r.finishedWork=f,r.finishedLanes=c,n){case 0:case 1:throw Error(i(345));case 2:Vi(r,Vt,Jr);break;case 3:if(xi(r,c),(c&130023424)===c&&(n=wu+500-rt(),10<n)){if(po(r,0)!==0)break;if(f=r.suspendedLanes,(f&c)!==c){Ot(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Da(Vi.bind(null,r,Vt,Jr),n);break}Vi(r,Vt,Jr);break;case 4:if(xi(r,c),(c&4194240)===c)break;for(n=r.eventTimes,f=-1;0<c;){var y=31-Sr(c);_=1<<y,y=n[y],y>f&&(f=y),c&=~_}if(c=f,c=rt()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*my(c/1960))-c,10<c){r.timeoutHandle=Da(Vi.bind(null,r,Vt,Jr),c);break}Vi(r,Vt,Jr);break;case 5:Vi(r,Vt,Jr);break;default:throw Error(i(329))}}}return Kt(r,rt()),r.callbackNode===l?tp.bind(null,r):null}function ku(r,n){var l=ks;return r.current.memoizedState.isDehydrated&&($i(r,n).flags|=256),r=ol(r,n),r!==2&&(n=Vt,Vt=l,n!==null&&bu(n)),r}function bu(r){Vt===null?Vt=r:Vt.push.apply(Vt,r)}function gy(r){for(var n=r;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var c=0;c<l.length;c++){var f=l[c],_=f.getSnapshot;f=f.value;try{if(!wr(_(),f))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xi(r,n){for(n&=~Su,n&=~el,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var l=31-Sr(n),c=1<<l;r[l]=-1,n&=~c}}function rp(r){if((Ie&6)!==0)throw Error(i(327));Rn();var n=po(r,0);if((n&1)===0)return Kt(r,rt()),null;var l=ol(r,n);if(r.tag!==0&&l===2){var c=ia(r);c!==0&&(n=c,l=ku(r,c))}if(l===1)throw l=Cs,$i(r,0),xi(r,n),Kt(r,rt()),l;if(l===6)throw Error(i(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,Vi(r,Vt,Jr),Kt(r,rt()),null}function Eu(r,n){var l=Ie;Ie|=1;try{return r(n)}finally{Ie=l,Ie===0&&(Pn=rt()+500,No&&_i())}}function Ui(r){Si!==null&&Si.tag===0&&(Ie&6)===0&&Rn();var n=Ie;Ie|=1;var l=fr.transition,c=ze;try{if(fr.transition=null,ze=1,r)return r()}finally{ze=c,fr.transition=l,Ie=n,(Ie&6)===0&&_i()}}function Pu(){ir=En.current,Ve(En)}function $i(r,n){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,qv(l)),st!==null)for(l=st.return;l!==null;){var c=l;switch(Aa(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&To();break;case 3:Cn(),Ve(Wt),Ve(Lt),Xa();break;case 5:qa(c);break;case 4:Cn();break;case 13:Ve(Xe);break;case 19:Ve(Xe);break;case 10:Wa(c.type._context);break;case 22:case 23:Pu()}l=l.return}if(_t=r,st=r=Ci(r.current,null),Et=ir=n,ct=0,Cs=null,Su=el=Wi=0,Vt=ks=null,Fi!==null){for(n=0;n<Fi.length;n++)if(l=Fi[n],c=l.interleaved,c!==null){l.interleaved=null;var f=c.next,_=l.pending;if(_!==null){var y=_.next;_.next=f,c.next=y}l.pending=c}Fi=null}return r}function ip(r,n){do{var l=st;try{if(ja(),Uo.current=qo,$o){for(var c=Ge.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}$o=!1}if(ji=0,pt=ut=Ge=null,gs=!1,vs=0,yu.current=null,l===null||l.return===null){ct=1,Cs=n,st=null;break}e:{var _=r,y=l.return,C=l,P=n;if(n=Et,C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var H=P,Y=C,G=Y.tag;if((Y.mode&1)===0&&(G===0||G===11||G===15)){var q=Y.alternate;q?(Y.updateQueue=q.updateQueue,Y.memoizedState=q.memoizedState,Y.lanes=q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ce=Rf(y);if(ce!==null){ce.flags&=-257,Lf(ce,y,C,_,n),ce.mode&1&&Pf(_,H,n),n=ce,P=H;var fe=n.updateQueue;if(fe===null){var _e=new Set;_e.add(P),n.updateQueue=_e}else fe.add(P);break e}else{if((n&1)===0){Pf(_,H,n),Ru();break e}P=Error(i(426))}}else if(qe&&C.mode&1){var it=Rf(y);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Lf(it,y,C,_,n),Fa(kn(P,C));break e}}_=P=kn(P,C),ct!==4&&(ct=2),ks===null?ks=[_]:ks.push(_),_=y;do{switch(_.tag){case 3:_.flags|=65536,n&=-n,_.lanes|=n;var N=bf(_,P,n);Qd(_,N);break e;case 1:C=P;var D=_.type,F=_.stateNode;if((_.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(yi===null||!yi.has(F)))){_.flags|=65536,n&=-n,_.lanes|=n;var te=Ef(_,C,n);Qd(_,te);break e}}_=_.return}while(_!==null)}op(l)}catch(ge){n=ge,st===l&&l!==null&&(st=l=l.return);continue}break}while(!0)}function np(){var r=Zo.current;return Zo.current=qo,r===null?qo:r}function Ru(){(ct===0||ct===3||ct===2)&&(ct=4),_t===null||(Wi&268435455)===0&&(el&268435455)===0||xi(_t,Et)}function ol(r,n){var l=Ie;Ie|=2;var c=np();(_t!==r||Et!==n)&&(Jr=null,$i(r,n));do try{vy();break}catch(f){ip(r,f)}while(!0);if(ja(),Ie=l,Zo.current=c,st!==null)throw Error(i(261));return _t=null,Et=0,ct}function vy(){for(;st!==null;)sp(st)}function yy(){for(;st!==null&&!$g();)sp(st)}function sp(r){var n=up(r.alternate,r,ir);r.memoizedProps=r.pendingProps,n===null?op(r):st=n,yu.current=null}function op(r){var n=r;do{var l=n.alternate;if(r=n.return,(n.flags&32768)===0){if(l=hy(l,n,ir),l!==null){st=l;return}}else{if(l=dy(l,n),l!==null){l.flags&=32767,st=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ct=6,st=null;return}}if(n=n.sibling,n!==null){st=n;return}st=n=r}while(n!==null);ct===0&&(ct=5)}function Vi(r,n,l){var c=ze,f=fr.transition;try{fr.transition=null,ze=1,Sy(r,n,l,c)}finally{fr.transition=f,ze=c}return null}function Sy(r,n,l,c){do Rn();while(Si!==null);if((Ie&6)!==0)throw Error(i(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0;var _=l.lanes|l.childLanes;if(ev(r,_),r===_t&&(st=_t=null,Et=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||rl||(rl=!0,cp(uo,function(){return Rn(),null})),_=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||_){_=fr.transition,fr.transition=null;var y=ze;ze=1;var C=Ie;Ie|=4,yu.current=null,py(r,l),Gf(l,r),Hv(Ra),go=!!Pa,Ra=Pa=null,r.current=l,_y(l),Vg(),Ie=C,ze=y,fr.transition=_}else r.current=l;if(rl&&(rl=!1,Si=r,il=f),_=r.pendingLanes,_===0&&(yi=null),Yg(l.stateNode),Kt(r,rt()),n!==null)for(c=r.onRecoverableError,l=0;l<n.length;l++)f=n[l],c(f.value,{componentStack:f.stack,digest:f.digest});if(tl)throw tl=!1,r=xu,xu=null,r;return(il&1)!==0&&r.tag!==0&&Rn(),_=r.pendingLanes,(_&1)!==0?r===Cu?bs++:(bs=0,Cu=r):bs=0,_i(),null}function Rn(){if(Si!==null){var r=qh(il),n=fr.transition,l=ze;try{if(fr.transition=null,ze=16>r?16:r,Si===null)var c=!1;else{if(r=Si,Si=null,il=0,(Ie&6)!==0)throw Error(i(331));var f=Ie;for(Ie|=4,de=r.current;de!==null;){var _=de,y=_.child;if((de.flags&16)!==0){var C=_.deletions;if(C!==null){for(var P=0;P<C.length;P++){var H=C[P];for(de=H;de!==null;){var Y=de;switch(Y.tag){case 0:case 11:case 15:xs(8,Y,_)}var G=Y.child;if(G!==null)G.return=Y,de=G;else for(;de!==null;){Y=de;var q=Y.sibling,ce=Y.return;if(Vf(Y),Y===H){de=null;break}if(q!==null){q.return=ce,de=q;break}de=ce}}}var fe=_.alternate;if(fe!==null){var _e=fe.child;if(_e!==null){fe.child=null;do{var it=_e.sibling;_e.sibling=null,_e=it}while(_e!==null)}}de=_}}if((_.subtreeFlags&2064)!==0&&y!==null)y.return=_,de=y;else e:for(;de!==null;){if(_=de,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:xs(9,_,_.return)}var N=_.sibling;if(N!==null){N.return=_.return,de=N;break e}de=_.return}}var D=r.current;for(de=D;de!==null;){y=de;var F=y.child;if((y.subtreeFlags&2064)!==0&&F!==null)F.return=y,de=F;else e:for(y=D;de!==null;){if(C=de,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Jo(9,C)}}catch(ge){Ze(C,C.return,ge)}if(C===y){de=null;break e}var te=C.sibling;if(te!==null){te.return=C.return,de=te;break e}de=C.return}}if(Ie=f,_i(),Lr&&typeof Lr.onPostCommitFiberRoot=="function")try{Lr.onPostCommitFiberRoot(co,r)}catch{}c=!0}return c}finally{ze=l,fr.transition=n}}return!1}function lp(r,n,l){n=kn(l,n),n=bf(r,n,1),r=gi(r,n,1),n=Ot(),r!==null&&(Xn(r,1,n),Kt(r,n))}function Ze(r,n,l){if(r.tag===3)lp(r,r,l);else for(;n!==null;){if(n.tag===3){lp(n,r,l);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(yi===null||!yi.has(c))){r=kn(l,r),r=Ef(n,r,1),n=gi(n,r,1),r=Ot(),n!==null&&(Xn(n,1,r),Kt(n,r));break}}n=n.return}}function wy(r,n,l){var c=r.pingCache;c!==null&&c.delete(n),n=Ot(),r.pingedLanes|=r.suspendedLanes&l,_t===r&&(Et&l)===l&&(ct===4||ct===3&&(Et&130023424)===Et&&500>rt()-wu?$i(r,0):Su|=l),Kt(r,n)}function ap(r,n){n===0&&((r.mode&1)===0?n=1:(n=fo,fo<<=1,(fo&130023424)===0&&(fo=4194304)));var l=Ot();r=Xr(r,n),r!==null&&(Xn(r,n,l),Kt(r,l))}function xy(r){var n=r.memoizedState,l=0;n!==null&&(l=n.retryLane),ap(r,l)}function Cy(r,n){var l=0;switch(r.tag){case 13:var c=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(i(314))}c!==null&&c.delete(n),ap(r,l)}var up;up=function(r,n,l){if(r!==null)if(r.memoizedProps!==n.pendingProps||Wt.current)$t=!0;else{if((r.lanes&l)===0&&(n.flags&128)===0)return $t=!1,cy(r,n,l);$t=(r.flags&131072)!==0}else $t=!1,qe&&(n.flags&1048576)!==0&&jd(n,Io,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;Go(r,n),r=n.pendingProps;var f=mn(n,Lt.current);xn(n,l),f=Ja(null,n,c,r,f,l);var _=Za();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ut(c)?(_=!0,Mo(n)):_=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Va(n),f.updater=Yo,n.stateNode=f,f._reactInternals=n,su(n,c,r,l),n=uu(null,n,c,!0,_,l)):(n.tag=0,qe&&_&&Ia(n),At(null,n,f,l),n=n.child),n;case 16:c=n.elementType;e:{switch(Go(r,n),r=n.pendingProps,f=c._init,c=f(c._payload),n.type=c,f=n.tag=by(c),r=Cr(c,r),f){case 0:n=au(null,n,c,r,l);break e;case 1:n=If(null,n,c,r,l);break e;case 11:n=Df(null,n,c,r,l);break e;case 14:n=Tf(null,n,c,Cr(c.type,r),l);break e}throw Error(i(306,c,""))}return n;case 0:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Cr(c,f),au(r,n,c,f,l);case 1:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Cr(c,f),If(r,n,c,f,l);case 3:e:{if(Af(n),r===null)throw Error(i(387));c=n.pendingProps,_=n.memoizedState,f=_.element,Gd(r,n),jo(n,c,null,l);var y=n.memoizedState;if(c=y.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},n.updateQueue.baseState=_,n.memoizedState=_,n.flags&256){f=kn(Error(i(423)),n),n=Of(r,n,c,l,f);break e}else if(c!==f){f=kn(Error(i(424)),n),n=Of(r,n,c,l,f);break e}else for(rr=di(n.stateNode.containerInfo.firstChild),tr=n,qe=!0,xr=null,l=Yd(n,null,c,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(yn(),c===f){n=Qr(r,n,l);break e}At(r,n,c,l)}n=n.child}return n;case 5:return Zd(n),r===null&&za(n),c=n.type,f=n.pendingProps,_=r!==null?r.memoizedProps:null,y=f.children,La(c,f)?y=null:_!==null&&La(c,_)&&(n.flags|=32),Bf(r,n),At(r,n,y,l),n.child;case 6:return r===null&&za(n),null;case 13:return zf(r,n,l);case 4:return Ka(n,n.stateNode.containerInfo),c=n.pendingProps,r===null?n.child=Sn(n,null,c,l):At(r,n,c,l),n.child;case 11:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Cr(c,f),Df(r,n,c,f,l);case 7:return At(r,n,n.pendingProps,l),n.child;case 8:return At(r,n,n.pendingProps.children,l),n.child;case 12:return At(r,n,n.pendingProps.children,l),n.child;case 10:e:{if(c=n.type._context,f=n.pendingProps,_=n.memoizedProps,y=f.value,je(zo,c._currentValue),c._currentValue=y,_!==null)if(wr(_.value,y)){if(_.children===f.children&&!Wt.current){n=Qr(r,n,l);break e}}else for(_=n.child,_!==null&&(_.return=n);_!==null;){var C=_.dependencies;if(C!==null){y=_.child;for(var P=C.firstContext;P!==null;){if(P.context===c){if(_.tag===1){P=Gr(-1,l&-l),P.tag=2;var H=_.updateQueue;if(H!==null){H=H.shared;var Y=H.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),H.pending=P}}_.lanes|=l,P=_.alternate,P!==null&&(P.lanes|=l),Ua(_.return,l,n),C.lanes|=l;break}P=P.next}}else if(_.tag===10)y=_.type===n.type?null:_.child;else if(_.tag===18){if(y=_.return,y===null)throw Error(i(341));y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),Ua(y,l,n),y=_.sibling}else y=_.child;if(y!==null)y.return=_;else for(y=_;y!==null;){if(y===n){y=null;break}if(_=y.sibling,_!==null){_.return=y.return,y=_;break}y=y.return}_=y}At(r,n,f.children,l),n=n.child}return n;case 9:return f=n.type,c=n.pendingProps.children,xn(n,l),f=hr(f),c=c(f),n.flags|=1,At(r,n,c,l),n.child;case 14:return c=n.type,f=Cr(c,n.pendingProps),f=Cr(c.type,f),Tf(r,n,c,f,l);case 15:return Mf(r,n,n.type,n.pendingProps,l);case 17:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Cr(c,f),Go(r,n),n.tag=1,Ut(c)?(r=!0,Mo(n)):r=!1,xn(n,l),Cf(n,c,f),su(n,c,f,l),uu(null,n,c,!0,r,l);case 19:return Hf(r,n,l);case 22:return Nf(r,n,l)}throw Error(i(156,n.tag))};function cp(r,n){return Wh(r,n)}function ky(r,n,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(r,n,l,c){return new ky(r,n,l,c)}function Lu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function by(r){if(typeof r=="function")return Lu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===W)return 11;if(r===O)return 14}return 2}function Ci(r,n){var l=r.alternate;return l===null?(l=pr(r.tag,n,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=n,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,n=r.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function ll(r,n,l,c,f,_){var y=2;if(c=r,typeof r=="function")Lu(r)&&(y=1);else if(typeof r=="string")y=5;else e:switch(r){case se:return Ki(l.children,f,_,n);case ie:y=8,f|=8;break;case le:return r=pr(12,l,n,f|2),r.elementType=le,r.lanes=_,r;case j:return r=pr(13,l,n,f),r.elementType=j,r.lanes=_,r;case B:return r=pr(19,l,n,f),r.elementType=B,r.lanes=_,r;case ee:return al(l,f,_,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case me:y=10;break e;case Q:y=9;break e;case W:y=11;break e;case O:y=14;break e;case K:y=16,c=null;break e}throw Error(i(130,r==null?r:typeof r,""))}return n=pr(y,l,n,f),n.elementType=r,n.type=c,n.lanes=_,n}function Ki(r,n,l,c){return r=pr(7,r,c,n),r.lanes=l,r}function al(r,n,l,c){return r=pr(22,r,c,n),r.elementType=ee,r.lanes=l,r.stateNode={isHidden:!1},r}function Du(r,n,l){return r=pr(6,r,null,n),r.lanes=l,r}function Tu(r,n,l){return n=pr(4,r.children!==null?r.children:[],r.key,n),n.lanes=l,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function Ey(r,n,l,c,f){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Mu(r,n,l,c,f,_,y,C,P){return r=new Ey(r,n,l,C,P),n===1?(n=1,_===!0&&(n|=8)):n=0,_=pr(3,null,null,n),r.current=_,_.stateNode=r,_.memoizedState={element:c,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Va(_),r}function Py(r,n,l){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:c==null?null:""+c,children:r,containerInfo:n,implementation:l}}function hp(r){if(!r)return pi;r=r._reactInternals;e:{if(Bi(r)!==r||r.tag!==1)throw Error(i(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ut(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(i(171))}if(r.tag===1){var l=r.type;if(Ut(l))return zd(r,l,n)}return n}function dp(r,n,l,c,f,_,y,C,P){return r=Mu(l,c,!0,r,f,_,y,C,P),r.context=hp(null),l=r.current,c=Ot(),f=wi(l),_=Gr(c,f),_.callback=n??null,gi(l,_,f),r.current.lanes=f,Xn(r,f,c),Kt(r,c),r}function ul(r,n,l,c){var f=n.current,_=Ot(),y=wi(f);return l=hp(l),n.context===null?n.context=l:n.pendingContext=l,n=Gr(_,y),n.payload={element:r},c=c===void 0?null:c,c!==null&&(n.callback=c),r=gi(f,n,y),r!==null&&(Er(r,f,y,_),Ho(r,f,y)),y}function cl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function fp(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<n?l:n}}function Nu(r,n){fp(r,n),(r=r.alternate)&&fp(r,n)}function Ry(){return null}var pp=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bu(r){this._internalRoot=r}hl.prototype.render=Bu.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(i(409));ul(r,n,null,null)},hl.prototype.unmount=Bu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Ui(function(){ul(null,r,null,null)}),n[Vr]=null}};function hl(r){this._internalRoot=r}hl.prototype.unstable_scheduleHydration=function(r){if(r){var n=Gh();r={blockedOn:null,target:r,priority:n};for(var l=0;l<ui.length&&n!==0&&n<ui[l].priority;l++);ui.splice(l,0,r),l===0&&Zh(r)}};function Iu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function dl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function _p(){}function Ly(r,n,l,c,f){if(f){if(typeof c=="function"){var _=c;c=function(){var H=cl(y);_.call(H)}}var y=dp(n,c,r,0,null,!1,!1,"",_p);return r._reactRootContainer=y,r[Vr]=y.current,us(r.nodeType===8?r.parentNode:r),Ui(),y}for(;f=r.lastChild;)r.removeChild(f);if(typeof c=="function"){var C=c;c=function(){var H=cl(P);C.call(H)}}var P=Mu(r,0,!1,null,null,!1,!1,"",_p);return r._reactRootContainer=P,r[Vr]=P.current,us(r.nodeType===8?r.parentNode:r),Ui(function(){ul(n,P,l,c)}),P}function fl(r,n,l,c,f){var _=l._reactRootContainer;if(_){var y=_;if(typeof f=="function"){var C=f;f=function(){var P=cl(y);C.call(P)}}ul(n,y,r,f)}else y=Ly(l,n,r,f,c);return cl(y)}Yh=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var l=Yn(n.pendingLanes);l!==0&&(sa(n,l|1),Kt(n,rt()),(Ie&6)===0&&(Pn=rt()+500,_i()))}break;case 13:Ui(function(){var c=Xr(r,1);if(c!==null){var f=Ot();Er(c,r,1,f)}}),Nu(r,1)}},oa=function(r){if(r.tag===13){var n=Xr(r,134217728);if(n!==null){var l=Ot();Er(n,r,134217728,l)}Nu(r,134217728)}},Xh=function(r){if(r.tag===13){var n=wi(r),l=Xr(r,n);if(l!==null){var c=Ot();Er(l,r,n,c)}Nu(r,n)}},Gh=function(){return ze},Qh=function(r,n){var l=ze;try{return ze=r,n()}finally{ze=l}},Jl=function(r,n,l){switch(n){case"input":if(rn(r,l),n=l.name,l.type==="radio"&&n!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var c=l[n];if(c!==r&&c.form===r.form){var f=Do(c);if(!f)throw Error(i(90));Jt(c),rn(c,f)}}}break;case"textarea":so(r,l);break;case"select":n=l.value,n!=null&&ni(r,!!l.multiple,n,!1)}},Ih=Eu,Ah=Ui;var Dy={usingClientEntryPoint:!1,Events:[ds,pn,Do,Nh,Bh,Eu]},Es={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ty={bundleType:Es.bundleType,version:Es.version,rendererPackageName:Es.rendererPackageName,rendererConfig:Es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Hh(r),r===null?null:r.stateNode},findFiberByHostInstance:Es.findFiberByHostInstance||Ry,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{co=pl.inject(Ty),Lr=pl}catch{}}return qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dy,qt.createPortal=function(r,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iu(n))throw Error(i(200));return Py(r,n,null,l)},qt.createRoot=function(r,n){if(!Iu(r))throw Error(i(299));var l=!1,c="",f=pp;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=Mu(r,1,!1,null,null,l,!1,c,f),r[Vr]=n.current,us(r.nodeType===8?r.parentNode:r),new Bu(n)},qt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=Hh(n),r=r===null?null:r.stateNode,r},qt.flushSync=function(r){return Ui(r)},qt.hydrate=function(r,n,l){if(!dl(n))throw Error(i(200));return fl(null,r,n,!0,l)},qt.hydrateRoot=function(r,n,l){if(!Iu(r))throw Error(i(405));var c=l!=null&&l.hydratedSources||null,f=!1,_="",y=pp;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(y=l.onRecoverableError)),n=dp(n,null,r,1,l??null,f,!1,_,y),r[Vr]=n.current,us(r),c)for(r=0;r<c.length;r++)l=c[r],f=l._getVersion,f=f(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,f]:n.mutableSourceEagerHydrationData.push(l,f);return new hl(n)},qt.render=function(r,n,l){if(!dl(n))throw Error(i(200));return fl(null,r,n,!1,l)},qt.unmountComponentAtNode=function(r){if(!dl(r))throw Error(i(40));return r._reactRootContainer?(Ui(function(){fl(null,null,r,!1,function(){r._reactRootContainer=null,r[Vr]=null})}),!0):!1},qt.unstable_batchedUpdates=Eu,qt.unstable_renderSubtreeIntoContainer=function(r,n,l,c){if(!dl(l))throw Error(i(200));if(r==null||r._reactInternals===void 0)throw Error(i(38));return fl(r,n,l,!1,c)},qt.version="18.3.1-next-f1338f8080-20240426",qt}var Cp;function Fy(){if(Cp)return zu.exports;Cp=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zu.exports=zy(),zu.exports}var kp;function Hy(){if(kp)return _l;kp=1;var e=Fy();return _l.createRoot=e.createRoot,_l.hydrateRoot=e.hydrateRoot,_l}var jy=Hy();const Wy=Ul(jy);function Uy(e,t){const i={};return(e[e.length-1]===""?[...e,""]:e).join((i.padRight?" ":"")+","+(i.padLeft===!1?"":" ")).trim()}const $y=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Vy=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ky={};function bp(e,t){return(Ky.jsx?Vy:$y).test(e)}const qy=/[ \t\n\f\r]/g;function Yy(e){return typeof e=="object"?e.type==="text"?Ep(e.value):!1:Ep(e)}function Ep(e){return e.replace(qy,"")===""}class Qs{constructor(t,i,s){this.normal=i,this.property=t,s&&(this.space=s)}}Qs.prototype.normal={};Qs.prototype.property={};Qs.prototype.space=void 0;function um(e,t){const i={},s={};for(const o of e)Object.assign(i,o.property),Object.assign(s,o.normal);return new Qs(i,s,t)}function fc(e){return e.toLowerCase()}class Qt{constructor(t,i){this.attribute=i,this.property=t}}Qt.prototype.attribute="";Qt.prototype.booleanish=!1;Qt.prototype.boolean=!1;Qt.prototype.commaOrSpaceSeparated=!1;Qt.prototype.commaSeparated=!1;Qt.prototype.defined=!1;Qt.prototype.mustUseProperty=!1;Qt.prototype.number=!1;Qt.prototype.overloadedBoolean=!1;Qt.prototype.property="";Qt.prototype.spaceSeparated=!1;Qt.prototype.space=void 0;let Xy=0;const Re=en(),ot=en(),pc=en(),Z=en(),We=en(),In=en(),or=en();function en(){return 2**++Xy}const _c=Object.freeze(Object.defineProperty({__proto__:null,boolean:Re,booleanish:ot,commaOrSpaceSeparated:or,commaSeparated:In,number:Z,overloadedBoolean:pc,spaceSeparated:We},Symbol.toStringTag,{value:"Module"})),ju=Object.keys(_c);class ah extends Qt{constructor(t,i,s,o){let a=-1;if(super(t,i),Pp(this,"space",o),typeof s=="number")for(;++a<ju.length;){const u=ju[a];Pp(this,ju[a],(s&_c[u])===_c[u])}}}ah.prototype.defined=!0;function Pp(e,t,i){i&&(e[t]=i)}function zn(e){const t={},i={};for(const[s,o]of Object.entries(e.properties)){const a=new ah(s,e.transform(e.attributes||{},s),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),t[s]=a,i[fc(s)]=s,i[fc(a.attribute)]=s}return new Qs(t,i,e.space)}const cm=zn({properties:{ariaActiveDescendant:null,ariaAtomic:ot,ariaAutoComplete:null,ariaBusy:ot,ariaChecked:ot,ariaColCount:Z,ariaColIndex:Z,ariaColSpan:Z,ariaControls:We,ariaCurrent:null,ariaDescribedBy:We,ariaDetails:null,ariaDisabled:ot,ariaDropEffect:We,ariaErrorMessage:null,ariaExpanded:ot,ariaFlowTo:We,ariaGrabbed:ot,ariaHasPopup:null,ariaHidden:ot,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:We,ariaLevel:Z,ariaLive:null,ariaModal:ot,ariaMultiLine:ot,ariaMultiSelectable:ot,ariaOrientation:null,ariaOwns:We,ariaPlaceholder:null,ariaPosInSet:Z,ariaPressed:ot,ariaReadOnly:ot,ariaRelevant:null,ariaRequired:ot,ariaRoleDescription:We,ariaRowCount:Z,ariaRowIndex:Z,ariaRowSpan:Z,ariaSelected:ot,ariaSetSize:Z,ariaSort:null,ariaValueMax:Z,ariaValueMin:Z,ariaValueNow:Z,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function hm(e,t){return t in e?e[t]:t}function dm(e,t){return hm(e,t.toLowerCase())}const Gy=zn({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:In,acceptCharset:We,accessKey:We,action:null,allow:null,allowFullScreen:Re,allowPaymentRequest:Re,allowUserMedia:Re,alt:null,as:null,async:Re,autoCapitalize:null,autoComplete:We,autoFocus:Re,autoPlay:Re,blocking:We,capture:null,charSet:null,checked:Re,cite:null,className:We,cols:Z,colSpan:null,content:null,contentEditable:ot,controls:Re,controlsList:We,coords:Z|In,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Re,defer:Re,dir:null,dirName:null,disabled:Re,download:pc,draggable:ot,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Re,formTarget:null,headers:We,height:Z,hidden:pc,high:Z,href:null,hrefLang:null,htmlFor:We,httpEquiv:We,id:null,imageSizes:null,imageSrcSet:null,inert:Re,inputMode:null,integrity:null,is:null,isMap:Re,itemId:null,itemProp:We,itemRef:We,itemScope:Re,itemType:We,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Re,low:Z,manifest:null,max:null,maxLength:Z,media:null,method:null,min:null,minLength:Z,multiple:Re,muted:Re,name:null,nonce:null,noModule:Re,noValidate:Re,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Re,optimum:Z,pattern:null,ping:We,placeholder:null,playsInline:Re,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Re,referrerPolicy:null,rel:We,required:Re,reversed:Re,rows:Z,rowSpan:Z,sandbox:We,scope:null,scoped:Re,seamless:Re,selected:Re,shadowRootClonable:Re,shadowRootDelegatesFocus:Re,shadowRootMode:null,shape:null,size:Z,sizes:null,slot:null,span:Z,spellCheck:ot,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Z,step:null,style:null,tabIndex:Z,target:null,title:null,translate:null,type:null,typeMustMatch:Re,useMap:null,value:ot,width:Z,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:We,axis:null,background:null,bgColor:null,border:Z,borderColor:null,bottomMargin:Z,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Re,declare:Re,event:null,face:null,frame:null,frameBorder:null,hSpace:Z,leftMargin:Z,link:null,longDesc:null,lowSrc:null,marginHeight:Z,marginWidth:Z,noResize:Re,noHref:Re,noShade:Re,noWrap:Re,object:null,profile:null,prompt:null,rev:null,rightMargin:Z,rules:null,scheme:null,scrolling:ot,standby:null,summary:null,text:null,topMargin:Z,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Z,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Re,disableRemotePlayback:Re,prefix:null,property:null,results:Z,security:null,unselectable:null},space:"html",transform:dm}),Qy=zn({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:or,accentHeight:Z,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Z,amplitude:Z,arabicForm:null,ascent:Z,attributeName:null,attributeType:null,azimuth:Z,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Z,by:null,calcMode:null,capHeight:Z,className:We,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Z,diffuseConstant:Z,direction:null,display:null,dur:null,divisor:Z,dominantBaseline:null,download:Re,dx:null,dy:null,edgeMode:null,editable:null,elevation:Z,enableBackground:null,end:null,event:null,exponent:Z,externalResourcesRequired:null,fill:null,fillOpacity:Z,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:In,g2:In,glyphName:In,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Z,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Z,horizOriginX:Z,horizOriginY:Z,id:null,ideographic:Z,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Z,k:Z,k1:Z,k2:Z,k3:Z,k4:Z,kernelMatrix:or,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Z,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Z,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Z,overlineThickness:Z,paintOrder:null,panose1:null,path:null,pathLength:Z,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:We,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Z,pointsAtY:Z,pointsAtZ:Z,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:or,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:or,rev:or,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:or,requiredFeatures:or,requiredFonts:or,requiredFormats:or,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Z,specularExponent:Z,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Z,strikethroughThickness:Z,string:null,stroke:null,strokeDashArray:or,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Z,strokeOpacity:Z,strokeWidth:null,style:null,surfaceScale:Z,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:or,tabIndex:Z,tableValues:null,target:null,targetX:Z,targetY:Z,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:or,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Z,underlineThickness:Z,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Z,values:null,vAlphabetic:Z,vMathematical:Z,vectorEffect:null,vHanging:Z,vIdeographic:Z,version:null,vertAdvY:Z,vertOriginX:Z,vertOriginY:Z,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Z,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:hm}),fm=zn({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),pm=zn({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:dm}),_m=zn({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Jy={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Zy=/[A-Z]/g,Rp=/-[a-z]/g,e0=/^data[-\w.:]+$/i;function t0(e,t){const i=fc(t);let s=t,o=Qt;if(i in e.normal)return e.property[e.normal[i]];if(i.length>4&&i.slice(0,4)==="data"&&e0.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(Rp,i0);s="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!Rp.test(a)){let u=a.replace(Zy,r0);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}o=ah}return new o(s,t)}function r0(e){return"-"+e.toLowerCase()}function i0(e){return e.charAt(1).toUpperCase()}const n0=um([cm,Gy,fm,pm,_m],"html"),uh=um([cm,Qy,fm,pm,_m],"svg");function s0(e){return e.join(" ").trim()}var Ln={},Wu,Lp;function o0(){if(Lp)return Wu;Lp=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,i=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,h=/^\s+|\s+$/g,p=`
`,d="/",m="*",g="",S="comment",v="declaration";function k(T,M){if(typeof T!="string")throw new TypeError("First argument must be a string");if(!T)return[];M=M||{};var J=1,I=1;function U(B){var O=B.match(t);O&&(J+=O.length);var K=B.lastIndexOf(p);I=~K?B.length-K:I+B.length}function X(){var B={line:J,column:I};return function(O){return O.position=new R(B),le(),O}}function R(B){this.start=B,this.end={line:J,column:I},this.source=M.source}R.prototype.content=T;function se(B){var O=new Error(M.source+":"+J+":"+I+": "+B);if(O.reason=B,O.filename=M.source,O.line=J,O.column=I,O.source=T,!M.silent)throw O}function ie(B){var O=B.exec(T);if(O){var K=O[0];return U(K),T=T.slice(K.length),O}}function le(){ie(i)}function me(B){var O;for(B=B||[];O=Q();)O!==!1&&B.push(O);return B}function Q(){var B=X();if(!(d!=T.charAt(0)||m!=T.charAt(1))){for(var O=2;g!=T.charAt(O)&&(m!=T.charAt(O)||d!=T.charAt(O+1));)++O;if(O+=2,g===T.charAt(O-1))return se("End of comment missing");var K=T.slice(2,O-2);return I+=2,U(K),T=T.slice(O),I+=2,B({type:S,comment:K})}}function W(){var B=X(),O=ie(s);if(O){if(Q(),!ie(o))return se("property missing ':'");var K=ie(a),ee=B({type:v,property:E(O[0].replace(e,g)),value:K?E(K[0].replace(e,g)):g});return ie(u),ee}}function j(){var B=[];me(B);for(var O;O=W();)O!==!1&&(B.push(O),me(B));return B}return le(),j()}function E(T){return T?T.replace(h,g):g}return Wu=k,Wu}var Dp;function l0(){if(Dp)return Ln;Dp=1;var e=Ln&&Ln.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=i;const t=e(o0());function i(s,o){let a=null;if(!s||typeof s!="string")return a;const u=(0,t.default)(s),h=typeof o=="function";return u.forEach(p=>{if(p.type!=="declaration")return;const{property:d,value:m}=p;h?o(d,m,p):m&&(a=a||{},a[d]=m)}),a}return Ln}var Rs={},Tp;function a0(){if(Tp)return Rs;Tp=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,i=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(d){return!d||i.test(d)||e.test(d)},u=function(d,m){return m.toUpperCase()},h=function(d,m){return"".concat(m,"-")},p=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(o,h):d=d.replace(s,h),d.replace(t,u))};return Rs.camelCase=p,Rs}var Ls,Mp;function u0(){if(Mp)return Ls;Mp=1;var e=Ls&&Ls.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(l0()),i=a0();function s(o,a){var u={};return!o||typeof o!="string"||(0,t.default)(o,function(h,p){h&&p&&(u[(0,i.camelCase)(h,a)]=p)}),u}return s.default=s,Ls=s,Ls}var c0=u0();const h0=Ul(c0),mm=gm("end"),ch=gm("start");function gm(e){return t;function t(i){const s=i&&i.position&&i.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function d0(e){const t=ch(e),i=mm(e);if(t&&i)return{start:t,end:i}}function Us(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Np(e.position):"start"in e||"end"in e?Np(e):"line"in e||"column"in e?mc(e):""}function mc(e){return Bp(e&&e.line)+":"+Bp(e&&e.column)}function Np(e){return mc(e&&e.start)+"-"+mc(e&&e.end)}function Bp(e){return e&&typeof e=="number"?e:1}class Bt extends Error{constructor(t,i,s){super(),typeof i=="string"&&(s=i,i=void 0);let o="",a={},u=!1;if(i&&("line"in i&&"column"in i?a={place:i}:"start"in i&&"end"in i?a={place:i}:"type"in i?a={ancestors:[i],place:i.position}:a={...i}),typeof t=="string"?o=t:!a.cause&&t&&(u=!0,o=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof s=="string"){const p=s.indexOf(":");p===-1?a.ruleId=s:(a.source=s.slice(0,p),a.ruleId=s.slice(p+1))}if(!a.place&&a.ancestors&&a.ancestors){const p=a.ancestors[a.ancestors.length-1];p&&(a.place=p.position)}const h=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=h?h.line:void 0,this.name=Us(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=u&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Bt.prototype.file="";Bt.prototype.name="";Bt.prototype.reason="";Bt.prototype.message="";Bt.prototype.stack="";Bt.prototype.column=void 0;Bt.prototype.line=void 0;Bt.prototype.ancestors=void 0;Bt.prototype.cause=void 0;Bt.prototype.fatal=void 0;Bt.prototype.place=void 0;Bt.prototype.ruleId=void 0;Bt.prototype.source=void 0;const hh={}.hasOwnProperty,f0=new Map,p0=/[A-Z]/g,_0=new Set(["table","tbody","thead","tfoot","tr"]),m0=new Set(["td","th"]),vm="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function g0(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const i=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=b0(i,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=k0(i,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:i,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?uh:n0,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=ym(o,e,void 0);return a&&typeof a!="string"?a:o.create(e,o.Fragment,{children:a||void 0},void 0)}function ym(e,t,i){if(t.type==="element")return v0(e,t,i);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return y0(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return w0(e,t,i);if(t.type==="mdxjsEsm")return S0(e,t);if(t.type==="root")return x0(e,t,i);if(t.type==="text")return C0(e,t)}function v0(e,t,i){const s=e.schema;let o=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(o=uh,e.schema=o),e.ancestors.push(t);const a=wm(e,t.tagName,!1),u=E0(e,t);let h=fh(e,t);return _0.has(t.tagName)&&(h=h.filter(function(p){return typeof p=="string"?!Yy(p):!0})),Sm(e,u,a,t),dh(u,h),e.ancestors.pop(),e.schema=s,e.create(t,a,u,i)}function y0(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}qs(e,t.position)}function S0(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);qs(e,t.position)}function w0(e,t,i){const s=e.schema;let o=s;t.name==="svg"&&s.space==="html"&&(o=uh,e.schema=o),e.ancestors.push(t);const a=t.name===null?e.Fragment:wm(e,t.name,!0),u=P0(e,t),h=fh(e,t);return Sm(e,u,a,t),dh(u,h),e.ancestors.pop(),e.schema=s,e.create(t,a,u,i)}function x0(e,t,i){const s={};return dh(s,fh(e,t)),e.create(t,e.Fragment,s,i)}function C0(e,t){return t.value}function Sm(e,t,i,s){typeof i!="string"&&i!==e.Fragment&&e.passNode&&(t.node=s)}function dh(e,t){if(t.length>0){const i=t.length>1?t:t[0];i&&(e.children=i)}}function k0(e,t,i){return s;function s(o,a,u,h){const d=Array.isArray(u.children)?i:t;return h?d(a,u,h):d(a,u)}}function b0(e,t){return i;function i(s,o,a,u){const h=Array.isArray(a.children),p=ch(s);return t(o,a,u,h,{columnNumber:p?p.column-1:void 0,fileName:e,lineNumber:p?p.line:void 0},void 0)}}function E0(e,t){const i={};let s,o;for(o in t.properties)if(o!=="children"&&hh.call(t.properties,o)){const a=R0(e,o,t.properties[o]);if(a){const[u,h]=a;e.tableCellAlignToStyle&&u==="align"&&typeof h=="string"&&m0.has(t.tagName)?s=h:i[u]=h}}if(s){const a=i.style||(i.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return i}function P0(e,t){const i={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const a=s.data.estree.body[0];a.type;const u=a.expression;u.type;const h=u.properties[0];h.type,Object.assign(i,e.evaluater.evaluateExpression(h.argument))}else qs(e,t.position);else{const o=s.name;let a;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const h=s.value.data.estree.body[0];h.type,a=e.evaluater.evaluateExpression(h.expression)}else qs(e,t.position);else a=s.value===null?!0:s.value;i[o]=a}return i}function fh(e,t){const i=[];let s=-1;const o=e.passKeys?new Map:f0;for(;++s<t.children.length;){const a=t.children[s];let u;if(e.passKeys){const p=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(p){const d=o.get(p)||0;u=p+"-"+d,o.set(p,d+1)}}const h=ym(e,a,u);h!==void 0&&i.push(h)}return i}function R0(e,t,i){const s=t0(e.schema,t);if(!(i==null||typeof i=="number"&&Number.isNaN(i))){if(Array.isArray(i)&&(i=s.commaSeparated?Uy(i):s0(i)),s.property==="style"){let o=typeof i=="object"?i:L0(e,String(i));return e.stylePropertyNameCase==="css"&&(o=D0(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&s.space?Jy[s.property]||s.property:s.attribute,i]}}function L0(e,t){try{return h0(t,{reactCompat:!0})}catch(i){if(e.ignoreInvalidStyle)return{};const s=i,o=new Bt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=vm+"#cannot-parse-style-attribute",o}}function wm(e,t,i){let s;if(!i)s={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let a=-1,u;for(;++a<o.length;){const h=bp(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};u=u?{type:"MemberExpression",object:u,property:h,computed:!!(a&&h.type==="Literal"),optional:!1}:h}s=u}else s=bp(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const o=s.value;return hh.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(s);qs(e)}function qs(e,t){const i=new Bt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=vm+"#cannot-handle-mdx-estrees-without-createevaluater",i}function D0(e){const t={};let i;for(i in e)hh.call(e,i)&&(t[T0(i)]=e[i]);return t}function T0(e){let t=e.replace(p0,M0);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function M0(e){return"-"+e.toLowerCase()}const Uu={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},N0={};function B0(e,t){const i=N0,s=typeof i.includeImageAlt=="boolean"?i.includeImageAlt:!0,o=typeof i.includeHtml=="boolean"?i.includeHtml:!0;return xm(e,s,o)}function xm(e,t,i){if(I0(e)){if("value"in e)return e.type==="html"&&!i?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ip(e.children,t,i)}return Array.isArray(e)?Ip(e,t,i):""}function Ip(e,t,i){const s=[];let o=-1;for(;++o<e.length;)s[o]=xm(e[o],t,i);return s.join("")}function I0(e){return!!(e&&typeof e=="object")}const Ap=document.createElement("i");function ph(e){const t="&"+e+";";Ap.innerHTML=t;const i=Ap.textContent;return i.charCodeAt(i.length-1)===59&&e!=="semi"||i===t?!1:i}function jr(e,t,i,s){const o=e.length;let a=0,u;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,i=i>0?i:0,s.length<1e4)u=Array.from(s),u.unshift(t,i),e.splice(...u);else for(i&&e.splice(t,i);a<s.length;)u=s.slice(a,a+1e4),u.unshift(t,0),e.splice(...u),a+=1e4,t+=1e4}function vr(e,t){return e.length>0?(jr(e,e.length,0,t),e):t}const Op={}.hasOwnProperty;function A0(e){const t={};let i=-1;for(;++i<e.length;)O0(t,e[i]);return t}function O0(e,t){let i;for(i in t){const o=(Op.call(e,i)?e[i]:void 0)||(e[i]={}),a=t[i];let u;if(a)for(u in a){Op.call(o,u)||(o[u]=[]);const h=a[u];z0(o[u],Array.isArray(h)?h:h?[h]:[])}}}function z0(e,t){let i=-1;const s=[];for(;++i<t.length;)(t[i].add==="after"?e:s).push(t[i]);jr(e,0,0,s)}function Cm(e,t){const i=Number.parseInt(e,t);return i<9||i===11||i>13&&i<32||i>126&&i<160||i>55295&&i<57344||i>64975&&i<65008||(i&65535)===65535||(i&65535)===65534||i>1114111?"":String.fromCodePoint(i)}function An(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zr=Mi(/[A-Za-z]/),lr=Mi(/[\dA-Za-z]/),F0=Mi(/[#-'*+\--9=?A-Z^-~]/);function gc(e){return e!==null&&(e<32||e===127)}const vc=Mi(/\d/),H0=Mi(/[\dA-Fa-f]/),j0=Mi(/[!-/:-@[-`{-~]/);function Ee(e){return e!==null&&e<-2}function Gt(e){return e!==null&&(e<0||e===32)}function Oe(e){return e===-2||e===-1||e===32}const W0=Mi(new RegExp("\\p{P}|\\p{S}","u")),U0=Mi(/\s/);function Mi(e){return t;function t(i){return i!==null&&i>-1&&e.test(String.fromCharCode(i))}}function Fn(e){const t=[];let i=-1,s=0,o=0;for(;++i<e.length;){const a=e.charCodeAt(i);let u="";if(a===37&&lr(e.charCodeAt(i+1))&&lr(e.charCodeAt(i+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(u=String.fromCharCode(a));else if(a>55295&&a<57344){const h=e.charCodeAt(i+1);a<56320&&h>56319&&h<57344?(u=String.fromCharCode(a,h),o=1):u=""}else u=String.fromCharCode(a);u&&(t.push(e.slice(s,i),encodeURIComponent(u)),s=i+o+1,u=""),o&&(i+=o,o=0)}return t.join("")+e.slice(s)}function Ue(e,t,i,s){const o=s?s-1:Number.POSITIVE_INFINITY;let a=0;return u;function u(p){return Oe(p)?(e.enter(i),h(p)):t(p)}function h(p){return Oe(p)&&a++<o?(e.consume(p),h):(e.exit(i),t(p))}}const $0={tokenize:V0};function V0(e){const t=e.attempt(this.parser.constructs.contentInitial,s,o);let i;return t;function s(h){if(h===null){e.consume(h);return}return e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Ue(e,t,"linePrefix")}function o(h){return e.enter("paragraph"),a(h)}function a(h){const p=e.enter("chunkText",{contentType:"text",previous:i});return i&&(i.next=p),i=p,u(h)}function u(h){if(h===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(h);return}return Ee(h)?(e.consume(h),e.exit("chunkText"),a):(e.consume(h),u)}}const K0={tokenize:q0},zp={tokenize:Y0};function q0(e){const t=this,i=[];let s=0,o,a,u;return h;function h(I){if(s<i.length){const U=i[s];return t.containerState=U[1],e.attempt(U[0].continuation,p,d)(I)}return d(I)}function p(I){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&J();const U=t.events.length;let X=U,R;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){R=t.events[X][1].end;break}M(s);let se=U;for(;se<t.events.length;)t.events[se][1].end={...R},se++;return jr(t.events,X+1,0,t.events.slice(U)),t.events.length=se,d(I)}return h(I)}function d(I){if(s===i.length){if(!o)return S(I);if(o.currentConstruct&&o.currentConstruct.concrete)return k(I);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(zp,m,g)(I)}function m(I){return o&&J(),M(s),S(I)}function g(I){return t.parser.lazy[t.now().line]=s!==i.length,u=t.now().offset,k(I)}function S(I){return t.containerState={},e.attempt(zp,v,k)(I)}function v(I){return s++,i.push([t.currentConstruct,t.containerState]),S(I)}function k(I){if(I===null){o&&J(),M(0),e.consume(I);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),E(I)}function E(I){if(I===null){T(e.exit("chunkFlow"),!0),M(0),e.consume(I);return}return Ee(I)?(e.consume(I),T(e.exit("chunkFlow")),s=0,t.interrupt=void 0,h):(e.consume(I),E)}function T(I,U){const X=t.sliceStream(I);if(U&&X.push(null),I.previous=a,a&&(a.next=I),a=I,o.defineSkip(I.start),o.write(X),t.parser.lazy[I.start.line]){let R=o.events.length;for(;R--;)if(o.events[R][1].start.offset<u&&(!o.events[R][1].end||o.events[R][1].end.offset>u))return;const se=t.events.length;let ie=se,le,me;for(;ie--;)if(t.events[ie][0]==="exit"&&t.events[ie][1].type==="chunkFlow"){if(le){me=t.events[ie][1].end;break}le=!0}for(M(s),R=se;R<t.events.length;)t.events[R][1].end={...me},R++;jr(t.events,ie+1,0,t.events.slice(se)),t.events.length=R}}function M(I){let U=i.length;for(;U-- >I;){const X=i[U];t.containerState=X[1],X[0].exit.call(t,e)}i.length=I}function J(){o.write([null]),a=void 0,o=void 0,t.containerState._closeFlow=void 0}}function Y0(e,t,i){return Ue(e,e.attempt(this.parser.constructs.document,t,i),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Fp(e){if(e===null||Gt(e)||U0(e))return 1;if(W0(e))return 2}function _h(e,t,i){const s=[];let o=-1;for(;++o<e.length;){const a=e[o].resolveAll;a&&!s.includes(a)&&(t=a(t,i),s.push(a))}return t}const yc={name:"attention",resolveAll:X0,tokenize:G0};function X0(e,t){let i=-1,s,o,a,u,h,p,d,m;for(;++i<e.length;)if(e[i][0]==="enter"&&e[i][1].type==="attentionSequence"&&e[i][1]._close){for(s=i;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[i][1]).charCodeAt(0)){if((e[s][1]._close||e[i][1]._open)&&(e[i][1].end.offset-e[i][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[i][1].end.offset-e[i][1].start.offset)%3))continue;p=e[s][1].end.offset-e[s][1].start.offset>1&&e[i][1].end.offset-e[i][1].start.offset>1?2:1;const g={...e[s][1].end},S={...e[i][1].start};Hp(g,-p),Hp(S,p),u={type:p>1?"strongSequence":"emphasisSequence",start:g,end:{...e[s][1].end}},h={type:p>1?"strongSequence":"emphasisSequence",start:{...e[i][1].start},end:S},a={type:p>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[i][1].start}},o={type:p>1?"strong":"emphasis",start:{...u.start},end:{...h.end}},e[s][1].end={...u.start},e[i][1].start={...h.end},d=[],e[s][1].end.offset-e[s][1].start.offset&&(d=vr(d,[["enter",e[s][1],t],["exit",e[s][1],t]])),d=vr(d,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",a,t]]),d=vr(d,_h(t.parser.constructs.insideSpan.null,e.slice(s+1,i),t)),d=vr(d,[["exit",a,t],["enter",h,t],["exit",h,t],["exit",o,t]]),e[i][1].end.offset-e[i][1].start.offset?(m=2,d=vr(d,[["enter",e[i][1],t],["exit",e[i][1],t]])):m=0,jr(e,s-1,i-s+3,d),i=s+d.length-m-2;break}}for(i=-1;++i<e.length;)e[i][1].type==="attentionSequence"&&(e[i][1].type="data");return e}function G0(e,t){const i=this.parser.constructs.attentionMarkers.null,s=this.previous,o=Fp(s);let a;return u;function u(p){return a=p,e.enter("attentionSequence"),h(p)}function h(p){if(p===a)return e.consume(p),h;const d=e.exit("attentionSequence"),m=Fp(p),g=!m||m===2&&o||i.includes(p),S=!o||o===2&&m||i.includes(s);return d._open=!!(a===42?g:g&&(o||!S)),d._close=!!(a===42?S:S&&(m||!g)),t(p)}}function Hp(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Q0={name:"autolink",tokenize:J0};function J0(e,t,i){let s=0;return o;function o(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(v){return zr(v)?(e.consume(v),u):v===64?i(v):d(v)}function u(v){return v===43||v===45||v===46||lr(v)?(s=1,h(v)):d(v)}function h(v){return v===58?(e.consume(v),s=0,p):(v===43||v===45||v===46||lr(v))&&s++<32?(e.consume(v),h):(s=0,d(v))}function p(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||gc(v)?i(v):(e.consume(v),p)}function d(v){return v===64?(e.consume(v),m):F0(v)?(e.consume(v),d):i(v)}function m(v){return lr(v)?g(v):i(v)}function g(v){return v===46?(e.consume(v),s=0,m):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):S(v)}function S(v){if((v===45||lr(v))&&s++<63){const k=v===45?S:g;return e.consume(v),k}return i(v)}}const $l={partial:!0,tokenize:Z0};function Z0(e,t,i){return s;function s(a){return Oe(a)?Ue(e,o,"linePrefix")(a):o(a)}function o(a){return a===null||Ee(a)?t(a):i(a)}}const km={continuation:{tokenize:tS},exit:rS,name:"blockQuote",tokenize:eS};function eS(e,t,i){const s=this;return o;function o(u){if(u===62){const h=s.containerState;return h.open||(e.enter("blockQuote",{_container:!0}),h.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(u),e.exit("blockQuoteMarker"),a}return i(u)}function a(u){return Oe(u)?(e.enter("blockQuotePrefixWhitespace"),e.consume(u),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(u))}}function tS(e,t,i){const s=this;return o;function o(u){return Oe(u)?Ue(e,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):a(u)}function a(u){return e.attempt(km,t,i)(u)}}function rS(e){e.exit("blockQuote")}const bm={name:"characterEscape",tokenize:iS};function iS(e,t,i){return s;function s(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),o}function o(a){return j0(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):i(a)}}const Em={name:"characterReference",tokenize:nS};function nS(e,t,i){const s=this;let o=0,a,u;return h;function h(g){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),p}function p(g){return g===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(g),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,u=lr,m(g))}function d(g){return g===88||g===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(g),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,u=H0,m):(e.enter("characterReferenceValue"),a=7,u=vc,m(g))}function m(g){if(g===59&&o){const S=e.exit("characterReferenceValue");return u===lr&&!ph(s.sliceSerialize(S))?i(g):(e.enter("characterReferenceMarker"),e.consume(g),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return u(g)&&o++<a?(e.consume(g),m):i(g)}}const jp={partial:!0,tokenize:oS},Wp={concrete:!0,name:"codeFenced",tokenize:sS};function sS(e,t,i){const s=this,o={partial:!0,tokenize:X};let a=0,u=0,h;return p;function p(R){return d(R)}function d(R){const se=s.events[s.events.length-1];return a=se&&se[1].type==="linePrefix"?se[2].sliceSerialize(se[1],!0).length:0,h=R,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(R)}function m(R){return R===h?(u++,e.consume(R),m):u<3?i(R):(e.exit("codeFencedFenceSequence"),Oe(R)?Ue(e,g,"whitespace")(R):g(R))}function g(R){return R===null||Ee(R)?(e.exit("codeFencedFence"),s.interrupt?t(R):e.check(jp,E,U)(R)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),S(R))}function S(R){return R===null||Ee(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),g(R)):Oe(R)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ue(e,v,"whitespace")(R)):R===96&&R===h?i(R):(e.consume(R),S)}function v(R){return R===null||Ee(R)?g(R):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),k(R))}function k(R){return R===null||Ee(R)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(R)):R===96&&R===h?i(R):(e.consume(R),k)}function E(R){return e.attempt(o,U,T)(R)}function T(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),M}function M(R){return a>0&&Oe(R)?Ue(e,J,"linePrefix",a+1)(R):J(R)}function J(R){return R===null||Ee(R)?e.check(jp,E,U)(R):(e.enter("codeFlowValue"),I(R))}function I(R){return R===null||Ee(R)?(e.exit("codeFlowValue"),J(R)):(e.consume(R),I)}function U(R){return e.exit("codeFenced"),t(R)}function X(R,se,ie){let le=0;return me;function me(O){return R.enter("lineEnding"),R.consume(O),R.exit("lineEnding"),Q}function Q(O){return R.enter("codeFencedFence"),Oe(O)?Ue(R,W,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):W(O)}function W(O){return O===h?(R.enter("codeFencedFenceSequence"),j(O)):ie(O)}function j(O){return O===h?(le++,R.consume(O),j):le>=u?(R.exit("codeFencedFenceSequence"),Oe(O)?Ue(R,B,"whitespace")(O):B(O)):ie(O)}function B(O){return O===null||Ee(O)?(R.exit("codeFencedFence"),se(O)):ie(O)}}}function oS(e,t,i){const s=this;return o;function o(u){return u===null?i(u):(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a)}function a(u){return s.parser.lazy[s.now().line]?i(u):t(u)}}const $u={name:"codeIndented",tokenize:aS},lS={partial:!0,tokenize:uS};function aS(e,t,i){const s=this;return o;function o(d){return e.enter("codeIndented"),Ue(e,a,"linePrefix",5)(d)}function a(d){const m=s.events[s.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?u(d):i(d)}function u(d){return d===null?p(d):Ee(d)?e.attempt(lS,u,p)(d):(e.enter("codeFlowValue"),h(d))}function h(d){return d===null||Ee(d)?(e.exit("codeFlowValue"),u(d)):(e.consume(d),h)}function p(d){return e.exit("codeIndented"),t(d)}}function uS(e,t,i){const s=this;return o;function o(u){return s.parser.lazy[s.now().line]?i(u):Ee(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),o):Ue(e,a,"linePrefix",5)(u)}function a(u){const h=s.events[s.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?t(u):Ee(u)?o(u):i(u)}}const cS={name:"codeText",previous:dS,resolve:hS,tokenize:fS};function hS(e){let t=e.length-4,i=3,s,o;if((e[i][1].type==="lineEnding"||e[i][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=i;++s<t;)if(e[s][1].type==="codeTextData"){e[i][1].type="codeTextPadding",e[t][1].type="codeTextPadding",i+=2,t-=2;break}}for(s=i-1,t++;++s<=t;)o===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(o=s):(s===t||e[s][1].type==="lineEnding")&&(e[o][1].type="codeTextData",s!==o+2&&(e[o][1].end=e[s-1][1].end,e.splice(o+2,s-o-2),t-=s-o-2,s=o+2),o=void 0);return e}function dS(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function fS(e,t,i){let s=0,o,a;return u;function u(g){return e.enter("codeText"),e.enter("codeTextSequence"),h(g)}function h(g){return g===96?(e.consume(g),s++,h):(e.exit("codeTextSequence"),p(g))}function p(g){return g===null?i(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),p):g===96?(a=e.enter("codeTextSequence"),o=0,m(g)):Ee(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),p):(e.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||Ee(g)?(e.exit("codeTextData"),p(g)):(e.consume(g),d)}function m(g){return g===96?(e.consume(g),o++,m):o===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(a.type="codeTextData",d(g))}}class pS{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,i){const s=i??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,i,s){const o=i||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return s&&Ds(this.left,s),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ds(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ds(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const i=this.left.splice(t,Number.POSITIVE_INFINITY);Ds(this.right,i.reverse())}else{const i=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ds(this.left,i.reverse())}}}function Ds(e,t){let i=0;if(t.length<1e4)e.push(...t);else for(;i<t.length;)e.push(...t.slice(i,i+1e4)),i+=1e4}function Pm(e){const t={};let i=-1,s,o,a,u,h,p,d;const m=new pS(e);for(;++i<m.length;){for(;i in t;)i=t[i];if(s=m.get(i),i&&s[1].type==="chunkFlow"&&m.get(i-1)[1].type==="listItemPrefix"&&(p=s[1]._tokenizer.events,a=0,a<p.length&&p[a][1].type==="lineEndingBlank"&&(a+=2),a<p.length&&p[a][1].type==="content"))for(;++a<p.length&&p[a][1].type!=="content";)p[a][1].type==="chunkText"&&(p[a][1]._isInFirstContentOfListItem=!0,a++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,_S(m,i)),i=t[i],d=!0);else if(s[1]._container){for(a=i,o=void 0;a--;)if(u=m.get(a),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(o&&(m.get(o)[1].type="lineEndingBlank"),u[1].type="lineEnding",o=a);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;o&&(s[1].end={...m.get(o)[1].start},h=m.slice(o,i),h.unshift(s),m.splice(o,i-o+1,h))}}return jr(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function _S(e,t){const i=e.get(t)[1],s=e.get(t)[2];let o=t-1;const a=[];let u=i._tokenizer;u||(u=s.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const h=u.events,p=[],d={};let m,g,S=-1,v=i,k=0,E=0;const T=[E];for(;v;){for(;e.get(++o)[1]!==v;);a.push(o),v._tokenizer||(m=s.sliceStream(v),v.next||m.push(null),g&&u.defineSkip(v.start),v._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(m),v._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),g=v,v=v.next}for(v=i;++S<h.length;)h[S][0]==="exit"&&h[S-1][0]==="enter"&&h[S][1].type===h[S-1][1].type&&h[S][1].start.line!==h[S][1].end.line&&(E=S+1,T.push(E),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(u.events=[],v?(v._tokenizer=void 0,v.previous=void 0):T.pop(),S=T.length;S--;){const M=h.slice(T[S],T[S+1]),J=a.pop();p.push([J,J+M.length-1]),e.splice(J,2,M)}for(p.reverse(),S=-1;++S<p.length;)d[k+p[S][0]]=k+p[S][1],k+=p[S][1]-p[S][0]-1;return d}const mS={resolve:vS,tokenize:yS},gS={partial:!0,tokenize:SS};function vS(e){return Pm(e),e}function yS(e,t){let i;return s;function s(h){return e.enter("content"),i=e.enter("chunkContent",{contentType:"content"}),o(h)}function o(h){return h===null?a(h):Ee(h)?e.check(gS,u,a)(h):(e.consume(h),o)}function a(h){return e.exit("chunkContent"),e.exit("content"),t(h)}function u(h){return e.consume(h),e.exit("chunkContent"),i.next=e.enter("chunkContent",{contentType:"content",previous:i}),i=i.next,o}}function SS(e,t,i){const s=this;return o;function o(u){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),Ue(e,a,"linePrefix")}function a(u){if(u===null||Ee(u))return i(u);const h=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?t(u):e.interrupt(s.parser.constructs.flow,i,t)(u)}}function Rm(e,t,i,s,o,a,u,h,p){const d=p||Number.POSITIVE_INFINITY;let m=0;return g;function g(M){return M===60?(e.enter(s),e.enter(o),e.enter(a),e.consume(M),e.exit(a),S):M===null||M===32||M===41||gc(M)?i(M):(e.enter(s),e.enter(u),e.enter(h),e.enter("chunkString",{contentType:"string"}),E(M))}function S(M){return M===62?(e.enter(a),e.consume(M),e.exit(a),e.exit(o),e.exit(s),t):(e.enter(h),e.enter("chunkString",{contentType:"string"}),v(M))}function v(M){return M===62?(e.exit("chunkString"),e.exit(h),S(M)):M===null||M===60||Ee(M)?i(M):(e.consume(M),M===92?k:v)}function k(M){return M===60||M===62||M===92?(e.consume(M),v):v(M)}function E(M){return!m&&(M===null||M===41||Gt(M))?(e.exit("chunkString"),e.exit(h),e.exit(u),e.exit(s),t(M)):m<d&&M===40?(e.consume(M),m++,E):M===41?(e.consume(M),m--,E):M===null||M===32||M===40||gc(M)?i(M):(e.consume(M),M===92?T:E)}function T(M){return M===40||M===41||M===92?(e.consume(M),E):E(M)}}function Lm(e,t,i,s,o,a){const u=this;let h=0,p;return d;function d(v){return e.enter(s),e.enter(o),e.consume(v),e.exit(o),e.enter(a),m}function m(v){return h>999||v===null||v===91||v===93&&!p||v===94&&!h&&"_hiddenFootnoteSupport"in u.parser.constructs?i(v):v===93?(e.exit(a),e.enter(o),e.consume(v),e.exit(o),e.exit(s),t):Ee(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===null||v===91||v===93||Ee(v)||h++>999?(e.exit("chunkString"),m(v)):(e.consume(v),p||(p=!Oe(v)),v===92?S:g)}function S(v){return v===91||v===92||v===93?(e.consume(v),h++,g):g(v)}}function Dm(e,t,i,s,o,a){let u;return h;function h(S){return S===34||S===39||S===40?(e.enter(s),e.enter(o),e.consume(S),e.exit(o),u=S===40?41:S,p):i(S)}function p(S){return S===u?(e.enter(o),e.consume(S),e.exit(o),e.exit(s),t):(e.enter(a),d(S))}function d(S){return S===u?(e.exit(a),p(u)):S===null?i(S):Ee(S)?(e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),Ue(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===u||S===null||Ee(S)?(e.exit("chunkString"),d(S)):(e.consume(S),S===92?g:m)}function g(S){return S===u||S===92?(e.consume(S),m):m(S)}}function $s(e,t){let i;return s;function s(o){return Ee(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i=!0,s):Oe(o)?Ue(e,s,i?"linePrefix":"lineSuffix")(o):t(o)}}const wS={name:"definition",tokenize:CS},xS={partial:!0,tokenize:kS};function CS(e,t,i){const s=this;let o;return a;function a(v){return e.enter("definition"),u(v)}function u(v){return Lm.call(s,e,h,i,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function h(v){return o=An(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),p):i(v)}function p(v){return Gt(v)?$s(e,d)(v):d(v)}function d(v){return Rm(e,m,i,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function m(v){return e.attempt(xS,g,g)(v)}function g(v){return Oe(v)?Ue(e,S,"whitespace")(v):S(v)}function S(v){return v===null||Ee(v)?(e.exit("definition"),s.parser.defined.push(o),t(v)):i(v)}}function kS(e,t,i){return s;function s(h){return Gt(h)?$s(e,o)(h):i(h)}function o(h){return Dm(e,a,i,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function a(h){return Oe(h)?Ue(e,u,"whitespace")(h):u(h)}function u(h){return h===null||Ee(h)?t(h):i(h)}}const bS={name:"hardBreakEscape",tokenize:ES};function ES(e,t,i){return s;function s(a){return e.enter("hardBreakEscape"),e.consume(a),o}function o(a){return Ee(a)?(e.exit("hardBreakEscape"),t(a)):i(a)}}const PS={name:"headingAtx",resolve:RS,tokenize:LS};function RS(e,t){let i=e.length-2,s=3,o,a;return e[s][1].type==="whitespace"&&(s+=2),i-2>s&&e[i][1].type==="whitespace"&&(i-=2),e[i][1].type==="atxHeadingSequence"&&(s===i-1||i-4>s&&e[i-2][1].type==="whitespace")&&(i-=s+1===i?2:4),i>s&&(o={type:"atxHeadingText",start:e[s][1].start,end:e[i][1].end},a={type:"chunkText",start:e[s][1].start,end:e[i][1].end,contentType:"text"},jr(e,s,i-s+1,[["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t]])),e}function LS(e,t,i){let s=0;return o;function o(m){return e.enter("atxHeading"),a(m)}function a(m){return e.enter("atxHeadingSequence"),u(m)}function u(m){return m===35&&s++<6?(e.consume(m),u):m===null||Gt(m)?(e.exit("atxHeadingSequence"),h(m)):i(m)}function h(m){return m===35?(e.enter("atxHeadingSequence"),p(m)):m===null||Ee(m)?(e.exit("atxHeading"),t(m)):Oe(m)?Ue(e,h,"whitespace")(m):(e.enter("atxHeadingText"),d(m))}function p(m){return m===35?(e.consume(m),p):(e.exit("atxHeadingSequence"),h(m))}function d(m){return m===null||m===35||Gt(m)?(e.exit("atxHeadingText"),h(m)):(e.consume(m),d)}}const DS=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Up=["pre","script","style","textarea"],TS={concrete:!0,name:"htmlFlow",resolveTo:BS,tokenize:IS},MS={partial:!0,tokenize:OS},NS={partial:!0,tokenize:AS};function BS(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function IS(e,t,i){const s=this;let o,a,u,h,p;return d;function d(x){return m(x)}function m(x){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(x),g}function g(x){return x===33?(e.consume(x),S):x===47?(e.consume(x),a=!0,E):x===63?(e.consume(x),o=3,s.interrupt?t:w):zr(x)?(e.consume(x),u=String.fromCharCode(x),T):i(x)}function S(x){return x===45?(e.consume(x),o=2,v):x===91?(e.consume(x),o=5,h=0,k):zr(x)?(e.consume(x),o=4,s.interrupt?t:w):i(x)}function v(x){return x===45?(e.consume(x),s.interrupt?t:w):i(x)}function k(x){const ae="CDATA[";return x===ae.charCodeAt(h++)?(e.consume(x),h===ae.length?s.interrupt?t:W:k):i(x)}function E(x){return zr(x)?(e.consume(x),u=String.fromCharCode(x),T):i(x)}function T(x){if(x===null||x===47||x===62||Gt(x)){const ae=x===47,ve=u.toLowerCase();return!ae&&!a&&Up.includes(ve)?(o=1,s.interrupt?t(x):W(x)):DS.includes(u.toLowerCase())?(o=6,ae?(e.consume(x),M):s.interrupt?t(x):W(x)):(o=7,s.interrupt&&!s.parser.lazy[s.now().line]?i(x):a?J(x):I(x))}return x===45||lr(x)?(e.consume(x),u+=String.fromCharCode(x),T):i(x)}function M(x){return x===62?(e.consume(x),s.interrupt?t:W):i(x)}function J(x){return Oe(x)?(e.consume(x),J):me(x)}function I(x){return x===47?(e.consume(x),me):x===58||x===95||zr(x)?(e.consume(x),U):Oe(x)?(e.consume(x),I):me(x)}function U(x){return x===45||x===46||x===58||x===95||lr(x)?(e.consume(x),U):X(x)}function X(x){return x===61?(e.consume(x),R):Oe(x)?(e.consume(x),X):I(x)}function R(x){return x===null||x===60||x===61||x===62||x===96?i(x):x===34||x===39?(e.consume(x),p=x,se):Oe(x)?(e.consume(x),R):ie(x)}function se(x){return x===p?(e.consume(x),p=null,le):x===null||Ee(x)?i(x):(e.consume(x),se)}function ie(x){return x===null||x===34||x===39||x===47||x===60||x===61||x===62||x===96||Gt(x)?X(x):(e.consume(x),ie)}function le(x){return x===47||x===62||Oe(x)?I(x):i(x)}function me(x){return x===62?(e.consume(x),Q):i(x)}function Q(x){return x===null||Ee(x)?W(x):Oe(x)?(e.consume(x),Q):i(x)}function W(x){return x===45&&o===2?(e.consume(x),K):x===60&&o===1?(e.consume(x),ee):x===62&&o===4?(e.consume(x),L):x===63&&o===3?(e.consume(x),w):x===93&&o===5?(e.consume(x),re):Ee(x)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(MS,A,j)(x)):x===null||Ee(x)?(e.exit("htmlFlowData"),j(x)):(e.consume(x),W)}function j(x){return e.check(NS,B,A)(x)}function B(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),O}function O(x){return x===null||Ee(x)?j(x):(e.enter("htmlFlowData"),W(x))}function K(x){return x===45?(e.consume(x),w):W(x)}function ee(x){return x===47?(e.consume(x),u="",z):W(x)}function z(x){if(x===62){const ae=u.toLowerCase();return Up.includes(ae)?(e.consume(x),L):W(x)}return zr(x)&&u.length<8?(e.consume(x),u+=String.fromCharCode(x),z):W(x)}function re(x){return x===93?(e.consume(x),w):W(x)}function w(x){return x===62?(e.consume(x),L):x===45&&o===2?(e.consume(x),w):W(x)}function L(x){return x===null||Ee(x)?(e.exit("htmlFlowData"),A(x)):(e.consume(x),L)}function A(x){return e.exit("htmlFlow"),t(x)}}function AS(e,t,i){const s=this;return o;function o(u){return Ee(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),a):i(u)}function a(u){return s.parser.lazy[s.now().line]?i(u):t(u)}}function OS(e,t,i){return s;function s(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt($l,t,i)}}const zS={name:"htmlText",tokenize:FS};function FS(e,t,i){const s=this;let o,a,u;return h;function h(w){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(w),p}function p(w){return w===33?(e.consume(w),d):w===47?(e.consume(w),X):w===63?(e.consume(w),I):zr(w)?(e.consume(w),ie):i(w)}function d(w){return w===45?(e.consume(w),m):w===91?(e.consume(w),a=0,k):zr(w)?(e.consume(w),J):i(w)}function m(w){return w===45?(e.consume(w),v):i(w)}function g(w){return w===null?i(w):w===45?(e.consume(w),S):Ee(w)?(u=g,ee(w)):(e.consume(w),g)}function S(w){return w===45?(e.consume(w),v):g(w)}function v(w){return w===62?K(w):w===45?S(w):g(w)}function k(w){const L="CDATA[";return w===L.charCodeAt(a++)?(e.consume(w),a===L.length?E:k):i(w)}function E(w){return w===null?i(w):w===93?(e.consume(w),T):Ee(w)?(u=E,ee(w)):(e.consume(w),E)}function T(w){return w===93?(e.consume(w),M):E(w)}function M(w){return w===62?K(w):w===93?(e.consume(w),M):E(w)}function J(w){return w===null||w===62?K(w):Ee(w)?(u=J,ee(w)):(e.consume(w),J)}function I(w){return w===null?i(w):w===63?(e.consume(w),U):Ee(w)?(u=I,ee(w)):(e.consume(w),I)}function U(w){return w===62?K(w):I(w)}function X(w){return zr(w)?(e.consume(w),R):i(w)}function R(w){return w===45||lr(w)?(e.consume(w),R):se(w)}function se(w){return Ee(w)?(u=se,ee(w)):Oe(w)?(e.consume(w),se):K(w)}function ie(w){return w===45||lr(w)?(e.consume(w),ie):w===47||w===62||Gt(w)?le(w):i(w)}function le(w){return w===47?(e.consume(w),K):w===58||w===95||zr(w)?(e.consume(w),me):Ee(w)?(u=le,ee(w)):Oe(w)?(e.consume(w),le):K(w)}function me(w){return w===45||w===46||w===58||w===95||lr(w)?(e.consume(w),me):Q(w)}function Q(w){return w===61?(e.consume(w),W):Ee(w)?(u=Q,ee(w)):Oe(w)?(e.consume(w),Q):le(w)}function W(w){return w===null||w===60||w===61||w===62||w===96?i(w):w===34||w===39?(e.consume(w),o=w,j):Ee(w)?(u=W,ee(w)):Oe(w)?(e.consume(w),W):(e.consume(w),B)}function j(w){return w===o?(e.consume(w),o=void 0,O):w===null?i(w):Ee(w)?(u=j,ee(w)):(e.consume(w),j)}function B(w){return w===null||w===34||w===39||w===60||w===61||w===96?i(w):w===47||w===62||Gt(w)?le(w):(e.consume(w),B)}function O(w){return w===47||w===62||Gt(w)?le(w):i(w)}function K(w){return w===62?(e.consume(w),e.exit("htmlTextData"),e.exit("htmlText"),t):i(w)}function ee(w){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),z}function z(w){return Oe(w)?Ue(e,re,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):re(w)}function re(w){return e.enter("htmlTextData"),u(w)}}const mh={name:"labelEnd",resolveAll:US,resolveTo:$S,tokenize:VS},HS={tokenize:KS},jS={tokenize:qS},WS={tokenize:YS};function US(e){let t=-1;const i=[];for(;++t<e.length;){const s=e[t][1];if(i.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const o=s.type==="labelImage"?4:2;s.type="data",t+=o}}return e.length!==i.length&&jr(e,0,e.length,i),e}function $S(e,t){let i=e.length,s=0,o,a,u,h;for(;i--;)if(o=e[i][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[i][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(u){if(e[i][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=i,o.type!=="labelLink")){s=2;break}}else o.type==="labelEnd"&&(u=i);const p={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[u][1].end}},m={type:"labelText",start:{...e[a+s+2][1].end},end:{...e[u-2][1].start}};return h=[["enter",p,t],["enter",d,t]],h=vr(h,e.slice(a+1,a+s+3)),h=vr(h,[["enter",m,t]]),h=vr(h,_h(t.parser.constructs.insideSpan.null,e.slice(a+s+4,u-3),t)),h=vr(h,[["exit",m,t],e[u-2],e[u-1],["exit",d,t]]),h=vr(h,e.slice(u+1)),h=vr(h,[["exit",p,t]]),jr(e,a,e.length,h),e}function VS(e,t,i){const s=this;let o=s.events.length,a,u;for(;o--;)if((s.events[o][1].type==="labelImage"||s.events[o][1].type==="labelLink")&&!s.events[o][1]._balanced){a=s.events[o][1];break}return h;function h(S){return a?a._inactive?g(S):(u=s.parser.defined.includes(An(s.sliceSerialize({start:a.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(S),e.exit("labelMarker"),e.exit("labelEnd"),p):i(S)}function p(S){return S===40?e.attempt(HS,m,u?m:g)(S):S===91?e.attempt(jS,m,u?d:g)(S):u?m(S):g(S)}function d(S){return e.attempt(WS,m,g)(S)}function m(S){return t(S)}function g(S){return a._balanced=!0,i(S)}}function KS(e,t,i){return s;function s(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),o}function o(g){return Gt(g)?$s(e,a)(g):a(g)}function a(g){return g===41?m(g):Rm(e,u,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function u(g){return Gt(g)?$s(e,p)(g):m(g)}function h(g){return i(g)}function p(g){return g===34||g===39||g===40?Dm(e,d,i,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):m(g)}function d(g){return Gt(g)?$s(e,m)(g):m(g)}function m(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):i(g)}}function qS(e,t,i){const s=this;return o;function o(h){return Lm.call(s,e,a,u,"reference","referenceMarker","referenceString")(h)}function a(h){return s.parser.defined.includes(An(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(h):i(h)}function u(h){return i(h)}}function YS(e,t,i){return s;function s(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),o}function o(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):i(a)}}const XS={name:"labelStartImage",resolveAll:mh.resolveAll,tokenize:GS};function GS(e,t,i){const s=this;return o;function o(h){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(h),e.exit("labelImageMarker"),a}function a(h){return h===91?(e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelImage"),u):i(h)}function u(h){return h===94&&"_hiddenFootnoteSupport"in s.parser.constructs?i(h):t(h)}}const QS={name:"labelStartLink",resolveAll:mh.resolveAll,tokenize:JS};function JS(e,t,i){const s=this;return o;function o(u){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelLink"),a}function a(u){return u===94&&"_hiddenFootnoteSupport"in s.parser.constructs?i(u):t(u)}}const Vu={name:"lineEnding",tokenize:ZS};function ZS(e,t){return i;function i(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Ue(e,t,"linePrefix")}}const Pl={name:"thematicBreak",tokenize:e1};function e1(e,t,i){let s=0,o;return a;function a(d){return e.enter("thematicBreak"),u(d)}function u(d){return o=d,h(d)}function h(d){return d===o?(e.enter("thematicBreakSequence"),p(d)):s>=3&&(d===null||Ee(d))?(e.exit("thematicBreak"),t(d)):i(d)}function p(d){return d===o?(e.consume(d),s++,p):(e.exit("thematicBreakSequence"),Oe(d)?Ue(e,h,"whitespace")(d):h(d))}}const Xt={continuation:{tokenize:n1},exit:o1,name:"list",tokenize:i1},t1={partial:!0,tokenize:l1},r1={partial:!0,tokenize:s1};function i1(e,t,i){const s=this,o=s.events[s.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,u=0;return h;function h(v){const k=s.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!s.containerState.marker||v===s.containerState.marker:vc(v)){if(s.containerState.type||(s.containerState.type=k,e.enter(k,{_container:!0})),k==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Pl,i,d)(v):d(v);if(!s.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(v)}return i(v)}function p(v){return vc(v)&&++u<10?(e.consume(v),p):(!s.interrupt||u<2)&&(s.containerState.marker?v===s.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),d(v)):i(v)}function d(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||v,e.check($l,s.interrupt?i:m,e.attempt(t1,S,g))}function m(v){return s.containerState.initialBlankLine=!0,a++,S(v)}function g(v){return Oe(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),S):i(v)}function S(v){return s.containerState.size=a+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function n1(e,t,i){const s=this;return s.containerState._closeFlow=void 0,e.check($l,o,a);function o(h){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Ue(e,t,"listItemIndent",s.containerState.size+1)(h)}function a(h){return s.containerState.furtherBlankLines||!Oe(h)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,u(h)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(r1,t,u)(h))}function u(h){return s.containerState._closeFlow=!0,s.interrupt=void 0,Ue(e,e.attempt(Xt,t,i),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function s1(e,t,i){const s=this;return Ue(e,o,"listItemIndent",s.containerState.size+1);function o(a){const u=s.events[s.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===s.containerState.size?t(a):i(a)}}function o1(e){e.exit(this.containerState.type)}function l1(e,t,i){const s=this;return Ue(e,o,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const u=s.events[s.events.length-1];return!Oe(a)&&u&&u[1].type==="listItemPrefixWhitespace"?t(a):i(a)}}const $p={name:"setextUnderline",resolveTo:a1,tokenize:u1};function a1(e,t){let i=e.length,s,o,a;for(;i--;)if(e[i][0]==="enter"){if(e[i][1].type==="content"){s=i;break}e[i][1].type==="paragraph"&&(o=i)}else e[i][1].type==="content"&&e.splice(i,1),!a&&e[i][1].type==="definition"&&(a=i);const u={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",a?(e.splice(o,0,["enter",u,t]),e.splice(a+1,0,["exit",e[s][1],t]),e[s][1].end={...e[a][1].end}):e[s][1]=u,e.push(["exit",u,t]),e}function u1(e,t,i){const s=this;let o;return a;function a(d){let m=s.events.length,g;for(;m--;)if(s.events[m][1].type!=="lineEnding"&&s.events[m][1].type!=="linePrefix"&&s.events[m][1].type!=="content"){g=s.events[m][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||g)?(e.enter("setextHeadingLine"),o=d,u(d)):i(d)}function u(d){return e.enter("setextHeadingLineSequence"),h(d)}function h(d){return d===o?(e.consume(d),h):(e.exit("setextHeadingLineSequence"),Oe(d)?Ue(e,p,"lineSuffix")(d):p(d))}function p(d){return d===null||Ee(d)?(e.exit("setextHeadingLine"),t(d)):i(d)}}const c1={tokenize:h1};function h1(e){const t=this,i=e.attempt($l,s,e.attempt(this.parser.constructs.flowInitial,o,Ue(e,e.attempt(this.parser.constructs.flow,o,e.attempt(mS,o)),"linePrefix")));return i;function s(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,i}function o(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,i}}const d1={resolveAll:Mm()},f1=Tm("string"),p1=Tm("text");function Tm(e){return{resolveAll:Mm(e==="text"?_1:void 0),tokenize:t};function t(i){const s=this,o=this.parser.constructs[e],a=i.attempt(o,u,h);return u;function u(m){return d(m)?a(m):h(m)}function h(m){if(m===null){i.consume(m);return}return i.enter("data"),i.consume(m),p}function p(m){return d(m)?(i.exit("data"),a(m)):(i.consume(m),p)}function d(m){if(m===null)return!0;const g=o[m];let S=-1;if(g)for(;++S<g.length;){const v=g[S];if(!v.previous||v.previous.call(s,s.previous))return!0}return!1}}}function Mm(e){return t;function t(i,s){let o=-1,a;for(;++o<=i.length;)a===void 0?i[o]&&i[o][1].type==="data"&&(a=o,o++):(!i[o]||i[o][1].type!=="data")&&(o!==a+2&&(i[a][1].end=i[o-1][1].end,i.splice(a+2,o-a-2),o=a+2),a=void 0);return e?e(i,s):i}}function _1(e,t){let i=0;for(;++i<=e.length;)if((i===e.length||e[i][1].type==="lineEnding")&&e[i-1][1].type==="data"){const s=e[i-1][1],o=t.sliceStream(s);let a=o.length,u=-1,h=0,p;for(;a--;){const d=o[a];if(typeof d=="string"){for(u=d.length;d.charCodeAt(u-1)===32;)h++,u--;if(u)break;u=-1}else if(d===-2)p=!0,h++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&i===e.length&&(h=0),h){const d={type:i===e.length||p||h<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?u:s.start._bufferIndex+u,_index:s.start._index+a,line:s.end.line,column:s.end.column-h,offset:s.end.offset-h},end:{...s.end}};s.end={...d.start},s.start.offset===s.end.offset?Object.assign(s,d):(e.splice(i,0,["enter",d,t],["exit",d,t]),i+=2)}i++}return e}const m1={42:Xt,43:Xt,45:Xt,48:Xt,49:Xt,50:Xt,51:Xt,52:Xt,53:Xt,54:Xt,55:Xt,56:Xt,57:Xt,62:km},g1={91:wS},v1={[-2]:$u,[-1]:$u,32:$u},y1={35:PS,42:Pl,45:[$p,Pl],60:TS,61:$p,95:Pl,96:Wp,126:Wp},S1={38:Em,92:bm},w1={[-5]:Vu,[-4]:Vu,[-3]:Vu,33:XS,38:Em,42:yc,60:[Q0,zS],91:QS,92:[bS,bm],93:mh,95:yc,96:cS},x1={null:[yc,d1]},C1={null:[42,95]},k1={null:[]},b1=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:C1,contentInitial:g1,disable:k1,document:m1,flow:y1,flowInitial:v1,insideSpan:x1,string:S1,text:w1},Symbol.toStringTag,{value:"Module"}));function E1(e,t,i){let s={_bufferIndex:-1,_index:0,line:i&&i.line||1,column:i&&i.column||1,offset:i&&i.offset||0};const o={},a=[];let u=[],h=[];const p={attempt:se(X),check:se(R),consume:J,enter:I,exit:U,interrupt:se(R,{interrupt:!0})},d={code:null,containerState:{},defineSkip:E,events:[],now:k,parser:e,previous:null,sliceSerialize:S,sliceStream:v,write:g};let m=t.tokenize.call(d,p);return t.resolveAll&&a.push(t),d;function g(Q){return u=vr(u,Q),T(),u[u.length-1]!==null?[]:(ie(t,0),d.events=_h(a,d.events,d),d.events)}function S(Q,W){return R1(v(Q),W)}function v(Q){return P1(u,Q)}function k(){const{_bufferIndex:Q,_index:W,line:j,column:B,offset:O}=s;return{_bufferIndex:Q,_index:W,line:j,column:B,offset:O}}function E(Q){o[Q.line]=Q.column,me()}function T(){let Q;for(;s._index<u.length;){const W=u[s._index];if(typeof W=="string")for(Q=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===Q&&s._bufferIndex<W.length;)M(W.charCodeAt(s._bufferIndex));else M(W)}}function M(Q){m=m(Q)}function J(Q){Ee(Q)?(s.line++,s.column=1,s.offset+=Q===-3?2:1,me()):Q!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===u[s._index].length&&(s._bufferIndex=-1,s._index++)),d.previous=Q}function I(Q,W){const j=W||{};return j.type=Q,j.start=k(),d.events.push(["enter",j,d]),h.push(j),j}function U(Q){const W=h.pop();return W.end=k(),d.events.push(["exit",W,d]),W}function X(Q,W){ie(Q,W.from)}function R(Q,W){W.restore()}function se(Q,W){return j;function j(B,O,K){let ee,z,re,w;return Array.isArray(B)?A(B):"tokenize"in B?A([B]):L(B);function L(he){return we;function we(Ce){const Pe=Ce!==null&&he[Ce],Fe=Ce!==null&&he.null,It=[...Array.isArray(Pe)?Pe:Pe?[Pe]:[],...Array.isArray(Fe)?Fe:Fe?[Fe]:[]];return A(It)(Ce)}}function A(he){return ee=he,z=0,he.length===0?K:x(he[z])}function x(he){return we;function we(Ce){return w=le(),re=he,he.partial||(d.currentConstruct=he),he.name&&d.parser.constructs.disable.null.includes(he.name)?ve():he.tokenize.call(W?Object.assign(Object.create(d),W):d,p,ae,ve)(Ce)}}function ae(he){return Q(re,w),O}function ve(he){return w.restore(),++z<ee.length?x(ee[z]):K}}}function ie(Q,W){Q.resolveAll&&!a.includes(Q)&&a.push(Q),Q.resolve&&jr(d.events,W,d.events.length-W,Q.resolve(d.events.slice(W),d)),Q.resolveTo&&(d.events=Q.resolveTo(d.events,d))}function le(){const Q=k(),W=d.previous,j=d.currentConstruct,B=d.events.length,O=Array.from(h);return{from:B,restore:K};function K(){s=Q,d.previous=W,d.currentConstruct=j,d.events.length=B,h=O,me()}}function me(){s.line in o&&s.column<2&&(s.column=o[s.line],s.offset+=o[s.line]-1)}}function P1(e,t){const i=t.start._index,s=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;let u;if(i===o)u=[e[i].slice(s,a)];else{if(u=e.slice(i,o),s>-1){const h=u[0];typeof h=="string"?u[0]=h.slice(s):u.shift()}a>0&&u.push(e[o].slice(0,a))}return u}function R1(e,t){let i=-1;const s=[];let o;for(;++i<e.length;){const a=e[i];let u;if(typeof a=="string")u=a;else switch(a){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&o)continue;u=" ";break}default:u=String.fromCharCode(a)}o=a===-2,s.push(u)}return s.join("")}function L1(e){const s={constructs:A0([b1,...(e||{}).extensions||[]]),content:o($0),defined:[],document:o(K0),flow:o(c1),lazy:{},string:o(f1),text:o(p1)};return s;function o(a){return u;function u(h){return E1(s,a,h)}}}function D1(e){for(;!Pm(e););return e}const Vp=/[\0\t\n\r]/g;function T1(){let e=1,t="",i=!0,s;return o;function o(a,u,h){const p=[];let d,m,g,S,v;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(u||void 0).decode(a)),g=0,t="",i&&(a.charCodeAt(0)===65279&&g++,i=void 0);g<a.length;){if(Vp.lastIndex=g,d=Vp.exec(a),S=d&&d.index!==void 0?d.index:a.length,v=a.charCodeAt(S),!d){t=a.slice(g);break}if(v===10&&g===S&&s)p.push(-3),s=void 0;else switch(s&&(p.push(-5),s=void 0),g<S&&(p.push(a.slice(g,S)),e+=S-g),v){case 0:{p.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,p.push(-2);e++<m;)p.push(-1);break}case 10:{p.push(-4),e=1;break}default:s=!0,e=1}g=S+1}return h&&(s&&p.push(-5),t&&p.push(t),p.push(null)),p}}const M1=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function N1(e){return e.replace(M1,B1)}function B1(e,t,i){if(t)return t;if(i.charCodeAt(0)===35){const o=i.charCodeAt(1),a=o===120||o===88;return Cm(i.slice(a?2:1),a?16:10)}return ph(i)||e}const Nm={}.hasOwnProperty;function I1(e,t,i){return t&&typeof t=="object"&&(i=t,t=void 0),A1(i)(D1(L1(i).document().write(T1()(e,t,!0))))}function A1(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(nn),autolinkProtocol:le,autolinkEmail:le,atxHeading:a(Wn),blockQuote:a(Fe),characterEscape:le,characterReference:le,codeFenced:a(It),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(It,u),codeText:a(Jt,u),codeTextData:le,data:le,codeFlowValue:le,definition:a(Ne),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(Ur),hardBreakEscape:a(Un),hardBreakTrailing:a(Un),htmlFlow:a(rn,u),htmlFlowData:le,htmlText:a(rn,u),htmlTextData:le,image:a(io),label:u,link:a(nn),listItem:a(ni),listItemValue:S,listOrdered:a(ii,g),listUnordered:a(ii),paragraph:a($n),reference:x,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(Wn),strong:a(no),thematicBreak:a(oo)},exit:{atxHeading:p(),atxHeadingSequence:X,autolink:p(),autolinkEmail:Pe,autolinkProtocol:Ce,blockQuote:p(),characterEscapeValue:me,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:he,characterReference:we,codeFenced:p(T),codeFencedFence:E,codeFencedFenceInfo:v,codeFencedFenceMeta:k,codeFlowValue:me,codeIndented:p(M),codeText:p(O),codeTextData:me,data:me,definition:p(),definitionDestinationString:U,definitionLabelString:J,definitionTitleString:I,emphasis:p(),hardBreakEscape:p(W),hardBreakTrailing:p(W),htmlFlow:p(j),htmlFlowData:me,htmlText:p(B),htmlTextData:me,image:p(ee),label:re,labelText:z,lineEnding:Q,link:p(K),listItem:p(),listOrdered:p(),listUnordered:p(),paragraph:p(),referenceString:ae,resourceDestinationString:w,resourceTitleString:L,resource:A,setextHeading:p(ie),setextHeadingLineSequence:se,setextHeadingText:R,strong:p(),thematicBreak:p()}};Bm(t,(e||{}).mdastExtensions||[]);const i={};return s;function s($){let oe={type:"root",children:[]};const xe={stack:[oe],tokenStack:[],config:t,enter:h,exit:d,buffer:u,resume:m,data:i},Te=[];let Be=-1;for(;++Be<$.length;)if($[Be][1].type==="listOrdered"||$[Be][1].type==="listUnordered")if($[Be][0]==="enter")Te.push(Be);else{const Ct=Te.pop();Be=o($,Ct,Be)}for(Be=-1;++Be<$.length;){const Ct=t[$[Be][0]];Nm.call(Ct,$[Be][1].type)&&Ct[$[Be][1].type].call(Object.assign({sliceSerialize:$[Be][2].sliceSerialize},xe),$[Be][1])}if(xe.tokenStack.length>0){const Ct=xe.tokenStack[xe.tokenStack.length-1];(Ct[1]||Kp).call(xe,void 0,Ct[0])}for(oe.position={start:bi($.length>0?$[0][1].start:{line:1,column:1,offset:0}),end:bi($.length>0?$[$.length-2][1].end:{line:1,column:1,offset:0})},Be=-1;++Be<t.transforms.length;)oe=t.transforms[Be](oe)||oe;return oe}function o($,oe,xe){let Te=oe-1,Be=-1,Ct=!1,$r,ar,si,Ni;for(;++Te<=xe;){const kt=$[Te];switch(kt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{kt[0]==="enter"?Be++:Be--,Ni=void 0;break}case"lineEndingBlank":{kt[0]==="enter"&&($r&&!Ni&&!Be&&!si&&(si=Te),Ni=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ni=void 0}if(!Be&&kt[0]==="enter"&&kt[1].type==="listItemPrefix"||Be===-1&&kt[0]==="exit"&&(kt[1].type==="listUnordered"||kt[1].type==="listOrdered")){if($r){let Rr=Te;for(ar=void 0;Rr--;){const Zt=$[Rr];if(Zt[1].type==="lineEnding"||Zt[1].type==="lineEndingBlank"){if(Zt[0]==="exit")continue;ar&&($[ar][1].type="lineEndingBlank",Ct=!0),Zt[1].type="lineEnding",ar=Rr}else if(!(Zt[1].type==="linePrefix"||Zt[1].type==="blockQuotePrefix"||Zt[1].type==="blockQuotePrefixWhitespace"||Zt[1].type==="blockQuoteMarker"||Zt[1].type==="listItemIndent"))break}si&&(!ar||si<ar)&&($r._spread=!0),$r.end=Object.assign({},ar?$[ar][1].start:kt[1].end),$.splice(ar||Te,0,["exit",$r,kt[2]]),Te++,xe++}if(kt[1].type==="listItemPrefix"){const Rr={type:"listItem",_spread:!1,start:Object.assign({},kt[1].start),end:void 0};$r=Rr,$.splice(Te,0,["enter",Rr,kt[2]]),Te++,xe++,si=void 0,Ni=!0}}}return $[oe][1]._spread=Ct,xe}function a($,oe){return xe;function xe(Te){h.call(this,$(Te),Te),oe&&oe.call(this,Te)}}function u(){this.stack.push({type:"fragment",children:[]})}function h($,oe,xe){this.stack[this.stack.length-1].children.push($),this.stack.push($),this.tokenStack.push([oe,xe||void 0]),$.position={start:bi(oe.start),end:void 0}}function p($){return oe;function oe(xe){$&&$.call(this,xe),d.call(this,xe)}}function d($,oe){const xe=this.stack.pop(),Te=this.tokenStack.pop();if(Te)Te[0].type!==$.type&&(oe?oe.call(this,$,Te[0]):(Te[1]||Kp).call(this,$,Te[0]));else throw new Error("Cannot close `"+$.type+"` ("+Us({start:$.start,end:$.end})+"): its not open");xe.position.end=bi($.end)}function m(){return B0(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function S($){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize($),10),this.data.expectingFirstListItemValue=void 0}}function v(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=$}function k(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=$}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.value=$.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function M(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.value=$.replace(/(\r?\n|\r)$/g,"")}function J($){const oe=this.resume(),xe=this.stack[this.stack.length-1];xe.label=oe,xe.identifier=An(this.sliceSerialize($)).toLowerCase()}function I(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.title=$}function U(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.url=$}function X($){const oe=this.stack[this.stack.length-1];if(!oe.depth){const xe=this.sliceSerialize($).length;oe.depth=xe}}function R(){this.data.setextHeadingSlurpLineEnding=!0}function se($){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize($).codePointAt(0)===61?1:2}function ie(){this.data.setextHeadingSlurpLineEnding=void 0}function le($){const xe=this.stack[this.stack.length-1].children;let Te=xe[xe.length-1];(!Te||Te.type!=="text")&&(Te=so(),Te.position={start:bi($.start),end:void 0},xe.push(Te)),this.stack.push(Te)}function me($){const oe=this.stack.pop();oe.value+=this.sliceSerialize($),oe.position.end=bi($.end)}function Q($){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=oe.children[oe.children.length-1];xe.position.end=bi($.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(oe.type)&&(le.call(this,$),me.call(this,$))}function W(){this.data.atHardBreak=!0}function j(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.value=$}function B(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.value=$}function O(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.value=$}function K(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=oe,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function ee(){const $=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";$.type+="Reference",$.referenceType=oe,delete $.url,delete $.title}else delete $.identifier,delete $.label;this.data.referenceType=void 0}function z($){const oe=this.sliceSerialize($),xe=this.stack[this.stack.length-2];xe.label=N1(oe),xe.identifier=An(oe).toLowerCase()}function re(){const $=this.stack[this.stack.length-1],oe=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const Te=$.children;xe.children=Te}else xe.alt=oe}function w(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.url=$}function L(){const $=this.resume(),oe=this.stack[this.stack.length-1];oe.title=$}function A(){this.data.inReference=void 0}function x(){this.data.referenceType="collapsed"}function ae($){const oe=this.resume(),xe=this.stack[this.stack.length-1];xe.label=oe,xe.identifier=An(this.sliceSerialize($)).toLowerCase(),this.data.referenceType="full"}function ve($){this.data.characterReferenceType=$.type}function he($){const oe=this.sliceSerialize($),xe=this.data.characterReferenceType;let Te;xe?(Te=Cm(oe,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Te=ph(oe);const Be=this.stack[this.stack.length-1];Be.value+=Te}function we($){const oe=this.stack.pop();oe.position.end=bi($.end)}function Ce($){me.call(this,$);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize($)}function Pe($){me.call(this,$);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize($)}function Fe(){return{type:"blockquote",children:[]}}function It(){return{type:"code",lang:null,meta:null,value:""}}function Jt(){return{type:"inlineCode",value:""}}function Ne(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ur(){return{type:"emphasis",children:[]}}function Wn(){return{type:"heading",depth:0,children:[]}}function Un(){return{type:"break"}}function rn(){return{type:"html",value:""}}function io(){return{type:"image",title:null,url:"",alt:null}}function nn(){return{type:"link",title:null,url:"",children:[]}}function ii($){return{type:"list",ordered:$.type==="listOrdered",start:null,spread:$._spread,children:[]}}function ni($){return{type:"listItem",spread:$._spread,checked:null,children:[]}}function $n(){return{type:"paragraph",children:[]}}function no(){return{type:"strong",children:[]}}function so(){return{type:"text",value:""}}function oo(){return{type:"thematicBreak"}}}function bi(e){return{line:e.line,column:e.column,offset:e.offset}}function Bm(e,t){let i=-1;for(;++i<t.length;){const s=t[i];Array.isArray(s)?Bm(e,s):O1(e,s)}}function O1(e,t){let i;for(i in t)if(Nm.call(t,i))switch(i){case"canContainEols":{const s=t[i];s&&e[i].push(...s);break}case"transforms":{const s=t[i];s&&e[i].push(...s);break}case"enter":case"exit":{const s=t[i];s&&Object.assign(e[i],s);break}}}function Kp(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Us({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Us({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Us({start:t.start,end:t.end})+") is still open")}function z1(e){const t=this;t.parser=i;function i(s){return I1(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function F1(e,t){const i={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,i),e.applyData(t,i)}function H1(e,t){const i={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,i),[e.applyData(t,i),{type:"text",value:`
`}]}function j1(e,t){const i=t.value?t.value+`
`:"",s={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(s.className=["language-"+o[0]]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:i}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function W1(e,t){const i={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function U1(e,t){const i={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function $1(e,t){const i=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),o=Fn(s.toLowerCase()),a=e.footnoteOrder.indexOf(s);let u,h=e.footnoteCounts.get(s);h===void 0?(h=0,e.footnoteOrder.push(s),u=e.footnoteOrder.length):u=a+1,h+=1,e.footnoteCounts.set(s,h);const p={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+o,id:i+"fnref-"+o+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};e.patch(t,p);const d={type:"element",tagName:"sup",properties:{},children:[p]};return e.patch(t,d),e.applyData(t,d)}function V1(e,t){const i={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function K1(e,t){if(e.options.allowDangerousHtml){const i={type:"raw",value:t.value};return e.patch(t,i),e.applyData(t,i)}}function Im(e,t){const i=t.referenceType;let s="]";if(i==="collapsed"?s+="[]":i==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const o=e.all(t),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const u=o[o.length-1];return u&&u.type==="text"?u.value+=s:o.push({type:"text",value:s}),o}function q1(e,t){const i=String(t.identifier).toUpperCase(),s=e.definitionById.get(i);if(!s)return Im(e,t);const o={src:Fn(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(o.title=s.title);const a={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,a),e.applyData(t,a)}function Y1(e,t){const i={src:Fn(t.url)};t.alt!==null&&t.alt!==void 0&&(i.alt=t.alt),t.title!==null&&t.title!==void 0&&(i.title=t.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function X1(e,t){const i={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,i);const s={type:"element",tagName:"code",properties:{},children:[i]};return e.patch(t,s),e.applyData(t,s)}function G1(e,t){const i=String(t.identifier).toUpperCase(),s=e.definitionById.get(i);if(!s)return Im(e,t);const o={href:Fn(s.url||"")};s.title!==null&&s.title!==void 0&&(o.title=s.title);const a={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function Q1(e,t){const i={href:Fn(t.url)};t.title!==null&&t.title!==void 0&&(i.title=t.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function J1(e,t,i){const s=e.all(t),o=i?Z1(i):Am(t),a={},u=[];if(typeof t.checked=="boolean"){const m=s[0];let g;m&&m.type==="element"&&m.tagName==="p"?g=m:(g={type:"element",tagName:"p",properties:{},children:[]},s.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let h=-1;for(;++h<s.length;){const m=s[h];(o||h!==0||m.type!=="element"||m.tagName!=="p")&&u.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!o?u.push(...m.children):u.push(m)}const p=s[s.length-1];p&&(o||p.type!=="element"||p.tagName!=="p")&&u.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:u};return e.patch(t,d),e.applyData(t,d)}function Z1(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const i=e.children;let s=-1;for(;!t&&++s<i.length;)t=Am(i[s])}return t}function Am(e){const t=e.spread;return t??e.children.length>1}function ew(e,t){const i={},s=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(i.start=t.start);++o<s.length;){const u=s[o];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){i.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:i,children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function tw(e,t){const i={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function rw(e,t){const i={type:"root",children:e.wrap(e.all(t))};return e.patch(t,i),e.applyData(t,i)}function iw(e,t){const i={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function nw(e,t){const i=e.all(t),s=i.shift(),o=[];if(s){const u={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],u),o.push(u)}if(i.length>0){const u={type:"element",tagName:"tbody",properties:{},children:e.wrap(i,!0)},h=ch(t.children[1]),p=mm(t.children[t.children.length-1]);h&&p&&(u.position={start:h,end:p}),o.push(u)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)}function sw(e,t,i){const s=i?i.children:void 0,a=(s?s.indexOf(t):1)===0?"th":"td",u=i&&i.type==="table"?i.align:void 0,h=u?u.length:t.children.length;let p=-1;const d=[];for(;++p<h;){const g=t.children[p],S={},v=u?u[p]:void 0;v&&(S.align=v);let k={type:"element",tagName:a,properties:S,children:[]};g&&(k.children=e.all(g),e.patch(g,k),k=e.applyData(g,k)),d.push(k)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,m),e.applyData(t,m)}function ow(e,t){const i={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}const qp=9,Yp=32;function lw(e){const t=String(e),i=/\r?\n|\r/g;let s=i.exec(t),o=0;const a=[];for(;s;)a.push(Xp(t.slice(o,s.index),o>0,!0),s[0]),o=s.index+s[0].length,s=i.exec(t);return a.push(Xp(t.slice(o),o>0,!1)),a.join("")}function Xp(e,t,i){let s=0,o=e.length;if(t){let a=e.codePointAt(s);for(;a===qp||a===Yp;)s++,a=e.codePointAt(s)}if(i){let a=e.codePointAt(o-1);for(;a===qp||a===Yp;)o--,a=e.codePointAt(o-1)}return o>s?e.slice(s,o):""}function aw(e,t){const i={type:"text",value:lw(String(t.value))};return e.patch(t,i),e.applyData(t,i)}function uw(e,t){const i={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,i),e.applyData(t,i)}const cw={blockquote:F1,break:H1,code:j1,delete:W1,emphasis:U1,footnoteReference:$1,heading:V1,html:K1,imageReference:q1,image:Y1,inlineCode:X1,linkReference:G1,link:Q1,listItem:J1,list:ew,paragraph:tw,root:rw,strong:iw,table:nw,tableCell:ow,tableRow:sw,text:aw,thematicBreak:uw,toml:ml,yaml:ml,definition:ml,footnoteDefinition:ml};function ml(){}const Om=-1,Vl=0,Vs=1,Il=2,gh=3,vh=4,yh=5,Sh=6,zm=7,Fm=8,Gp=typeof self=="object"?self:globalThis,hw=(e,t)=>{const i=(o,a)=>(e.set(a,o),o),s=o=>{if(e.has(o))return e.get(o);const[a,u]=t[o];switch(a){case Vl:case Om:return i(u,o);case Vs:{const h=i([],o);for(const p of u)h.push(s(p));return h}case Il:{const h=i({},o);for(const[p,d]of u)h[s(p)]=s(d);return h}case gh:return i(new Date(u),o);case vh:{const{source:h,flags:p}=u;return i(new RegExp(h,p),o)}case yh:{const h=i(new Map,o);for(const[p,d]of u)h.set(s(p),s(d));return h}case Sh:{const h=i(new Set,o);for(const p of u)h.add(s(p));return h}case zm:{const{name:h,message:p}=u;return i(new Gp[h](p),o)}case Fm:return i(BigInt(u),o);case"BigInt":return i(Object(BigInt(u)),o);case"ArrayBuffer":return i(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:h}=new Uint8Array(u);return i(new DataView(h),u)}}return i(new Gp[a](u),o)};return s},Qp=e=>hw(new Map,e)(0),Dn="",{toString:dw}={},{keys:fw}=Object,Ts=e=>{const t=typeof e;if(t!=="object"||!e)return[Vl,t];const i=dw.call(e).slice(8,-1);switch(i){case"Array":return[Vs,Dn];case"Object":return[Il,Dn];case"Date":return[gh,Dn];case"RegExp":return[vh,Dn];case"Map":return[yh,Dn];case"Set":return[Sh,Dn];case"DataView":return[Vs,i]}return i.includes("Array")?[Vs,i]:i.includes("Error")?[zm,i]:[Il,i]},gl=([e,t])=>e===Vl&&(t==="function"||t==="symbol"),pw=(e,t,i,s)=>{const o=(u,h)=>{const p=s.push(u)-1;return i.set(h,p),p},a=u=>{if(i.has(u))return i.get(u);let[h,p]=Ts(u);switch(h){case Vl:{let m=u;switch(p){case"bigint":h=Fm,m=u.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+p);m=null;break;case"undefined":return o([Om],u)}return o([h,m],u)}case Vs:{if(p){let S=u;return p==="DataView"?S=new Uint8Array(u.buffer):p==="ArrayBuffer"&&(S=new Uint8Array(u)),o([p,[...S]],u)}const m=[],g=o([h,m],u);for(const S of u)m.push(a(S));return g}case Il:{if(p)switch(p){case"BigInt":return o([p,u.toString()],u);case"Boolean":case"Number":case"String":return o([p,u.valueOf()],u)}if(t&&"toJSON"in u)return a(u.toJSON());const m=[],g=o([h,m],u);for(const S of fw(u))(e||!gl(Ts(u[S])))&&m.push([a(S),a(u[S])]);return g}case gh:return o([h,u.toISOString()],u);case vh:{const{source:m,flags:g}=u;return o([h,{source:m,flags:g}],u)}case yh:{const m=[],g=o([h,m],u);for(const[S,v]of u)(e||!(gl(Ts(S))||gl(Ts(v))))&&m.push([a(S),a(v)]);return g}case Sh:{const m=[],g=o([h,m],u);for(const S of u)(e||!gl(Ts(S)))&&m.push(a(S));return g}}const{message:d}=u;return o([h,{name:p,message:d}],u)};return a},Jp=(e,{json:t,lossy:i}={})=>{const s=[];return pw(!(t||i),!!t,new Map,s)(e),s},Al=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Qp(Jp(e,t)):structuredClone(e):(e,t)=>Qp(Jp(e,t));function _w(e,t){const i=[{type:"text",value:""}];return t>1&&i.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),i}function mw(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function gw(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",i=e.options.footnoteBackContent||_w,s=e.options.footnoteBackLabel||mw,o=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",u=e.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let p=-1;for(;++p<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[p]);if(!d)continue;const m=e.all(d),g=String(d.identifier).toUpperCase(),S=Fn(g.toLowerCase());let v=0;const k=[],E=e.footnoteCounts.get(g);for(;E!==void 0&&++v<=E;){k.length>0&&k.push({type:"text",value:" "});let J=typeof i=="string"?i:i(p,v);typeof J=="string"&&(J={type:"text",value:J}),k.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+S+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(p,v),className:["data-footnote-backref"]},children:Array.isArray(J)?J:[J]})}const T=m[m.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const J=T.children[T.children.length-1];J&&J.type==="text"?J.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...k)}else m.push(...k);const M={type:"element",tagName:"li",properties:{id:t+"fn-"+S},children:e.wrap(m,!0)};e.patch(d,M),h.push(M)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Al(u),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(h,!0)},{type:"text",value:`
`}]}}const Hm=(function(e){if(e==null)return ww;if(typeof e=="function")return Kl(e);if(typeof e=="object")return Array.isArray(e)?vw(e):yw(e);if(typeof e=="string")return Sw(e);throw new Error("Expected function, string, or object as test")});function vw(e){const t=[];let i=-1;for(;++i<e.length;)t[i]=Hm(e[i]);return Kl(s);function s(...o){let a=-1;for(;++a<t.length;)if(t[a].apply(this,o))return!0;return!1}}function yw(e){const t=e;return Kl(i);function i(s){const o=s;let a;for(a in e)if(o[a]!==t[a])return!1;return!0}}function Sw(e){return Kl(t);function t(i){return i&&i.type===e}}function Kl(e){return t;function t(i,s,o){return!!(xw(i)&&e.call(this,i,typeof s=="number"?s:void 0,o||void 0))}}function ww(){return!0}function xw(e){return e!==null&&typeof e=="object"&&"type"in e}const jm=[],Cw=!0,Zp=!1,kw="skip";function bw(e,t,i,s){let o;typeof t=="function"&&typeof i!="function"?(s=i,i=t):o=t;const a=Hm(o),u=s?-1:1;h(e,void 0,[])();function h(p,d,m){const g=p&&typeof p=="object"?p:{};if(typeof g.type=="string"){const v=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(S,"name",{value:"node ("+(p.type+(v?"<"+v+">":""))+")"})}return S;function S(){let v=jm,k,E,T;if((!t||a(p,d,m[m.length-1]||void 0))&&(v=Ew(i(p,m)),v[0]===Zp))return v;if("children"in p&&p.children){const M=p;if(M.children&&v[0]!==kw)for(E=(s?M.children.length:-1)+u,T=m.concat(M);E>-1&&E<M.children.length;){const J=M.children[E];if(k=h(J,E,T)(),k[0]===Zp)return k;E=typeof k[1]=="number"?k[1]:E+u}}return v}}}function Ew(e){return Array.isArray(e)?e:typeof e=="number"?[Cw,e]:e==null?jm:[e]}function Wm(e,t,i,s){let o,a,u;typeof t=="function"&&typeof i!="function"?(a=void 0,u=t,o=i):(a=t,u=i,o=s),bw(e,a,h,o);function h(p,d){const m=d[d.length-1],g=m?m.children.indexOf(p):void 0;return u(p,g,m)}}const Sc={}.hasOwnProperty,Pw={};function Rw(e,t){const i=t||Pw,s=new Map,o=new Map,a=new Map,u={...cw,...i.handlers},h={all:d,applyData:Dw,definitionById:s,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:u,one:p,options:i,patch:Lw,wrap:Mw};return Wm(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const g=m.type==="definition"?s:o,S=String(m.identifier).toUpperCase();g.has(S)||g.set(S,m)}}),h;function p(m,g){const S=m.type,v=h.handlers[S];if(Sc.call(h.handlers,S)&&v)return v(h,m,g);if(h.options.passThrough&&h.options.passThrough.includes(S)){if("children"in m){const{children:E,...T}=m,M=Al(T);return M.children=h.all(m),M}return Al(m)}return(h.options.unknownHandler||Tw)(h,m,g)}function d(m){const g=[];if("children"in m){const S=m.children;let v=-1;for(;++v<S.length;){const k=h.one(S[v],m);if(k){if(v&&S[v-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=e_(k.value)),!Array.isArray(k)&&k.type==="element")){const E=k.children[0];E&&E.type==="text"&&(E.value=e_(E.value))}Array.isArray(k)?g.push(...k):g.push(k)}}}return g}}function Lw(e,t){e.position&&(t.position=d0(e))}function Dw(e,t){let i=t;if(e&&e.data){const s=e.data.hName,o=e.data.hChildren,a=e.data.hProperties;if(typeof s=="string")if(i.type==="element")i.tagName=s;else{const u="children"in i?i.children:[i];i={type:"element",tagName:s,properties:{},children:u}}i.type==="element"&&a&&Object.assign(i.properties,Al(a)),"children"in i&&i.children&&o!==null&&o!==void 0&&(i.children=o)}return i}function Tw(e,t){const i=t.data||{},s="value"in t&&!(Sc.call(i,"hProperties")||Sc.call(i,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Mw(e,t){const i=[];let s=-1;for(t&&i.push({type:"text",value:`
`});++s<e.length;)s&&i.push({type:"text",value:`
`}),i.push(e[s]);return t&&e.length>0&&i.push({type:"text",value:`
`}),i}function e_(e){let t=0,i=e.charCodeAt(t);for(;i===9||i===32;)t++,i=e.charCodeAt(t);return e.slice(t)}function t_(e,t){const i=Rw(e,t),s=i.one(e,void 0),o=gw(i),a=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function Nw(e,t){return e&&"run"in e?async function(i,s){const o=t_(i,{file:s,...t});await e.run(o,s)}:function(i,s){return t_(i,{file:s,...e||t})}}function r_(e){if(e)throw e}var Ku,i_;function Bw(){if(i_)return Ku;i_=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},a=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var m=e.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!g)return!1;var S;for(S in d);return typeof S>"u"||e.call(d,S)},u=function(d,m){i&&m.name==="__proto__"?i(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},h=function(d,m){if(m==="__proto__")if(e.call(d,m)){if(s)return s(d,m).value}else return;return d[m]};return Ku=function p(){var d,m,g,S,v,k,E=arguments[0],T=1,M=arguments.length,J=!1;for(typeof E=="boolean"&&(J=E,E=arguments[1]||{},T=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});T<M;++T)if(d=arguments[T],d!=null)for(m in d)g=h(E,m),S=h(d,m),E!==S&&(J&&S&&(a(S)||(v=o(S)))?(v?(v=!1,k=g&&o(g)?g:[]):k=g&&a(g)?g:{},u(E,{name:m,newValue:p(J,k,S)})):typeof S<"u"&&u(E,{name:m,newValue:S}));return E},Ku}var Iw=Bw();const qu=Ul(Iw);function wc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Aw(){const e=[],t={run:i,use:s};return t;function i(...o){let a=-1;const u=o.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);h(null,...o);function h(p,...d){const m=e[++a];let g=-1;if(p){u(p);return}for(;++g<o.length;)(d[g]===null||d[g]===void 0)&&(d[g]=o[g]);o=d,m?Ow(m,h)(...d):u(null,...d)}}function s(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function Ow(e,t){let i;return s;function s(...u){const h=e.length>u.length;let p;h&&u.push(o);try{p=e.apply(this,u)}catch(d){const m=d;if(h&&i)throw m;return o(m)}h||(p&&p.then&&typeof p.then=="function"?p.then(a,o):p instanceof Error?o(p):a(p))}function o(u,...h){i||(i=!0,t(u,...h))}function a(u){o(null,u)}}const Or={basename:zw,dirname:Fw,extname:Hw,join:jw,sep:"/"};function zw(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Js(e);let i=0,s=-1,o=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(a){i=o+1;break}}else s<0&&(a=!0,s=o+1);return s<0?"":e.slice(i,s)}if(t===e)return"";let u=-1,h=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(a){i=o+1;break}}else u<0&&(a=!0,u=o+1),h>-1&&(e.codePointAt(o)===t.codePointAt(h--)?h<0&&(s=o):(h=-1,s=u));return i===s?s=u:s<0&&(s=e.length),e.slice(i,s)}function Fw(e){if(Js(e),e.length===0)return".";let t=-1,i=e.length,s;for(;--i;)if(e.codePointAt(i)===47){if(s){t=i;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Hw(e){Js(e);let t=e.length,i=-1,s=0,o=-1,a=0,u;for(;t--;){const h=e.codePointAt(t);if(h===47){if(u){s=t+1;break}continue}i<0&&(u=!0,i=t+1),h===46?o<0?o=t:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||i<0||a===0||a===1&&o===i-1&&o===s+1?"":e.slice(o,i)}function jw(...e){let t=-1,i;for(;++t<e.length;)Js(e[t]),e[t]&&(i=i===void 0?e[t]:i+"/"+e[t]);return i===void 0?".":Ww(i)}function Ww(e){Js(e);const t=e.codePointAt(0)===47;let i=Uw(e,!t);return i.length===0&&!t&&(i="."),i.length>0&&e.codePointAt(e.length-1)===47&&(i+="/"),t?"/"+i:i}function Uw(e,t){let i="",s=0,o=-1,a=0,u=-1,h,p;for(;++u<=e.length;){if(u<e.length)h=e.codePointAt(u);else{if(h===47)break;h=47}if(h===47){if(!(o===u-1||a===1))if(o!==u-1&&a===2){if(i.length<2||s!==2||i.codePointAt(i.length-1)!==46||i.codePointAt(i.length-2)!==46){if(i.length>2){if(p=i.lastIndexOf("/"),p!==i.length-1){p<0?(i="",s=0):(i=i.slice(0,p),s=i.length-1-i.lastIndexOf("/")),o=u,a=0;continue}}else if(i.length>0){i="",s=0,o=u,a=0;continue}}t&&(i=i.length>0?i+"/..":"..",s=2)}else i.length>0?i+="/"+e.slice(o+1,u):i=e.slice(o+1,u),s=u-o-1;o=u,a=0}else h===46&&a>-1?a++:a=-1}return i}function Js(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const $w={cwd:Vw};function Vw(){return"/"}function xc(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Kw(e){if(typeof e=="string")e=new URL(e);else if(!xc(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return qw(e)}function qw(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let i=-1;for(;++i<t.length;)if(t.codePointAt(i)===37&&t.codePointAt(i+1)===50){const s=t.codePointAt(i+2);if(s===70||s===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const Yu=["history","path","basename","stem","extname","dirname"];class Um{constructor(t){let i;t?xc(t)?i={path:t}:typeof t=="string"||Yw(t)?i={value:t}:i=t:i={},this.cwd="cwd"in i?"":$w.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<Yu.length;){const a=Yu[s];a in i&&i[a]!==void 0&&i[a]!==null&&(this[a]=a==="history"?[...i[a]]:i[a])}let o;for(o in i)Yu.includes(o)||(this[o]=i[o])}get basename(){return typeof this.path=="string"?Or.basename(this.path):void 0}set basename(t){Gu(t,"basename"),Xu(t,"basename"),this.path=Or.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Or.dirname(this.path):void 0}set dirname(t){n_(this.basename,"dirname"),this.path=Or.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Or.extname(this.path):void 0}set extname(t){if(Xu(t,"extname"),n_(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Or.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xc(t)&&(t=Kw(t)),Gu(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Or.basename(this.path,this.extname):void 0}set stem(t){Gu(t,"stem"),Xu(t,"stem"),this.path=Or.join(this.dirname||"",t+(this.extname||""))}fail(t,i,s){const o=this.message(t,i,s);throw o.fatal=!0,o}info(t,i,s){const o=this.message(t,i,s);return o.fatal=void 0,o}message(t,i,s){const o=new Bt(t,i,s);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Xu(e,t){if(e&&e.includes(Or.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Or.sep+"`")}function Gu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function n_(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Yw(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xw=(function(e){const s=this.constructor.prototype,o=s[e],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,s),a}),Gw={}.hasOwnProperty;class wh extends Xw{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Aw()}copy(){const t=new wh;let i=-1;for(;++i<this.attachers.length;){const s=this.attachers[i];t.use(...s)}return t.data(qu(!0,{},this.namespace)),t}data(t,i){return typeof t=="string"?arguments.length===2?(Zu("data",this.frozen),this.namespace[t]=i,this):Gw.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Zu("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[i,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const o=i.call(t,...s);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const i=vl(t),s=this.parser||this.Parser;return Qu("parse",s),s(String(i),i)}process(t,i){const s=this;return this.freeze(),Qu("process",this.parser||this.Parser),Ju("process",this.compiler||this.Compiler),i?o(void 0,i):new Promise(o);function o(a,u){const h=vl(t),p=s.parse(h);s.run(p,h,function(m,g,S){if(m||!g||!S)return d(m);const v=g,k=s.stringify(v,S);Zw(k)?S.value=k:S.result=k,d(m,S)});function d(m,g){m||!g?u(m):a?a(g):i(void 0,g)}}}processSync(t){let i=!1,s;return this.freeze(),Qu("processSync",this.parser||this.Parser),Ju("processSync",this.compiler||this.Compiler),this.process(t,o),o_("processSync","process",i),s;function o(a,u){i=!0,r_(a),s=u}}run(t,i,s){s_(t),this.freeze();const o=this.transformers;return!s&&typeof i=="function"&&(s=i,i=void 0),s?a(void 0,s):new Promise(a);function a(u,h){const p=vl(i);o.run(t,p,d);function d(m,g,S){const v=g||t;m?h(m):u?u(v):s(void 0,v,S)}}}runSync(t,i){let s=!1,o;return this.run(t,i,a),o_("runSync","run",s),o;function a(u,h){r_(u),o=h,s=!0}}stringify(t,i){this.freeze();const s=vl(i),o=this.compiler||this.Compiler;return Ju("stringify",o),s_(t),o(t,s)}use(t,...i){const s=this.attachers,o=this.namespace;if(Zu("use",this.frozen),t!=null)if(typeof t=="function")p(t,i);else if(typeof t=="object")Array.isArray(t)?h(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")p(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...g]=d;p(m,g)}else u(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function u(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(d.plugins),d.settings&&(o.settings=qu(!0,o.settings,d.settings))}function h(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const g=d[m];a(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function p(d,m){let g=-1,S=-1;for(;++g<s.length;)if(s[g][0]===d){S=g;break}if(S===-1)s.push([d,...m]);else if(m.length>0){let[v,...k]=m;const E=s[S][1];wc(E)&&wc(v)&&(v=qu(!0,E,v)),s[S]=[d,v,...k]}}}}const Qw=new wh().freeze();function Qu(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Ju(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Zu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function s_(e){if(!wc(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function o_(e,t,i){if(!i)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function vl(e){return Jw(e)?e:new Um(e)}function Jw(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Zw(e){return typeof e=="string"||ex(e)}function ex(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const tx="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",l_=[],a_={allowDangerousHtml:!0},rx=/^(https?|ircs?|mailto|xmpp)$/i,ix=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function nx(e){const t=sx(e),i=ox(e);return lx(t.runSync(t.parse(i),i),e)}function sx(e){const t=e.rehypePlugins||l_,i=e.remarkPlugins||l_,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...a_}:a_;return Qw().use(z1).use(i).use(Nw,s).use(t)}function ox(e){const t=e.children||"",i=new Um;return typeof t=="string"&&(i.value=t),i}function lx(e,t){const i=t.allowedElements,s=t.allowElement,o=t.components,a=t.disallowedElements,u=t.skipHtml,h=t.unwrapDisallowed,p=t.urlTransform||ax;for(const m of ix)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+tx+m.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Wm(e,d),g0(e,{Fragment:b.Fragment,components:o,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function d(m,g,S){if(m.type==="raw"&&S&&typeof g=="number")return u?S.children.splice(g,1):S.children[g]={type:"text",value:m.value},g;if(m.type==="element"){let v;for(v in Uu)if(Object.hasOwn(Uu,v)&&Object.hasOwn(m.properties,v)){const k=m.properties[v],E=Uu[v];(E===null||E.includes(m.tagName))&&(m.properties[v]=p(String(k||""),v,m))}}if(m.type==="element"){let v=i?!i.includes(m.tagName):a?a.includes(m.tagName):!1;if(!v&&s&&typeof g=="number"&&(v=!s(m,g,S)),v&&S&&typeof g=="number")return h&&m.children?S.children.splice(g,1,...m.children):S.children.splice(g,1),g}}}function ax(e){const t=e.indexOf(":"),i=e.indexOf("?"),s=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||i!==-1&&t>i||s!==-1&&t>s||rx.test(e.slice(0,t))?e:""}const Ft="/api";async function ux(e,t=[]){const i=await fetch(`${Ft}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,sessionMessages:t})});if(!i.ok){const s=await i.json().catch(()=>({error:i.statusText}));throw new Error(s.error??"")}return i.json()}async function cx(){return(await fetch(`${Ft}/status`)).json()}async function hx(){return(await fetch(`${Ft}/skills`)).json()}async function dx(){return(await fetch(`${Ft}/workspace`)).json()}async function fx(){return(await fetch(`${Ft}/goals`)).json()}async function px(){return(await fetch(`${Ft}/memory`)).json()}async function _x(e){return(await fetch(`${Ft}/workspace/${encodeURIComponent(e)}`)).json()}async function mx(e){return(await fetch(`${Ft}/command`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cmd:e})})).json()}async function gx(){const e=await fetch(`${Ft}/v1/pending-actions`);if(!e.ok)throw new Error("");return e.json()}async function vx(e,t,i="",s=""){return(await fetch(`${Ft}/v1/approvals/${encodeURIComponent(e)}/decision`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({decision:t,patchedCommand:i,reason:s})})).json()}async function $m({agentName:e,taskPrompt:t,autoApprove:i=!0,timeoutMs:s=6e5}){return(await fetch(`${Ft}/v1/external-agent/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agentName:e,taskPrompt:t,autoApprove:i,timeoutMs:s})})).json()}async function yx(){return(await fetch(`${Ft}/v1/external-agent/tasks`)).json()}async function Rl(e,t){return(await fetch(`${Ft}/v1/external-agent/tasks/${encodeURIComponent(e)}/input`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})})).json()}async function Vm(e){return(await fetch(`${Ft}/v1/external-agent/tasks/${encodeURIComponent(e)}/stop`,{method:"POST"})).json()}function Sx(e){const t=new EventSource(`${Ft}/stream`);return t.onmessage=i=>{try{e(JSON.parse(i.data))}catch{}},()=>t.close()}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Km=(...e)=>e.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=pe.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:u,...h},p)=>pe.createElement("svg",{ref:p,...xx,width:t,height:t,stroke:e,strokeWidth:s?Number(i)*24/Number(t):i,className:Km("lucide",o),...h},[...u.map(([d,m])=>pe.createElement(d,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(e,t)=>{const i=pe.forwardRef(({className:s,...o},a)=>pe.createElement(Cx,{ref:a,iconNode:t,className:Km(`lucide-${wx(e)}`,s),...o}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=wt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=wt("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=wt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=wt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=wt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=wt("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=wt("FolderCode",[["path",{d:"M10 10.5 8 13l2 2.5",key:"m4t9c1"}],["path",{d:"m14 10.5 2 2.5-2 2.5",key:"14w2eb"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2z",key:"1u1bxd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=wt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=wt("LayoutPanelLeft",[["rect",{width:"7",height:"18",x:"3",y:"3",rx:"1",key:"2obqm"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=wt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=wt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=wt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=wt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=wt("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=wt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=wt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function zx({role:e,content:t,isStreaming:i}){const s=e==="ai";return b.jsxs("div",{className:`flex gap-3 ${s?"":"flex-row-reverse"}`,children:[b.jsx("div",{className:`shrink-0 w-7 h-7 rounded-full flex items-center justify-center text-xs
        ${s?"bg-indigo-900 text-indigo-300":"bg-gray-700 text-gray-300"}`,children:s?b.jsx(qm,{size:14}):b.jsx(Ix,{size:14})}),b.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2.5 text-sm leading-relaxed
        ${s?"bg-gray-800 text-gray-100 rounded-tl-sm":"bg-indigo-600 text-white rounded-tr-sm"}`,children:[s?b.jsx("div",{className:"prose prose-invert prose-sm max-w-none",children:b.jsx(nx,{children:t})}):b.jsx("span",{className:"whitespace-pre-wrap",children:t}),i&&b.jsx("span",{className:"inline-flex items-center gap-1 ml-2 text-indigo-400",children:b.jsx(Cc,{size:12,className:"animate-spin"})})]})]})}function Fx({thoughts:e=[]}){var J;const t={role:"ai",content:"  WuXing-Agent"},[i,s]=pe.useState([t]),[o,a]=pe.useState(""),[u,h]=pe.useState(!1),[p,d]=pe.useState(null),m=pe.useRef(null),g=pe.useRef(null),S=pe.useRef(new Set),v=pe.useRef(-1);pe.useEffect(()=>{var I;(I=m.current)==null||I.scrollIntoView({behavior:"smooth"})},[i]),pe.useEffect(()=>{const I=()=>s([t]);return window.addEventListener("wuxing:reset",I),()=>window.removeEventListener("wuxing:reset",I)},[]);function k(I,U){s(X=>{var se,ie;const R=X[X.length-1];return((se=R==null?void 0:R.meta)==null?void 0:se.kind)==="external_log"&&((ie=R==null?void 0:R.meta)==null?void 0:ie.taskId)===I?[...X.slice(0,-1),{...R,content:`${R.content}${U}`}]:[...X,{role:"ai",content:U,meta:{kind:"external_log",taskId:I}}]})}pe.useEffect(()=>{var X,R,se;if(!p)return;const I=p.id,U=S.current;for(const ie of e)if(!(!(ie!=null&&ie.id)||U.has(ie.id))&&(U.add(ie.id),((X=ie.data)==null?void 0:X.taskId)===I)){if(ie.type==="terminal.stream"){k(I,((R=ie.data)==null?void 0:R.chunk)??"");continue}if(ie.type==="terminal.progress"){const le=Number(((se=ie.data)==null?void 0:se.progress)??0);le!==v.current&&(v.current=le,s(me=>[...me,{role:"ai",content:`${le}%`}]));continue}if(ie.type==="terminal.prompt"){s(le=>[...le,{role:"ai",content:" `/input y`  `/input n`"}]);continue}ie.type==="terminal.exit"&&(s(le=>{var me;return[...le,{role:"ai",content:`exit=${((me=ie.data)==null?void 0:me.code)??"?"}`}]}),d(null))}},[e,p]);const E=()=>i.filter(I=>I.role!=="system").map(I=>({role:I.role,content:I.content})),T=async()=>{const I=o.trim();if(!(!I||u)){a(""),s(U=>[...U,{role:"human",content:I}]),h(!0);try{if(I.startsWith("/agent ")){const X=I.slice(7).trim(),[R,...se]=X.split(" ");let ie=se.join(" ").trim();if(!R||!ie)throw new Error("/agent <name> [--manual] <task>");let le=!0;ie.startsWith("--manual ")&&(le=!1,ie=ie.slice(9).trim());const me=await $m({agentName:R,taskPrompt:ie,autoApprove:le});if(me!=null&&me.error)throw new Error(me.error);const Q=me.task;if(!(Q!=null&&Q.id))throw new Error("ID");v.current=-1,d({id:Q.id,agentName:R}),s(W=>[...W,{role:"ai",content:`${R}task=${Q.id}`}]);return}if(I.startsWith("/input ")){if(!(p!=null&&p.id))throw new Error("");const X=I.slice(7);await Rl(p.id,`${X}
`),s(R=>[...R,{role:"ai",content:`${X}`}]);return}if(I==="/stop"){if(!(p!=null&&p.id))throw new Error("");await Vm(p.id),s(X=>[...X,{role:"ai",content:""}]);return}const{answer:U}=await ux(I,E());s(X=>[...X,{role:"ai",content:U||"()"}])}catch(U){s(X=>[...X,{role:"ai",content:` ${U.message}`}])}finally{h(!1),setTimeout(()=>{var U;return(U=g.current)==null?void 0:U.focus()},50)}}},M=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),T())};return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-4",children:[i.map((I,U)=>b.jsx(zx,{role:I.role,content:I.content,isStreaming:u&&U===i.length-1&&I.role==="ai"},U)),u&&((J=i[i.length-1])==null?void 0:J.role)==="human"&&b.jsxs("div",{className:"flex gap-3",children:[b.jsx("div",{className:"w-7 h-7 rounded-full bg-indigo-900 flex items-center justify-center",children:b.jsx(qm,{size:14,className:"text-indigo-300"})}),b.jsx("div",{className:"bg-gray-800 rounded-2xl rounded-tl-sm px-4 py-2.5",children:b.jsx(Cc,{size:16,className:"animate-spin text-indigo-400"})})]}),b.jsx("div",{ref:m})]}),b.jsxs("div",{className:"shrink-0 px-4 pb-4 pt-2 border-t border-gray-800",children:[b.jsxs("div",{className:"flex gap-2 items-end bg-gray-800 rounded-2xl px-4 py-2",children:[b.jsx("textarea",{ref:g,value:o,onChange:I=>a(I.target.value),onKeyDown:M,placeholder:" /agent codex <>/input y/stop",rows:1,className:`flex-1 bg-transparent text-sm text-gray-100 placeholder-gray-500
              resize-none outline-none max-h-40 leading-relaxed`,style:{minHeight:"24px"},onInput:I=>{I.target.style.height="24px",I.target.style.height=Math.min(I.target.scrollHeight,160)+"px"},disabled:u}),b.jsx("button",{onClick:T,disabled:u||!o.trim(),className:`shrink-0 w-8 h-8 rounded-xl bg-indigo-600 hover:bg-indigo-500
              disabled:opacity-40 disabled:cursor-not-allowed
              flex items-center justify-center transition-colors`,children:u?b.jsx(Cc,{size:14,className:"animate-spin text-white"}):b.jsx(Tx,{size:14,className:"text-white"})})]}),b.jsx("p",{className:"text-[10px] text-gray-600 mt-1.5 text-center",children:"WuXing-Agent  "})]})]})}const c_={water:{label:"",color:"#38bdf8",bg:"rgba(56,189,248,0.08)",icon:"",border:"#1e40af"},fire:{label:"",color:"#f97316",bg:"rgba(249,115,22,0.08)",icon:"",border:"#9a3412"},earth:{label:"",color:"#eab308",bg:"rgba(234,179,8,0.08)",icon:"",border:"#854d0e"},metal:{label:"",color:"#a8a29e",bg:"rgba(168,162,158,0.08)",icon:"",border:"#57534e"},wood:{label:"",color:"#4ade80",bg:"rgba(74,222,128,0.08)",icon:"",border:"#166534"},tool:{label:"",color:"#c084fc",bg:"rgba(192,132,252,0.08)",icon:"",border:"#7e22ce"},system:{label:"",color:"#818cf8",bg:"rgba(129,140,248,0.08)",icon:"",border:"#3730a3"},answer:{label:"",color:"#34d399",bg:"rgba(52,211,153,0.08)",icon:"",border:"#065f46"}};function Hx(e){return c_[e]??c_.system}function jx({event:e}){var i,s;const t=Hx(e.element);return b.jsxs("div",{className:"thought-item flex gap-2 py-1.5 px-2 rounded-lg text-xs",style:{background:t.bg,borderLeft:`2px solid ${t.border}`},children:[b.jsx("span",{className:"shrink-0 mt-0.5",children:t.icon}),b.jsxs("div",{className:"min-w-0",children:[b.jsx("span",{className:"font-semibold",style:{color:t.color},children:t.label}),b.jsx("p",{className:"text-gray-300 mt-0.5 break-words leading-relaxed",children:e.message}),((i=e.data)==null?void 0:i.tools)&&b.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:e.data.tools.map((o,a)=>b.jsx("span",{className:"px-1.5 py-0.5 bg-purple-900/40 text-purple-300 rounded text-[10px]",children:o.name},a))}),((s=e.data)==null?void 0:s.rule)&&b.jsxs("p",{className:"mt-1 text-[10px] text-green-400 italic",children:[" ",e.data.rule]})]})]})}function Wx({thoughts:e,connected:t,onClear:i}){const s=pe.useRef(null);return pe.useEffect(()=>{var o;(o=s.current)==null||o.scrollIntoView({behavior:"smooth"})},[e.length]),b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-800 shrink-0",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:`w-2 h-2 rounded-full pulse-dot ${t?"bg-green-400":"bg-red-500"}`}),b.jsx("span",{className:"text-xs font-semibold text-gray-300",children:""})]}),b.jsx("button",{onClick:i,className:"text-[10px] text-gray-500 hover:text-gray-300 transition-colors",children:""})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-2 space-y-1.5",children:[e.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 text-xs gap-2",children:[b.jsx("span",{className:"text-2xl",children:""}),b.jsx("span",{children:"..."})]}):e.map(o=>b.jsx(jx,{event:o},o.id)),b.jsx("div",{ref:s})]})]})}function yl({active:e,onClick:t,children:i}){return b.jsx("button",{onClick:t,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${e?"bg-indigo-700 text-white":"text-gray-400 hover:text-gray-200"}`,children:i})}function Sl({color:e="gray",children:t}){const i={green:"bg-green-900/40 text-green-300",red:"bg-red-900/40 text-red-300",yellow:"bg-yellow-900/40 text-yellow-300",gray:"bg-gray-800 text-gray-400",purple:"bg-purple-900/40 text-purple-300"};return b.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-medium ${i[e]}`,children:t})}function Ux(){var T,M,J,I,U,X;const[e,t]=pe.useState("status"),[i,s]=pe.useState(null),[o,a]=pe.useState(null),[u,h]=pe.useState(null),[p,d]=pe.useState(null),[m,g]=pe.useState(""),[S,v]=pe.useState(!1);async function k(){v(!0);try{e==="status"&&s(await cx()),e==="skills"&&a(await hx()),e==="memory"&&h(await px()),e==="goals"&&d(await fx())}finally{v(!1)}}pe.useEffect(()=>{k()},[e]);async function E(R){const{result:se,error:ie}=await mx(R);g(se??ie??""),R.startsWith(":reset")&&window.dispatchEvent(new Event("wuxing:reset")),await k()}return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center gap-1 px-3 py-2 border-b border-gray-800 shrink-0 flex-wrap",children:[b.jsxs(yl,{active:e==="status",onClick:()=>t("status"),children:[b.jsx(Mx,{size:11,className:"inline mr-1"}),""]}),b.jsxs(yl,{active:e==="skills",onClick:()=>t("skills"),children:[b.jsx(Ox,{size:11,className:"inline mr-1"}),""]}),b.jsxs(yl,{active:e==="memory",onClick:()=>t("memory"),children:[b.jsx(bx,{size:11,className:"inline mr-1"}),""]}),b.jsxs(yl,{active:e==="goals",onClick:()=>t("goals"),children:[b.jsx(Bx,{size:11,className:"inline mr-1"}),""]}),b.jsx("button",{onClick:k,disabled:S,className:"ml-auto text-gray-500 hover:text-gray-300 transition-colors disabled:opacity-40",children:b.jsx(Ym,{size:12,className:S?"animate-spin":""})})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-3 text-xs space-y-2",children:[e==="status"&&b.jsx(b.Fragment,{children:i?b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"bg-gray-900 rounded-lg p-3",children:[b.jsx("p",{className:"text-gray-400 text-[10px] mb-2 font-semibold uppercase tracking-wider",children:""}),b.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-wrap",children:i.summary})]}),((M=(T=i.defects)==null?void 0:T.open)==null?void 0:M.length)>0&&b.jsxs("div",{className:"bg-gray-900 rounded-lg p-3",children:[b.jsxs("p",{className:"text-red-400 text-[10px] mb-2 font-semibold uppercase tracking-wider",children:[" (",i.defects.open.length,")"]}),i.defects.open.map((R,se)=>{var ie,le;return b.jsxs("div",{className:"mb-2 last:mb-0",children:[b.jsx("p",{className:"text-gray-300",children:(ie=R.task)==null?void 0:ie.slice(0,60)}),b.jsx("p",{className:"text-gray-500 text-[10px] mt-0.5",children:(le=R.error)==null?void 0:le.slice(0,80)}),b.jsx("button",{onClick:()=>{var me;return E(`:status resolve ${(me=R.task)==null?void 0:me.slice(0,20)}`)},className:"mt-1 text-[10px] text-green-400 hover:text-green-300",children:" "})]},se)})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>E(":reload"),className:"flex-1 py-1.5 bg-indigo-800/40 hover:bg-indigo-700/40 text-indigo-300 rounded-lg text-[10px] transition-colors",children:""}),b.jsx("button",{onClick:()=>E(":status"),className:"flex-1 py-1.5 bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-lg text-[10px] transition-colors",children:""})]}),m&&b.jsx("div",{className:"bg-gray-900 rounded-lg p-2 text-gray-400 whitespace-pre-wrap text-[10px]",children:m})]}):b.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."})}),e==="skills"&&b.jsx(b.Fragment,{children:o?b.jsxs("div",{className:"space-y-1.5",children:[b.jsxs("p",{className:"text-gray-500 text-[10px]",children:[" ",o.count," "]}),(J=o.skills)==null?void 0:J.map(R=>b.jsxs("div",{className:"bg-gray-900 rounded-lg p-2.5 flex gap-2 items-start",children:[b.jsx("span",{className:"text-purple-400 shrink-0",children:""}),b.jsxs("div",{children:[b.jsx("p",{className:"text-purple-300 font-mono text-[11px]",children:R.name}),b.jsx("p",{className:"text-gray-500 text-[10px] mt-0.5 leading-relaxed",children:R.description})]})]},R.name))]}):b.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."})}),e==="memory"&&b.jsx(b.Fragment,{children:u?b.jsxs("div",{className:"space-y-2",children:[b.jsx("button",{onClick:()=>{window.confirm(" workspace")&&E(":reset")},className:"w-full py-1.5 bg-red-900/40 hover:bg-red-800/40 text-red-300 rounded-lg text-[10px] transition-colors",children:""}),b.jsxs("div",{className:"flex gap-2",children:[b.jsxs("div",{className:"flex-1 bg-gray-900 rounded-lg p-2.5 text-center",children:[b.jsx("p",{className:"text-2xl font-bold text-green-400",children:u.total}),b.jsx("p",{className:"text-gray-500 text-[10px]",children:""})]}),b.jsxs("div",{className:"flex-1 bg-gray-900 rounded-lg p-2.5 text-center",children:[b.jsx("p",{className:"text-2xl font-bold text-indigo-400",children:((I=u.stats)==null?void 0:I.core)??""}),b.jsx("p",{className:"text-gray-500 text-[10px]",children:""})]})]}),b.jsx("p",{className:"text-gray-500 text-[10px] pt-1 font-semibold uppercase tracking-wider",children:""}),(U=u.recent)==null?void 0:U.map((R,se)=>b.jsxs("div",{className:"bg-gray-900 rounded-lg p-2.5",children:[b.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[b.jsx(Sl,{color:R.memory_type==="core"?"green":R.memory_type==="short_term"?"yellow":"gray",children:R.memory_type}),b.jsxs(Sl,{color:"purple",children:[" ",R.confidence,"%"]})]}),b.jsx("p",{className:"text-gray-300 text-[11px] leading-relaxed",children:R.rule}),b.jsx("p",{className:"text-gray-600 text-[10px] mt-0.5 truncate",children:R.task})]},se))]}):b.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."})}),e==="goals"&&b.jsx(b.Fragment,{children:p?b.jsxs("div",{className:"space-y-2",children:[b.jsx("button",{onClick:()=>{window.confirm("")&&E(":goal reset")},className:"w-full py-1.5 bg-red-900/30 hover:bg-red-800/40 text-red-300 rounded-lg text-[10px] transition-colors",children:""}),p.briefing&&b.jsx("div",{className:"bg-gray-900 rounded-lg p-2.5 text-gray-400 text-[10px] leading-relaxed whitespace-pre-wrap",children:p.briefing}),(X=p.goals)==null?void 0:X.map(R=>{var se;return b.jsxs("div",{className:"bg-gray-900 rounded-lg p-2.5",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx(Sl,{color:R.status==="active"?"green":R.status==="paused"?"yellow":"gray",children:R.status}),b.jsxs(Sl,{color:"purple",children:[R.progress??0,"%"]})]}),b.jsx("p",{className:"text-gray-200 font-medium",children:R.title}),R.description&&b.jsx("p",{className:"text-gray-500 text-[10px] mt-0.5",children:R.description}),((se=R.milestones)==null?void 0:se.length)>0&&b.jsxs("div",{className:"mt-2 space-y-0.5",children:[R.milestones.slice(0,3).map(ie=>b.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[b.jsx("span",{children:ie.done?"":""}),b.jsx("span",{className:ie.done?"text-gray-600 line-through":"text-gray-400",children:ie.title})]},ie.id)),R.milestones.length>3&&b.jsxs("p",{className:"text-gray-600 text-[10px]",children:["+",R.milestones.length-3," ..."]})]})]},R.id)}),(!p.goals||p.goals.length===0)&&b.jsx("p",{className:"text-gray-500 text-center py-4",children:' ":vision " '}),m&&b.jsx("div",{className:"bg-gray-900 rounded-lg p-2 text-gray-400 whitespace-pre-wrap text-[10px]",children:m})]}):b.jsx("p",{className:"text-gray-500 text-center py-4",children:"..."})})]})]})}function $x(e){return e.endsWith(".py")?"":e.endsWith(".js")||e.endsWith(".mjs")?"":e.endsWith(".json")?"":e.endsWith(".md")?"":e.endsWith(".txt")?"":""}function Vx(e){return e<1024?`${e}B`:`${(e/1024).toFixed(1)}KB`}function Kx(){const[e,t]=pe.useState([]),[i,s]=pe.useState(null),[o,a]=pe.useState(""),[u,h]=pe.useState(!1);async function p(){h(!0);try{const m=await dx();t(m.files??[])}finally{h(!1)}}async function d(m){s(m);const g=await _x(m);a(g.content??"")}return pe.useEffect(()=>{p()},[]),b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-gray-800 shrink-0",children:[b.jsx(u_,{size:13,className:"text-yellow-400"}),b.jsx("span",{className:"text-xs font-semibold text-gray-300 flex-1",children:""}),b.jsx("button",{onClick:p,disabled:u,className:"text-gray-500 hover:text-gray-300 transition-colors disabled:opacity-40",children:b.jsx(Ym,{size:12,className:u?"animate-spin":""})})]}),i?b.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[b.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border-b border-gray-800 bg-gray-900 shrink-0",children:[b.jsx(Rx,{size:12,className:"text-purple-400"}),b.jsx("span",{className:"text-[11px] text-gray-300 flex-1 truncate font-mono",children:i}),b.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-gray-300",children:b.jsx(Ax,{size:12})})]}),b.jsx("div",{className:"flex-1 overflow-auto p-3",children:b.jsx("pre",{className:"text-[11px] text-gray-300 font-mono leading-relaxed whitespace-pre-wrap break-all",children:o})})]}):b.jsx("div",{className:"flex-1 overflow-y-auto",children:e.length===0?b.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-600 text-xs gap-2",children:[b.jsx(u_,{size:24}),b.jsx("span",{children:""})]}):e.map(m=>b.jsxs("button",{onClick:()=>!m.isDir&&d(m.name),className:`w-full flex items-center gap-2.5 px-3 py-2 hover:bg-gray-800/50
                  text-left transition-colors group`,children:[b.jsx("span",{className:"text-base shrink-0",children:$x(m.name)}),b.jsx("span",{className:"flex-1 text-xs text-gray-300 truncate group-hover:text-white transition-colors",children:m.name}),b.jsx("span",{className:"text-[10px] text-gray-600 shrink-0",children:Vx(m.size)})]},m.name))})]})}const h_={medium:"text-yellow-300 border-yellow-700/60 bg-yellow-900/20",high:"text-orange-300 border-orange-700/60 bg-orange-900/20",critical:"text-red-300 border-red-700/60 bg-red-900/20"};function qx({thoughts:e=[]}){const[t,i]=pe.useState([]),[s,o]=pe.useState(!1),[a,u]=pe.useState(""),[h,p]=pe.useState(""),d=pe.useMemo(()=>t[0]??null,[t]);async function m(){try{const v=await gx();i(v.items??[])}catch{}}if(pe.useEffect(()=>{m();const v=setInterval(m,4e3);return()=>clearInterval(v)},[]),pe.useEffect(()=>{const v=e[e.length-1];v&&String(v.type||"").startsWith("approval.")&&m()},[e]),pe.useEffect(()=>{u(""),p((d==null?void 0:d.command)||"")},[d==null?void 0:d.id]),!d)return null;async function g(v){o(!0);try{await vx(d.id,v,h,a),await m()}finally{o(!1)}}const S=h_[d.risk]||h_.high;return b.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",children:b.jsxs("div",{className:"w-full max-w-2xl bg-gray-950 border border-gray-700 rounded-2xl shadow-xl",children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-800 flex items-center justify-between",children:[b.jsx("div",{className:"text-sm font-semibold text-gray-100",children:""}),b.jsxs("div",{className:`text-[10px] px-2 py-1 border rounded-full ${S}`,children:["",d.risk]})]}),b.jsxs("div",{className:"p-4 space-y-3 text-xs",children:[b.jsx("p",{className:"text-gray-300",children:d.message||"Agent "}),b.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-2",children:[b.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:""}),b.jsx("pre",{className:"text-gray-200 whitespace-pre-wrap break-words",children:d.command})]}),b.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-2",children:[b.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:""}),b.jsx("textarea",{value:h,onChange:v=>p(v.target.value),className:"w-full h-20 bg-transparent text-gray-100 outline-none resize-y"})]}),b.jsx("input",{value:a,onChange:v=>u(v.target.value),placeholder:"",className:"w-full px-3 py-2 rounded-lg bg-gray-900 border border-gray-800 text-gray-200 outline-none"})]}),b.jsxs("div",{className:"px-4 py-3 border-t border-gray-800 flex gap-2 justify-end",children:[b.jsx("button",{disabled:s,onClick:()=>g("reject"),className:"px-3 py-1.5 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 text-xs disabled:opacity-50",children:""}),b.jsx("button",{disabled:s,onClick:()=>g("modify"),className:"px-3 py-1.5 rounded-lg bg-yellow-900/40 hover:bg-yellow-800/40 text-yellow-300 text-xs disabled:opacity-50",children:""}),b.jsx("button",{disabled:s,onClick:()=>g("approve"),className:"px-3 py-1.5 rounded-lg bg-indigo-700 hover:bg-indigo-600 text-white text-xs disabled:opacity-50",children:""})]})]})})}/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var Xm=Object.defineProperty,Yx=Object.getOwnPropertyDescriptor,Xx=(e,t)=>{for(var i in t)Xm(e,i,{get:t[i],enumerable:!0})},tt=(e,t,i,s)=>{for(var o=s>1?void 0:s?Yx(t,i):t,a=e.length-1,u;a>=0;a--)(u=e[a])&&(o=(s?u(t,i,o):u(o))||o);return s&&o&&Xm(t,i,o),o},ue=(e,t)=>(i,s)=>t(i,s,e),d_="Terminal input",kc={get:()=>d_,set:e=>d_=e},f_="Too much output to announce, navigate to rows manually to read",bc={get:()=>f_,set:e=>f_=e};function Gx(e){return e.replace(/\r?\n/g,"\r")}function Qx(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function Jx(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function Zx(e,t,i,s){if(e.stopPropagation(),e.clipboardData){let o=e.clipboardData.getData("text/plain");Gm(o,t,i,s)}}function Gm(e,t,i,s){e=Gx(e),e=Qx(e,i.decPrivateModes.bracketedPasteMode&&s.rawOptions.ignoreBracketedPasteMode!==!0),i.triggerDataEvent(e,!0),t.value=""}function Qm(e,t,i){let s=i.getBoundingClientRect(),o=e.clientX-s.left-10,a=e.clientY-s.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${o}px`,t.style.top=`${a}px`,t.style.zIndex="1000",t.focus()}function p_(e,t,i,s,o){Qm(e,t,i),o&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}function Li(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function ql(e,t=0,i=e.length){let s="";for(let o=t;o<i;++o){let a=e[o];a>65535?(a-=65536,s+=String.fromCharCode((a>>10)+55296)+String.fromCharCode(a%1024+56320)):s+=String.fromCharCode(a)}return s}var eC=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let i=e.length;if(!i)return 0;let s=0,o=0;if(this._interim){let a=e.charCodeAt(o++);56320<=a&&a<=57343?t[s++]=(this._interim-55296)*1024+a-56320+65536:(t[s++]=this._interim,t[s++]=a),this._interim=0}for(let a=o;a<i;++a){let u=e.charCodeAt(a);if(55296<=u&&u<=56319){if(++a>=i)return this._interim=u,s;let h=e.charCodeAt(a);56320<=h&&h<=57343?t[s++]=(u-55296)*1024+h-56320+65536:(t[s++]=u,t[s++]=h);continue}u!==65279&&(t[s++]=u)}return s}},tC=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let i=e.length;if(!i)return 0;let s=0,o,a,u,h,p=0,d=0;if(this.interim[0]){let S=!1,v=this.interim[0];v&=(v&224)===192?31:(v&240)===224?15:7;let k=0,E;for(;(E=this.interim[++k]&63)&&k<4;)v<<=6,v|=E;let T=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,M=T-k;for(;d<M;){if(d>=i)return 0;if(E=e[d++],(E&192)!==128){d--,S=!0;break}else this.interim[k++]=E,v<<=6,v|=E&63}S||(T===2?v<128?d--:t[s++]=v:T===3?v<2048||v>=55296&&v<=57343||v===65279||(t[s++]=v):v<65536||v>1114111||(t[s++]=v)),this.interim.fill(0)}let m=i-4,g=d;for(;g<i;){for(;g<m&&!((o=e[g])&128)&&!((a=e[g+1])&128)&&!((u=e[g+2])&128)&&!((h=e[g+3])&128);)t[s++]=o,t[s++]=a,t[s++]=u,t[s++]=h,g+=4;if(o=e[g++],o<128)t[s++]=o;else if((o&224)===192){if(g>=i)return this.interim[0]=o,s;if(a=e[g++],(a&192)!==128){g--;continue}if(p=(o&31)<<6|a&63,p<128){g--;continue}t[s++]=p}else if((o&240)===224){if(g>=i)return this.interim[0]=o,s;if(a=e[g++],(a&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=a,s;if(u=e[g++],(u&192)!==128){g--;continue}if(p=(o&15)<<12|(a&63)<<6|u&63,p<2048||p>=55296&&p<=57343||p===65279)continue;t[s++]=p}else if((o&248)===240){if(g>=i)return this.interim[0]=o,s;if(a=e[g++],(a&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=a,s;if(u=e[g++],(u&192)!==128){g--;continue}if(g>=i)return this.interim[0]=o,this.interim[1]=a,this.interim[2]=u,s;if(h=e[g++],(h&192)!==128){g--;continue}if(p=(o&7)<<18|(a&63)<<12|(u&63)<<6|h&63,p<65536||p>1114111)continue;t[s++]=p}}return s}},Jm="",Di=" ",Zs=class Zm{constructor(){this.fg=0,this.bg=0,this.extended=new Ol}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new Zm;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Ol=class eg{constructor(t=0,i=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new eg(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},yr=class tg extends Zs{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Ol,this.combinedData=""}static fromCharData(t){let i=new tg;return i.setFromCharData(t),i}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Li(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let i=!1;if(t[1].length>2)i=!0;else if(t[1].length===2){let s=t[1].charCodeAt(0);if(55296<=s&&s<=56319){let o=t[1].charCodeAt(1);56320<=o&&o<=57343?this.content=(s-55296)*1024+o-56320+65536|t[2]<<22:i=!0}else i=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;i&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},__="di$target",Ec="di$dependencies",ec=new Map;function rC(e){return e[Ec]||[]}function xt(e){if(ec.has(e))return ec.get(e);let t=function(i,s,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");iC(t,i,o)};return t._id=e,ec.set(e,t),t}function iC(e,t,i){t[__]===t?t[Ec].push({id:e,index:i}):(t[Ec]=[{id:e,index:i}],t[__]=t)}var Ht=xt("BufferService"),rg=xt("CoreMouseService"),tn=xt("CoreService"),nC=xt("CharsetService"),xh=xt("InstantiationService"),ig=xt("LogService"),jt=xt("OptionsService"),ng=xt("OscLinkService"),sC=xt("UnicodeService"),eo=xt("DecorationService"),Pc=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var m;let i=this._bufferService.buffer.lines.get(e-1);if(!i){t(void 0);return}let s=[],o=this._optionsService.rawOptions.linkHandler,a=new yr,u=i.getTrimmedLength(),h=-1,p=-1,d=!1;for(let g=0;g<u;g++)if(!(p===-1&&!i.hasContent(g))){if(i.loadCell(g,a),a.hasExtendedAttrs()&&a.extended.urlId)if(p===-1){p=g,h=a.extended.urlId;continue}else d=a.extended.urlId!==h;else p!==-1&&(d=!0);if(d||p!==-1&&g===u-1){let S=(m=this._oscLinkService.getLinkData(h))==null?void 0:m.uri;if(S){let v={start:{x:p+1,y:e},end:{x:g+(!d&&g===u-1?1:0),y:e}},k=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{let E=new URL(S);["http:","https:"].includes(E.protocol)||(k=!0)}catch{k=!0}k||s.push({text:S,range:v,activate:(E,T)=>o?o.activate(E,T,v):oC(E,T),hover:(E,T)=>{var M;return(M=o==null?void 0:o.hover)==null?void 0:M.call(o,E,T,v)},leave:(E,T)=>{var M;return(M=o==null?void 0:o.leave)==null?void 0:M.call(o,E,T,v)}})}d=!1,a.hasExtendedAttrs()&&a.extended.urlId?(p=g,h=a.extended.urlId):(p=-1,h=-1)}}t(s)}};Pc=tt([ue(0,Ht),ue(1,jt),ue(2,ng)],Pc);function oC(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var Yl=xt("CharSizeService"),ti=xt("CoreBrowserService"),Ch=xt("MouseService"),ri=xt("RenderService"),lC=xt("SelectionService"),sg=xt("CharacterJoinerService"),Hn=xt("ThemeService"),og=xt("LinkProviderService"),aC=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?m_.isErrorNoTelemetry(e)?new m_(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},uC=new aC;function Ll(e){cC(e)||uC.onUnexpectedError(e)}var Rc="Canceled";function cC(e){return e instanceof hC?!0:e instanceof Error&&e.name===Rc&&e.message===Rc}var hC=class extends Error{constructor(){super(Rc),this.name=this.message}};function dC(e){return new Error(`Illegal argument: ${e}`)}var m_=class Lc extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Lc)return t;let i=new Lc;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Dc=class lg extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,lg.prototype)}};function nr(e,t=0){return e[e.length-(1+t)]}var fC;(e=>{function t(a){return a<0}e.isLessThan=t;function i(a){return a<=0}e.isLessThanOrEqual=i;function s(a){return a>0}e.isGreaterThan=s;function o(a){return a===0}e.isNeitherLessOrGreaterThan=o,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(fC||(fC={}));function pC(e,t){let i=this,s=!1,o;return function(){return s||(s=!0,t||(o=e.apply(i,arguments))),o}}var ag;(e=>{function t(U){return U&&typeof U=="object"&&typeof U[Symbol.iterator]=="function"}e.is=t;let i=Object.freeze([]);function s(){return i}e.empty=s;function*o(U){yield U}e.single=o;function a(U){return t(U)?U:o(U)}e.wrap=a;function u(U){return U||i}e.from=u;function*h(U){for(let X=U.length-1;X>=0;X--)yield U[X]}e.reverse=h;function p(U){return!U||U[Symbol.iterator]().next().done===!0}e.isEmpty=p;function d(U){return U[Symbol.iterator]().next().value}e.first=d;function m(U,X){let R=0;for(let se of U)if(X(se,R++))return!0;return!1}e.some=m;function g(U,X){for(let R of U)if(X(R))return R}e.find=g;function*S(U,X){for(let R of U)X(R)&&(yield R)}e.filter=S;function*v(U,X){let R=0;for(let se of U)yield X(se,R++)}e.map=v;function*k(U,X){let R=0;for(let se of U)yield*X(se,R++)}e.flatMap=k;function*E(...U){for(let X of U)yield*X}e.concat=E;function T(U,X,R){let se=R;for(let ie of U)se=X(se,ie);return se}e.reduce=T;function*M(U,X,R=U.length){for(X<0&&(X+=U.length),R<0?R+=U.length:R>U.length&&(R=U.length);X<R;X++)yield U[X]}e.slice=M;function J(U,X=Number.POSITIVE_INFINITY){let R=[];if(X===0)return[R,U];let se=U[Symbol.iterator]();for(let ie=0;ie<X;ie++){let le=se.next();if(le.done)return[R,e.empty()];R.push(le.value)}return[R,{[Symbol.iterator](){return se}}]}e.consume=J;async function I(U){let X=[];for await(let R of U)X.push(R);return Promise.resolve(X)}e.asyncToArray=I})(ag||(ag={}));function Ji(e){if(ag.is(e)){let t=[];for(let i of e)if(i)try{i.dispose()}catch(s){t.push(s)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function _C(...e){return Ye(()=>Ji(e))}function Ye(e){return{dispose:pC(()=>{e()})}}var ug=class cg{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Ji(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?cg.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};ug.DISABLE_DISPOSED_WARNING=!1;var Ti=ug,De=class{constructor(){this._store=new Ti,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};De.None=Object.freeze({dispose(){}});var On=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},ei=typeof window=="object"?window:globalThis,Tc=class Mc{constructor(t){this.element=t,this.next=Mc.Undefined,this.prev=Mc.Undefined}};Tc.Undefined=new Tc(void 0);var Qe=Tc,g_=class{constructor(){this._first=Qe.Undefined,this._last=Qe.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Qe.Undefined}clear(){let e=this._first;for(;e!==Qe.Undefined;){let t=e.next;e.prev=Qe.Undefined,e.next=Qe.Undefined,e=t}this._first=Qe.Undefined,this._last=Qe.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let i=new Qe(e);if(this._first===Qe.Undefined)this._first=i,this._last=i;else if(t){let o=this._last;this._last=i,i.prev=o,o.next=i}else{let o=this._first;this._first=i,i.next=o,o.prev=i}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(i))}}shift(){if(this._first!==Qe.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Qe.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Qe.Undefined&&e.next!==Qe.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Qe.Undefined&&e.next===Qe.Undefined?(this._first=Qe.Undefined,this._last=Qe.Undefined):e.next===Qe.Undefined?(this._last=this._last.prev,this._last.next=Qe.Undefined):e.prev===Qe.Undefined&&(this._first=this._first.next,this._first.prev=Qe.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Qe.Undefined;)yield e.element,e=e.next}},mC=globalThis.performance&&typeof globalThis.performance.now=="function",gC=class hg{static create(t){return new hg(t)}constructor(t){this._now=mC&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Rt;(e=>{e.None=()=>De.None;function t(W,j){return g(W,()=>{},0,void 0,!0,void 0,j)}e.defer=t;function i(W){return(j,B=null,O)=>{let K=!1,ee;return ee=W(z=>{if(!K)return ee?ee.dispose():K=!0,j.call(B,z)},null,O),K&&ee.dispose(),ee}}e.once=i;function s(W,j,B){return d((O,K=null,ee)=>W(z=>O.call(K,j(z)),null,ee),B)}e.map=s;function o(W,j,B){return d((O,K=null,ee)=>W(z=>{j(z),O.call(K,z)},null,ee),B)}e.forEach=o;function a(W,j,B){return d((O,K=null,ee)=>W(z=>j(z)&&O.call(K,z),null,ee),B)}e.filter=a;function u(W){return W}e.signal=u;function h(...W){return(j,B=null,O)=>{let K=_C(...W.map(ee=>ee(z=>j.call(B,z))));return m(K,O)}}e.any=h;function p(W,j,B,O){let K=B;return s(W,ee=>(K=j(K,ee),K),O)}e.reduce=p;function d(W,j){let B,O={onWillAddFirstListener(){B=W(K.fire,K)},onDidRemoveLastListener(){B==null||B.dispose()}},K=new ne(O);return j==null||j.add(K),K.event}function m(W,j){return j instanceof Array?j.push(W):j&&j.add(W),W}function g(W,j,B=100,O=!1,K=!1,ee,z){let re,w,L,A=0,x,ae={leakWarningThreshold:ee,onWillAddFirstListener(){re=W(he=>{A++,w=j(w,he),O&&!L&&(ve.fire(w),w=void 0),x=()=>{let we=w;w=void 0,L=void 0,(!O||A>1)&&ve.fire(we),A=0},typeof B=="number"?(clearTimeout(L),L=setTimeout(x,B)):L===void 0&&(L=0,queueMicrotask(x))})},onWillRemoveListener(){K&&A>0&&(x==null||x())},onDidRemoveLastListener(){x=void 0,re.dispose()}},ve=new ne(ae);return z==null||z.add(ve),ve.event}e.debounce=g;function S(W,j=0,B){return e.debounce(W,(O,K)=>O?(O.push(K),O):[K],j,void 0,!0,void 0,B)}e.accumulate=S;function v(W,j=(O,K)=>O===K,B){let O=!0,K;return a(W,ee=>{let z=O||!j(ee,K);return O=!1,K=ee,z},B)}e.latch=v;function k(W,j,B){return[e.filter(W,j,B),e.filter(W,O=>!j(O),B)]}e.split=k;function E(W,j=!1,B=[],O){let K=B.slice(),ee=W(w=>{K?K.push(w):re.fire(w)});O&&O.add(ee);let z=()=>{K==null||K.forEach(w=>re.fire(w)),K=null},re=new ne({onWillAddFirstListener(){ee||(ee=W(w=>re.fire(w)),O&&O.add(ee))},onDidAddFirstListener(){K&&(j?setTimeout(z):z())},onDidRemoveLastListener(){ee&&ee.dispose(),ee=null}});return O&&O.add(re),re.event}e.buffer=E;function T(W,j){return(B,O,K)=>{let ee=j(new J);return W(function(z){let re=ee.evaluate(z);re!==M&&B.call(O,re)},void 0,K)}}e.chain=T;let M=Symbol("HaltChainable");class J{constructor(){this.steps=[]}map(j){return this.steps.push(j),this}forEach(j){return this.steps.push(B=>(j(B),B)),this}filter(j){return this.steps.push(B=>j(B)?B:M),this}reduce(j,B){let O=B;return this.steps.push(K=>(O=j(O,K),O)),this}latch(j=(B,O)=>B===O){let B=!0,O;return this.steps.push(K=>{let ee=B||!j(K,O);return B=!1,O=K,ee?K:M}),this}evaluate(j){for(let B of this.steps)if(j=B(j),j===M)break;return j}}function I(W,j,B=O=>O){let O=(...re)=>z.fire(B(...re)),K=()=>W.on(j,O),ee=()=>W.removeListener(j,O),z=new ne({onWillAddFirstListener:K,onDidRemoveLastListener:ee});return z.event}e.fromNodeEventEmitter=I;function U(W,j,B=O=>O){let O=(...re)=>z.fire(B(...re)),K=()=>W.addEventListener(j,O),ee=()=>W.removeEventListener(j,O),z=new ne({onWillAddFirstListener:K,onDidRemoveLastListener:ee});return z.event}e.fromDOMEventEmitter=U;function X(W){return new Promise(j=>i(W)(j))}e.toPromise=X;function R(W){let j=new ne;return W.then(B=>{j.fire(B)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=R;function se(W,j){return W(B=>j.fire(B))}e.forward=se;function ie(W,j,B){return j(B),W(O=>j(O))}e.runAndSubscribe=ie;class le{constructor(j,B){this._observable=j,this._counter=0,this._hasChanged=!1;let O={onWillAddFirstListener:()=>{j.addObserver(this)},onDidRemoveLastListener:()=>{j.removeObserver(this)}};this.emitter=new ne(O),B&&B.add(this.emitter)}beginUpdate(j){this._counter++}handlePossibleChange(j){}handleChange(j,B){this._hasChanged=!0}endUpdate(j){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function me(W,j){return new le(W,j).emitter.event}e.fromObservable=me;function Q(W){return(j,B,O)=>{let K=0,ee=!1,z={beginUpdate(){K++},endUpdate(){K--,K===0&&(W.reportChanges(),ee&&(ee=!1,j.call(B)))},handlePossibleChange(){},handleChange(){ee=!0}};W.addObserver(z),W.reportChanges();let re={dispose(){W.removeObserver(z)}};return O instanceof Ti?O.add(re):Array.isArray(O)&&O.push(re),re}}e.fromObservableLight=Q})(Rt||(Rt={}));var Nc=class Bc{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Bc._idPool++}`,Bc.all.add(this)}start(t){this._stopWatch=new gC,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};Nc.all=new Set,Nc._idPool=0;var vC=Nc,yC=-1,dg=class fg{constructor(t,i,s=(fg._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=i,this.name=s,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,i){let s=this.threshold;if(s<=0||i<s)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=s*.5;let[a,u]=this.getMostFrequentStack(),h=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${u}):`;console.warn(h),console.warn(a);let p=new xC(h,a);this._errorHandler(p)}return()=>{let a=this._stacks.get(t.value)||0;this._stacks.set(t.value,a-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,i=0;for(let[s,o]of this._stacks)(!t||i<o)&&(t=[s,o],i=o);return t}};dg._idPool=1;var SC=dg,wC=class pg{constructor(t){this.value=t}static create(){let t=new Error;return new pg(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},xC=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},CC=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},kC=0,tc=class{constructor(e){this.value=e,this.id=kC++}},bC=2,EC,ne=class{constructor(e){var t,i,s,o;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new SC((e==null?void 0:e.onListenerError)??Ll,((i=this._options)==null?void 0:i.leakWarningThreshold)??yC):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new vC(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,i,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var u,h,p,d,m;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let g=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(g);let S=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],v=new CC(`${g}. HINT: Stack shows most frequent listener (${S[1]}-times)`,S[0]);return(((u=this._options)==null?void 0:u.onListenerError)||Ll)(v),De.None}if(this._disposed)return De.None;t&&(e=e.bind(t));let s=new tc(e),o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=wC.create(),o=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof tc?(this._deliveryQueue??(this._deliveryQueue=new PC),this._listeners=[this._listeners,s]):this._listeners.push(s):((p=(h=this._options)==null?void 0:h.onWillAddFirstListener)==null||p.call(h,this),this._listeners=s,(m=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||m.call(d,this)),this._size++;let a=Ye(()=>{o==null||o(),this._removeListener(s)});return i instanceof Ti?i.add(a):Array.isArray(i)&&i.push(a),a}),this._event}_removeListener(e){var o,a,u,h;if((a=(o=this._options)==null?void 0:o.onWillRemoveListener)==null||a.call(o,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(h=(u=this._options)==null?void 0:u.onDidRemoveLastListener)==null||h.call(u,this),this._size=0;return}let t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;let s=this._deliveryQueue.current===this;if(this._size*bC<=t.length){let p=0;for(let d=0;d<t.length;d++)t[d]?t[p++]=t[d]:s&&(this._deliveryQueue.end--,p<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=p}}_deliver(e,t){var s;if(!e)return;let i=((s=this._options)==null?void 0:s.onListenerError)||Ll;if(!i){e.value(t);return}try{e.value(t)}catch(o){i(o)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,s,o;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof tc)this._deliver(this._listeners,e);else{let a=this._deliveryQueue;a.enqueue(this,e,this._listeners.length),this._deliverQueue(a)}(o=this._perfMon)==null||o.stop()}hasListeners(){return this._size>0}},PC=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Ic=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new ne,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new ne,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,i){if(this.getZoomLevel(i)===t)return;let s=this.getWindowId(i);this.mapWindowIdToZoomLevel.set(s,t),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,i){this.mapWindowIdToZoomFactor.set(this.getWindowId(i),t)}setFullscreen(t,i){if(this.isFullscreen(i)===t)return;let s=this.getWindowId(i);this.mapWindowIdToFullScreen.set(s,t),this._onDidChangeFullscreen.fire(s)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};Ic.INSTANCE=new Ic;var kh=Ic;function RC(e,t,i){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",i)}kh.INSTANCE.onDidChangeZoomLevel;function LC(e){return kh.INSTANCE.getZoomFactor(e)}kh.INSTANCE.onDidChangeFullscreen;var jn=typeof navigator=="object"?navigator.userAgent:"",Ac=jn.indexOf("Firefox")>=0,DC=jn.indexOf("AppleWebKit")>=0,bh=jn.indexOf("Chrome")>=0,TC=!bh&&jn.indexOf("Safari")>=0;jn.indexOf("Electron/")>=0;jn.indexOf("Android")>=0;var rc=!1;if(typeof ei.matchMedia=="function"){let e=ei.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=ei.matchMedia("(display-mode: fullscreen)");rc=e.matches,RC(ei,e,({matches:i})=>{rc&&t.matches||(rc=i)})}var Bn="en",Oc=!1,zc=!1,Dl=!1,_g=!1,wl,Tl=Bn,v_=Bn,MC,Pr,Qi=globalThis,Pt,om;typeof Qi.vscode<"u"&&typeof Qi.vscode.process<"u"?Pt=Qi.vscode.process:typeof process<"u"&&typeof((om=process==null?void 0:process.versions)==null?void 0:om.node)=="string"&&(Pt=process);var lm,NC=typeof((lm=Pt==null?void 0:Pt.versions)==null?void 0:lm.electron)=="string",BC=NC&&(Pt==null?void 0:Pt.type)==="renderer",am;if(typeof Pt=="object"){Oc=Pt.platform==="win32",zc=Pt.platform==="darwin",Dl=Pt.platform==="linux",Dl&&Pt.env.SNAP&&Pt.env.SNAP_REVISION,Pt.env.CI||Pt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,wl=Bn,Tl=Bn;let e=Pt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);wl=t.userLocale,v_=t.osLocale,Tl=t.resolvedLanguage||Bn,MC=(am=t.languagePack)==null?void 0:am.translationsConfigFile}catch{}_g=!0}else typeof navigator=="object"&&!BC?(Pr=navigator.userAgent,Oc=Pr.indexOf("Windows")>=0,zc=Pr.indexOf("Macintosh")>=0,(Pr.indexOf("Macintosh")>=0||Pr.indexOf("iPad")>=0||Pr.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Dl=Pr.indexOf("Linux")>=0,(Pr==null?void 0:Pr.indexOf("Mobi"))>=0,Tl=globalThis._VSCODE_NLS_LANGUAGE||Bn,wl=navigator.language.toLowerCase(),v_=wl):console.error("Unable to resolve platform.");var mg=Oc,Hr=zc,IC=Dl,y_=_g,Wr=Pr,Ei=Tl,AC;(e=>{function t(){return Ei}e.value=t;function i(){return Ei.length===2?Ei==="en":Ei.length>=3?Ei[0]==="e"&&Ei[1]==="n"&&Ei[2]==="-":!1}e.isDefaultVariant=i;function s(){return Ei==="en"}e.isDefault=s})(AC||(AC={}));var OC=typeof Qi.postMessage=="function"&&!Qi.importScripts;(()=>{if(OC){let e=[];Qi.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let s=0,o=e.length;s<o;s++){let a=e[s];if(a.id===i.data.vscodeScheduleAsyncWork){e.splice(s,1),a.callback();return}}});let t=0;return i=>{let s=++t;e.push({id:s,callback:i}),Qi.postMessage({vscodeScheduleAsyncWork:s},"*")}}return e=>setTimeout(e)})();var zC=!!(Wr&&Wr.indexOf("Chrome")>=0);Wr&&Wr.indexOf("Firefox")>=0;!zC&&Wr&&Wr.indexOf("Safari")>=0;Wr&&Wr.indexOf("Edg/")>=0;Wr&&Wr.indexOf("Android")>=0;var Tn=typeof navigator=="object"?navigator:{};y_||document.queryCommandSupported&&document.queryCommandSupported("copy")||Tn&&Tn.clipboard&&Tn.clipboard.writeText,y_||Tn&&Tn.clipboard&&Tn.clipboard.readText;var Eh=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},ic=new Eh,S_=new Eh,w_=new Eh,FC=new Array(230),gg;(e=>{function t(h){return ic.keyCodeToStr(h)}e.toString=t;function i(h){return ic.strToKeyCode(h)}e.fromString=i;function s(h){return S_.keyCodeToStr(h)}e.toUserSettingsUS=s;function o(h){return w_.keyCodeToStr(h)}e.toUserSettingsGeneral=o;function a(h){return S_.strToKeyCode(h)||w_.strToKeyCode(h)}e.fromUserSettings=a;function u(h){if(h>=98&&h<=113)return null;switch(h){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ic.keyCodeToStr(h)}e.toElectronAccelerator=u})(gg||(gg={}));var HC=class vg{constructor(t,i,s,o,a){this.ctrlKey=t,this.shiftKey=i,this.altKey=s,this.metaKey=o,this.keyCode=a}equals(t){return t instanceof vg&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",s=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${t}${i}${s}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new jC([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},jC=class{constructor(e){if(e.length===0)throw dC("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function WC(e){if(e.charCode){let i=String.fromCharCode(e.charCode).toUpperCase();return gg.fromString(i)}let t=e.keyCode;if(t===3)return 7;if(Ac)switch(t){case 59:return 85;case 60:if(IC)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Hr)return 57;break}else if(DC&&(Hr&&t===93||!Hr&&t===92))return 57;return FC[t]||0}var UC=Hr?256:2048,$C=512,VC=1024,KC=Hr?2048:256,x_=class{constructor(e){var i;this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(i=t.getModifierState)==null?void 0:i.call(t,"AltGraph"),this.keyCode=WC(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=UC),this.altKey&&(t|=$C),this.shiftKey&&(t|=VC),this.metaKey&&(t|=KC),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new HC(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},C_=new WeakMap;function qC(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,i=e.parent.location;if(t.origin!=="null"&&i.origin!=="null"&&t.origin!==i.origin)return null}catch{return null}return e.parent}var YC=class{static getSameOriginWindowChain(e){let t=C_.get(e);if(!t){t=[],C_.set(e,t);let i=e,s;do s=qC(i),s?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=s;while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let i=0,s=0,o=this.getSameOriginWindowChain(e);for(let a of o){let u=a.window.deref();if(i+=(u==null?void 0:u.scrollY)??0,s+=(u==null?void 0:u.scrollX)??0,u===t||!a.iframeElement)break;let h=a.iframeElement.getBoundingClientRect();i+=h.top,s+=h.left}return{top:i,left:s}}},xl=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let i=YC.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=i.left,this.posy-=i.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},k_=class{constructor(e,t=0,i=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=i,this.deltaX=t;let s=!1;if(bh){let a=navigator.userAgent.match(/Chrome\/(\d+)/);s=(a?parseInt(a[1]):123)<=122}if(e){let a=e,u=e,h=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof a.wheelDeltaY<"u")s?this.deltaY=a.wheelDeltaY/(120*h):this.deltaY=a.wheelDeltaY/120;else if(typeof u.VERTICAL_AXIS<"u"&&u.axis===u.VERTICAL_AXIS)this.deltaY=-u.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?Ac&&!Hr?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof a.wheelDeltaX<"u")TC&&mg?this.deltaX=-(a.wheelDeltaX/120):s?this.deltaX=a.wheelDeltaX/(120*h):this.deltaX=a.wheelDeltaX/120;else if(typeof u.HORIZONTAL_AXIS<"u"&&u.axis===u.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let p=e;p.deltaMode===p.DOM_DELTA_LINE?Ac&&!Hr?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*h):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},yg=Object.freeze(function(e,t){let i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),XC;(e=>{function t(i){return i===e.None||i===e.Cancelled||i instanceof GC?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Rt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:yg})})(XC||(XC={}));var GC=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?yg:(this._emitter||(this._emitter=new ne),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Ph=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Dc("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Dc("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},QC=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){if(this.isDisposed)throw new Dc("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let s=i.setInterval(()=>{e()},t);this.disposable=Ye(()=>{i.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},JC;(e=>{async function t(s){let o,a=await Promise.all(s.map(u=>u.then(h=>h,h=>{o||(o=h)})));if(typeof o<"u")throw o;return a}e.settled=t;function i(s){return new Promise(async(o,a)=>{try{await s(o,a)}catch(u){a(u)}})}e.withAsyncBody=i})(JC||(JC={}));var b_=class mr{static fromArray(t){return new mr(i=>{i.emitMany(t)})}static fromPromise(t){return new mr(async i=>{i.emitMany(await t)})}static fromPromises(t){return new mr(async i=>{await Promise.all(t.map(async s=>i.emitOne(await s)))})}static merge(t){return new mr(async i=>{await Promise.all(t.map(async s=>{for await(let o of s)i.emitOne(o)}))})}constructor(t,i){this._state=0,this._results=[],this._error=null,this._onReturn=i,this._onStateChanged=new ne,queueMicrotask(async()=>{let s={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(t(s)),this.resolve()}catch(o){this.reject(o)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await Rt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var i;return(i=this._onReturn)==null||i.call(this),{done:!0,value:void 0}}}}static map(t,i){return new mr(async s=>{for await(let o of t)s.emitOne(i(o))})}map(t){return mr.map(this,t)}static filter(t,i){return new mr(async s=>{for await(let o of t)i(o)&&s.emitOne(o)})}filter(t){return mr.filter(this,t)}static coalesce(t){return mr.filter(t,i=>!!i)}coalesce(){return mr.coalesce(this)}static async toPromise(t){let i=[];for await(let s of t)i.push(s);return i}toPromise(){return mr.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};b_.EMPTY=b_.fromArray([]);var{getWindow:Fr,getWindowId:ZC,onDidRegisterWindow:ek}=(function(){let e=new Map,t={window:ei,disposables:new Ti};e.set(ei.vscodeWindowId,t);let i=new ne,s=new ne,o=new ne;function a(u,h){return(typeof u=="number"?e.get(u):void 0)??(h?t:void 0)}return{onDidRegisterWindow:i.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:s.event,registerWindow(u){if(e.has(u.vscodeWindowId))return De.None;let h=new Ti,p={window:u,disposables:h.add(new Ti)};return e.set(u.vscodeWindowId,p),h.add(Ye(()=>{e.delete(u.vscodeWindowId),s.fire(u)})),h.add(be(u,gt.BEFORE_UNLOAD,()=>{o.fire(u)})),i.fire(p),h},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(u){return u.vscodeWindowId},hasWindow(u){return e.has(u)},getWindowById:a,getWindow(u){var d;let h=u;if((d=h==null?void 0:h.ownerDocument)!=null&&d.defaultView)return h.ownerDocument.defaultView.window;let p=u;return p!=null&&p.view?p.view.window:ei},getDocument(u){return Fr(u).document}}})(),tk=class{constructor(e,t,i,s){this._node=e,this._type=t,this._handler=i,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function be(e,t,i,s){return new tk(e,t,i,s)}var E_=function(e,t,i,s){return be(e,t,i,s)},Rh,rk=class extends QC{constructor(e){super(),this.defaultTarget=e&&Fr(e)}cancelAndSet(e,t,i){return super.cancelAndSet(e,t,i??this.defaultTarget)}},P_=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ll(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,i=new Map,s=new Map,o=a=>{i.set(a,!1);let u=e.get(a)??[];for(t.set(a,u),e.set(a,[]),s.set(a,!0);u.length>0;)u.sort(P_.sort),u.shift().execute();s.set(a,!1)};Rh=(a,u,h=0)=>{let p=ZC(a),d=new P_(u,h),m=e.get(p);return m||(m=[],e.set(p,m)),m.push(d),i.get(p)||(i.set(p,!0),a.requestAnimationFrame(()=>o(p))),d}})();function ik(e){let t=e.getBoundingClientRect(),i=Fr(e);return{left:t.left+i.scrollX,top:t.top+i.scrollY,width:t.width,height:t.height}}var gt={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},nk=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Yt(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Yt(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Yt(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Yt(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Yt(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Yt(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Yt(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Yt(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Yt(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Yt(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Yt(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Yt(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Yt(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Yt(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Yt(e){return typeof e=="number"?`${e}px`:e}function Ks(e){return new nk(e)}var Sg=class{constructor(){this._hooks=new Ti,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let i=this._onStopCallback;this._onStopCallback=null,e&&i&&i(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,i,s,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=o;let a=e;try{e.setPointerCapture(t),this._hooks.add(Ye(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{a=Fr(e)}this._hooks.add(be(a,gt.POINTER_MOVE,u=>{if(u.buttons!==i){this.stopMonitoring(!0);return}u.preventDefault(),this._pointerMoveCallback(u)})),this._hooks.add(be(a,gt.POINTER_UP,u=>this.stopMonitoring(!0)))}};function sk(e,t,i){let s=null,o=null;if(typeof i.value=="function"?(s="value",o=i.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(s="get",o=i.get),!o)throw new Error("not supported");let a=`$memoize$${t}`;i[s]=function(...u){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,u)}),this[a]}}var Ar;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Ar||(Ar={}));var zs=class Nt extends De{constructor(){super(),this.dispatched=!1,this.targets=new g_,this.ignoreTargets=new g_,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Rt.runAndSubscribe(ek,({window:t,disposables:i})=>{i.add(be(t.document,"touchstart",s=>this.onTouchStart(s),{passive:!1})),i.add(be(t.document,"touchend",s=>this.onTouchEnd(t,s))),i.add(be(t.document,"touchmove",s=>this.onTouchMove(s),{passive:!1}))},{window:ei,disposables:this._store}))}static addTarget(t){if(!Nt.isTouchDevice())return De.None;Nt.INSTANCE||(Nt.INSTANCE=new Nt);let i=Nt.INSTANCE.targets.push(t);return Ye(i)}static ignoreTarget(t){if(!Nt.isTouchDevice())return De.None;Nt.INSTANCE||(Nt.INSTANCE=new Nt);let i=Nt.INSTANCE.ignoreTargets.push(t);return Ye(i)}static isTouchDevice(){return"ontouchstart"in ei||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let i=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let s=0,o=t.targetTouches.length;s<o;s++){let a=t.targetTouches.item(s);this.activeTouches[a.identifier]={id:a.identifier,initialTarget:a.target,initialTimeStamp:i,initialPageX:a.pageX,initialPageY:a.pageY,rollingTimestamps:[i],rollingPageX:[a.pageX],rollingPageY:[a.pageY]};let u=this.newGestureEvent(Ar.Start,a.target);u.pageX=a.pageX,u.pageY=a.pageY,this.dispatchEvent(u)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,i){let s=Date.now(),o=Object.keys(this.activeTouches).length;for(let a=0,u=i.changedTouches.length;a<u;a++){let h=i.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("move of an UNKNOWN touch",h);continue}let p=this.activeTouches[h.identifier],d=Date.now()-p.initialTimeStamp;if(d<Nt.HOLD_DELAY&&Math.abs(p.initialPageX-nr(p.rollingPageX))<30&&Math.abs(p.initialPageY-nr(p.rollingPageY))<30){let m=this.newGestureEvent(Ar.Tap,p.initialTarget);m.pageX=nr(p.rollingPageX),m.pageY=nr(p.rollingPageY),this.dispatchEvent(m)}else if(d>=Nt.HOLD_DELAY&&Math.abs(p.initialPageX-nr(p.rollingPageX))<30&&Math.abs(p.initialPageY-nr(p.rollingPageY))<30){let m=this.newGestureEvent(Ar.Contextmenu,p.initialTarget);m.pageX=nr(p.rollingPageX),m.pageY=nr(p.rollingPageY),this.dispatchEvent(m)}else if(o===1){let m=nr(p.rollingPageX),g=nr(p.rollingPageY),S=nr(p.rollingTimestamps)-p.rollingTimestamps[0],v=m-p.rollingPageX[0],k=g-p.rollingPageY[0],E=[...this.targets].filter(T=>p.initialTarget instanceof Node&&T.contains(p.initialTarget));this.inertia(t,E,s,Math.abs(v)/S,v>0?1:-1,m,Math.abs(k)/S,k>0?1:-1,g)}this.dispatchEvent(this.newGestureEvent(Ar.End,p.initialTarget)),delete this.activeTouches[h.identifier]}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,i){let s=document.createEvent("CustomEvent");return s.initEvent(t,!1,!0),s.initialTarget=i,s.tapCount=0,s}dispatchEvent(t){if(t.type===Ar.Tap){let i=new Date().getTime(),s=0;i-this._lastSetTapCountTime>Nt.CLEAR_TAP_COUNT_TIME?s=1:s=2,this._lastSetTapCountTime=i,t.tapCount=s}else(t.type===Ar.Change||t.type===Ar.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let s of this.ignoreTargets)if(s.contains(t.initialTarget))return;let i=[];for(let s of this.targets)if(s.contains(t.initialTarget)){let o=0,a=t.initialTarget;for(;a&&a!==s;)o++,a=a.parentElement;i.push([o,s])}i.sort((s,o)=>s[0]-o[0]);for(let[s,o]of i)o.dispatchEvent(t),this.dispatched=!0}}inertia(t,i,s,o,a,u,h,p,d){this.handle=Rh(t,()=>{let m=Date.now(),g=m-s,S=0,v=0,k=!0;o+=Nt.SCROLL_FRICTION*g,h+=Nt.SCROLL_FRICTION*g,o>0&&(k=!1,S=a*o*g),h>0&&(k=!1,v=p*h*g);let E=this.newGestureEvent(Ar.Change);E.translationX=S,E.translationY=v,i.forEach(T=>T.dispatchEvent(E)),k||this.inertia(t,i,m,o,a,u+S,h,p,d+v)})}onTouchMove(t){let i=Date.now();for(let s=0,o=t.changedTouches.length;s<o;s++){let a=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("end of an UNKNOWN touch",a);continue}let u=this.activeTouches[a.identifier],h=this.newGestureEvent(Ar.Change,u.initialTarget);h.translationX=a.pageX-nr(u.rollingPageX),h.translationY=a.pageY-nr(u.rollingPageY),h.pageX=a.pageX,h.pageY=a.pageY,this.dispatchEvent(h),u.rollingPageX.length>3&&(u.rollingPageX.shift(),u.rollingPageY.shift(),u.rollingTimestamps.shift()),u.rollingPageX.push(a.pageX),u.rollingPageY.push(a.pageY),u.rollingTimestamps.push(i)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};zs.SCROLL_FRICTION=-.005,zs.HOLD_DELAY=700,zs.CLEAR_TAP_COUNT_TIME=400,tt([sk],zs,"isTouchDevice",1);var ok=zs,Lh=class extends De{onclick(e,t){this._register(be(e,gt.CLICK,i=>t(new xl(Fr(e),i))))}onmousedown(e,t){this._register(be(e,gt.MOUSE_DOWN,i=>t(new xl(Fr(e),i))))}onmouseover(e,t){this._register(be(e,gt.MOUSE_OVER,i=>t(new xl(Fr(e),i))))}onmouseleave(e,t){this._register(be(e,gt.MOUSE_LEAVE,i=>t(new xl(Fr(e),i))))}onkeydown(e,t){this._register(be(e,gt.KEY_DOWN,i=>t(new x_(i))))}onkeyup(e,t){this._register(be(e,gt.KEY_UP,i=>t(new x_(i))))}oninput(e,t){this._register(be(e,gt.INPUT,t))}onblur(e,t){this._register(be(e,gt.BLUR,t))}onfocus(e,t){this._register(be(e,gt.FOCUS,t))}onchange(e,t){this._register(be(e,gt.CHANGE,t))}ignoreGesture(e){return ok.ignoreTarget(e)}},R_=11,lk=class extends Lh{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=R_+"px",this.domNode.style.height=R_+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Sg),this._register(E_(this.bgDomNode,gt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(E_(this.domNode,gt.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new rk),this._pointerdownScheduleRepeatTimer=this._register(new Ph)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Fr(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},ak=class Fc{constructor(t,i,s,o,a,u,h){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,s=s|0,o=o|0,a=a|0,u=u|0,h=h|0),this.rawScrollLeft=o,this.rawScrollTop=h,i<0&&(i=0),o+i>s&&(o=s-i),o<0&&(o=0),a<0&&(a=0),h+a>u&&(h=u-a),h<0&&(h=0),this.width=i,this.scrollWidth=s,this.scrollLeft=o,this.height=a,this.scrollHeight=u,this.scrollTop=h}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new Fc(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new Fc(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){let s=this.width!==t.width,o=this.scrollWidth!==t.scrollWidth,a=this.scrollLeft!==t.scrollLeft,u=this.height!==t.height,h=this.scrollHeight!==t.scrollHeight,p=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:s,scrollWidthChanged:o,scrollLeftChanged:a,heightChanged:u,scrollHeightChanged:h,scrollTopChanged:p}}},uk=class extends De{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new ne),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new ak(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;let i=this._state.withScrollDimensions(e,t);this._setState(i,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let i=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===i.scrollLeft&&this._smoothScrolling.to.scrollTop===i.scrollTop)return;let s;t?s=new D_(this._smoothScrolling.from,i,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,i,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{let i=this._state.withScrollPosition(e);this._smoothScrolling=D_.start(this._state,i,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let i=this._state;i.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(i,t)))}},L_=class{constructor(e,t,i){this.scrollLeft=e,this.scrollTop=t,this.isDone=i}};function nc(e,t){let i=t-e;return function(s){return e+i*dk(s)}}function ck(e,t,i){return function(s){return s<i?e(s/i):t((s-i)/(1-i))}}var D_=class Hc{constructor(t,i,s,o){this.from=t,this.to=i,this.duration=o,this.startTime=s,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,s){if(Math.abs(t-i)>2.5*s){let o,a;return t<i?(o=t+.75*s,a=i-.75*s):(o=t-.75*s,a=i+.75*s),ck(nc(t,o),nc(a,i),.33)}return nc(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let i=(t-this.startTime)/this.duration;if(i<1){let s=this.scrollLeft(i),o=this.scrollTop(i);return new L_(s,o,!1)}return new L_(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,s){return Hc.start(t,i,s)}static start(t,i,s){s=s+10;let o=Date.now()-10;return new Hc(t,i,o,s)}};function hk(e){return Math.pow(e,3)}function dk(e){return 1-hk(1-e)}var fk=class extends De{constructor(e,t,i){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=i,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Ph)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},pk=140,wg=class extends Lh{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new fk(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Sg),this._shouldRender=!0,this.domNode=Ks(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(be(this.domNode.domNode,gt.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new lk(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,i,s){this.slider=Ks(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(be(this.slider.domNode,gt.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);i<=o&&o<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,i;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,i=e.offsetY;else{let o=ik(this.domNode.domNode);t=e.pageX-o.left,i=e.pageY-o.top}let s=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),i=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let a=this._sliderOrthogonalPointerPosition(o),u=Math.abs(a-i);if(mg&&u>pk){this._setDesiredScrollPositionNow(s.getScrollPosition());return}let h=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},xg=class jc{constructor(t,i,s,o,a,u){this._scrollbarSize=Math.round(i),this._oppositeScrollbarSize=Math.round(s),this._arrowSize=Math.round(t),this._visibleSize=o,this._scrollSize=a,this._scrollPosition=u,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new jc(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let i=Math.round(t);return this._visibleSize!==i?(this._visibleSize=i,this._refreshComputedValues(),!0):!1}setScrollSize(t){let i=Math.round(t);return this._scrollSize!==i?(this._scrollSize=i,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let i=Math.round(t);return this._scrollPosition!==i?(this._scrollPosition=i,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,i,s,o,a){let u=Math.max(0,s-t),h=Math.max(0,u-2*i),p=o>0&&o>s;if(!p)return{computedAvailableSize:Math.round(u),computedIsNeeded:p,computedSliderSize:Math.round(h),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(s*h/o))),m=(h-d)/(o-s),g=a*m;return{computedAvailableSize:Math.round(u),computedIsNeeded:p,computedSliderSize:Math.round(d),computedSliderRatio:m,computedSliderPosition:Math.round(g)}}_refreshComputedValues(){let t=jc._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize-this._computedSliderSize/2;return Math.round(i/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let i=t-this._arrowSize,s=this._scrollPosition;return i<this._computedSliderPosition?s-=this._visibleSize:s+=this._visibleSize,s}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let i=this._computedSliderPosition+t;return Math.round(i/this._computedSliderRatio)}},_k=class extends wg{constructor(e,t,i){let s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new xg(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},mk=class extends wg{constructor(e,t,i){let s=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:i,scrollbarState:new xg(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},gk=500,T_=50,vk=class{constructor(e,t,i){this.timestamp=e,this.deltaX=t,this.deltaY=i,this.score=0}},Wc=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,i=0,s=1,o=this._rear;do{let a=o===this._front?t:Math.pow(2,-s);if(t-=a,i+=this._memory[o].score*a,o===this._front)break;o=(this._capacity+o-1)%this._capacity,s++}while(!0);return i<=.5}acceptStandardWheelEvent(t){if(bh){let i=Fr(t.browserEvent),s=LC(i);this.accept(Date.now(),t.deltaX*s,t.deltaY*s)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,i,s){let o=null,a=new vk(t,i,s);this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a),a.score=this._computeScore(a,o)}_computeScore(t,i){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(s+=.25),i){let o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),u=Math.abs(i.deltaX),h=Math.abs(i.deltaY),p=Math.max(Math.min(o,u),1),d=Math.max(Math.min(a,h),1),m=Math.max(o,u),g=Math.max(a,h);m%p===0&&g%d===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};Wc.INSTANCE=new Wc;var yk=Wc,Sk=class extends Lh{constructor(e,t,i){super(),this._onScroll=this._register(new ne),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new ne),this.onWillScroll=this._onWillScroll.event,this._options=xk(t),this._scrollable=i,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let s={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new mk(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new _k(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ks(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ks(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ks(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Ph),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Ji(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Hr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new k_(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Ji(this._mouseWheelToDispose),e)){let t=i=>{this._onMouseWheel(new k_(i))};this._mouseWheelToDispose.push(be(this._listenOnDomNode,gt.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;let t=yk.INSTANCE;t.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let a=e.deltaY*this._options.mouseWheelScrollSensitivity,u=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&u+a===0?u=a=0:Math.abs(a)>=Math.abs(u)?u=0:a=0),this._options.flipAxes&&([a,u]=[u,a]);let h=!Hr&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||h)&&!u&&(u=a,a=0),e.browserEvent&&e.browserEvent.altKey&&(u=u*this._options.fastScrollSensitivity,a=a*this._options.fastScrollSensitivity);let p=this._scrollable.getFutureScrollPosition(),d={};if(a){let m=T_*a,g=p.scrollTop-(m<0?Math.floor(m):Math.ceil(m));this._verticalScrollbar.writeScrollPosition(d,g)}if(u){let m=T_*u,g=p.scrollLeft-(m<0?Math.floor(m):Math.ceil(m));this._horizontalScrollbar.writeScrollPosition(d,g)}d=this._scrollable.validateScrollPosition(d),(p.scrollLeft!==d.scrollLeft||p.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),i=!0)}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,i=e.scrollLeft>0,s=i?" left":"",o=t?" top":"",a=i||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${o}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),gk)}},wk=class extends Sk{constructor(e,t,i){super(e,t,i)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function xk(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Hr&&(t.className+=" mac"),t}var Uc=class extends De{constructor(e,t,i,s,o,a,u,h){super(),this._bufferService=i,this._optionsService=u,this._renderService=h,this._onRequestScrollLines=this._register(new ne),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let p=this._register(new uk({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>Rh(s.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{p.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new wk(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},p)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(o.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Rt.runAndSubscribe(a.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=a.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(Ye(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=s.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(Ye(()=>this._styleElement.remove())),this._register(Rt.runAndSubscribe(a.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${a.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${a.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${a.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),i=t-this._bufferService.buffer.ydisp;i!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(i)),this._isHandlingScroll=!1}};Uc=tt([ue(2,Ht),ue(3,ti),ue(4,rg),ue(5,Hn),ue(6,jt),ue(7,ri)],Uc);var $c=class extends De{constructor(e,t,i,s,o){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=s,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this._register(Ye(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var s;let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",((s=e==null?void 0:e.options)==null?void 0:s.layer)==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose(()=>{this._decorationElements.delete(e),i.remove()})),i.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(i.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,i.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,i.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,i.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;let i=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=i?`${i*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=i?`${i*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var t;(t=this._decorationElements.get(e))==null||t.remove(),this._decorationElements.delete(e),e.dispose()}};$c=tt([ue(1,Ht),ue(2,ti),ue(3,eo),ue(4,ri)],$c);var Ck=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},Br={full:0,left:0,center:0,right:0},Pi={full:0,left:0,center:0,right:0},Ms={full:0,left:0,center:0,right:0},zl=class extends De{constructor(e,t,i,s,o,a,u,h){var d;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=o,this._optionsService=a,this._themeService=u,this._coreBrowserService=h,this._colorZoneStore=new Ck,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(d=this._viewportElement.parentElement)==null||d.insertBefore(this._canvas,this._viewportElement),this._register(Ye(()=>{var m;return(m=this._canvas)==null?void 0:m.remove()}));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);Pi.full=this._canvas.width,Pi.left=e,Pi.center=t,Pi.right=e,this._refreshDrawHeightConstants(),Ms.full=1,Ms.left=1,Ms.center=1+Pi.left,Ms.right=1+Pi.left+Pi.center}_refreshDrawHeightConstants(){Br.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Br.left=t,Br.center=t,Br.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Br.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Br.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Br.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Br.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Ms[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Br[e.position||"full"]/2),Pi[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Br[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};zl=tt([ue(2,Ht),ue(3,eo),ue(4,ri),ue(5,jt),ue(6,Hn),ue(7,ti)],zl);var V;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(V||(V={}));var Ml;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(Ml||(Ml={}));var Cg;(e=>e.ST=`${V.ESC}\\`)(Cg||(Cg={}));var Vc=class{constructor(e,t,i,s,o,a){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=o,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let i;t.start+=this._dataAlreadySent.length,this._isComposing?i=this._textarea.value.substring(t.start,this._compositionPosition.start):i=this._textarea.value.substring(t.start),i.length>0&&this._coreService.triggerDataEvent(i,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${V.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let a=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Vc=tt([ue(2,Ht),ue(3,jt),ue(4,tn),ue(5,ri)],Vc);var vt=0,yt=0,St=0,et=0,M_={css:"#00000000",rgba:0},at;(e=>{function t(o,a,u,h){return h!==void 0?`#${qi(o)}${qi(a)}${qi(u)}${qi(h)}`:`#${qi(o)}${qi(a)}${qi(u)}`}e.toCss=t;function i(o,a,u,h=255){return(o<<24|a<<16|u<<8|h)>>>0}e.toRgba=i;function s(o,a,u,h){return{css:e.toCss(o,a,u,h),rgba:e.toRgba(o,a,u,h)}}e.toColor=s})(at||(at={}));var Ke;(e=>{function t(p,d){if(et=(d.rgba&255)/255,et===1)return{css:d.css,rgba:d.rgba};let m=d.rgba>>24&255,g=d.rgba>>16&255,S=d.rgba>>8&255,v=p.rgba>>24&255,k=p.rgba>>16&255,E=p.rgba>>8&255;vt=v+Math.round((m-v)*et),yt=k+Math.round((g-k)*et),St=E+Math.round((S-E)*et);let T=at.toCss(vt,yt,St),M=at.toRgba(vt,yt,St);return{css:T,rgba:M}}e.blend=t;function i(p){return(p.rgba&255)===255}e.isOpaque=i;function s(p,d,m){let g=Nl.ensureContrastRatio(p.rgba,d.rgba,m);if(g)return at.toColor(g>>24&255,g>>16&255,g>>8&255)}e.ensureContrastRatio=s;function o(p){let d=(p.rgba|255)>>>0;return[vt,yt,St]=Nl.toChannels(d),{css:at.toCss(vt,yt,St),rgba:d}}e.opaque=o;function a(p,d){return et=Math.round(d*255),[vt,yt,St]=Nl.toChannels(p.rgba),{css:at.toCss(vt,yt,St,et),rgba:at.toRgba(vt,yt,St,et)}}e.opacity=a;function u(p,d){return et=p.rgba&255,a(p,et*d/255)}e.multiplyOpacity=u;function h(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}e.toColorRGB=h})(Ke||(Ke={}));var Je;(e=>{let t,i;try{let o=document.createElement("canvas");o.width=1,o.height=1;let a=o.getContext("2d",{willReadFrequently:!0});a&&(t=a,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}catch{}function s(o){if(o.match(/#[\da-f]{3,8}/i))switch(o.length){case 4:return vt=parseInt(o.slice(1,2).repeat(2),16),yt=parseInt(o.slice(2,3).repeat(2),16),St=parseInt(o.slice(3,4).repeat(2),16),at.toColor(vt,yt,St);case 5:return vt=parseInt(o.slice(1,2).repeat(2),16),yt=parseInt(o.slice(2,3).repeat(2),16),St=parseInt(o.slice(3,4).repeat(2),16),et=parseInt(o.slice(4,5).repeat(2),16),at.toColor(vt,yt,St,et);case 7:return{css:o,rgba:(parseInt(o.slice(1),16)<<8|255)>>>0};case 9:return{css:o,rgba:parseInt(o.slice(1),16)>>>0}}let a=o.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return vt=parseInt(a[1]),yt=parseInt(a[2]),St=parseInt(a[3]),et=Math.round((a[5]===void 0?1:parseFloat(a[5]))*255),at.toColor(vt,yt,St,et);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=o,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[vt,yt,St,et]=t.getImageData(0,0,1,1).data,et!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:at.toRgba(vt,yt,St,et),css:o}}e.toColor=s})(Je||(Je={}));var zt;(e=>{function t(s){return i(s>>16&255,s>>8&255,s&255)}e.relativeLuminance=t;function i(s,o,a){let u=s/255,h=o/255,p=a/255,d=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4),m=h<=.03928?h/12.92:Math.pow((h+.055)/1.055,2.4),g=p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4);return d*.2126+m*.7152+g*.0722}e.relativeLuminance2=i})(zt||(zt={}));var Nl;(e=>{function t(u,h){if(et=(h&255)/255,et===1)return h;let p=h>>24&255,d=h>>16&255,m=h>>8&255,g=u>>24&255,S=u>>16&255,v=u>>8&255;return vt=g+Math.round((p-g)*et),yt=S+Math.round((d-S)*et),St=v+Math.round((m-v)*et),at.toRgba(vt,yt,St)}e.blend=t;function i(u,h,p){let d=zt.relativeLuminance(u>>8),m=zt.relativeLuminance(h>>8);if(Zr(d,m)<p){if(m<d){let v=s(u,h,p),k=Zr(d,zt.relativeLuminance(v>>8));if(k<p){let E=o(u,h,p),T=Zr(d,zt.relativeLuminance(E>>8));return k>T?v:E}return v}let g=o(u,h,p),S=Zr(d,zt.relativeLuminance(g>>8));if(S<p){let v=s(u,h,p),k=Zr(d,zt.relativeLuminance(v>>8));return S>k?g:v}return g}}e.ensureContrastRatio=i;function s(u,h,p){let d=u>>24&255,m=u>>16&255,g=u>>8&255,S=h>>24&255,v=h>>16&255,k=h>>8&255,E=Zr(zt.relativeLuminance2(S,v,k),zt.relativeLuminance2(d,m,g));for(;E<p&&(S>0||v>0||k>0);)S-=Math.max(0,Math.ceil(S*.1)),v-=Math.max(0,Math.ceil(v*.1)),k-=Math.max(0,Math.ceil(k*.1)),E=Zr(zt.relativeLuminance2(S,v,k),zt.relativeLuminance2(d,m,g));return(S<<24|v<<16|k<<8|255)>>>0}e.reduceLuminance=s;function o(u,h,p){let d=u>>24&255,m=u>>16&255,g=u>>8&255,S=h>>24&255,v=h>>16&255,k=h>>8&255,E=Zr(zt.relativeLuminance2(S,v,k),zt.relativeLuminance2(d,m,g));for(;E<p&&(S<255||v<255||k<255);)S=Math.min(255,S+Math.ceil((255-S)*.1)),v=Math.min(255,v+Math.ceil((255-v)*.1)),k=Math.min(255,k+Math.ceil((255-k)*.1)),E=Zr(zt.relativeLuminance2(S,v,k),zt.relativeLuminance2(d,m,g));return(S<<24|v<<16|k<<8|255)>>>0}e.increaseLuminance=o;function a(u){return[u>>24&255,u>>16&255,u>>8&255,u&255]}e.toChannels=a})(Nl||(Nl={}));function qi(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Zr(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var kk=class extends Zs{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Fl=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new yr}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let i=[],s=t.translateToString(!0),o=0,a=0,u=0,h=t.getFg(0),p=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==h||this._workCell.bg!==p){if(d-o>1){let m=this._getJoinedRanges(s,u,a,t,o);for(let g=0;g<m.length;g++)i.push(m[g])}o=d,u=a,h=this._workCell.fg,p=this._workCell.bg}a+=this._workCell.getChars().length||Di.length}if(this._bufferService.cols-o>1){let d=this._getJoinedRanges(s,u,a,t,o);for(let m=0;m<d.length;m++)i.push(d[m])}return i}_getJoinedRanges(e,t,i,s,o){let a=e.substring(t,i),u=[];try{u=this._characterJoiners[0].handler(a)}catch(h){console.error(h)}for(let h=1;h<this._characterJoiners.length;h++)try{let p=this._characterJoiners[h].handler(a);for(let d=0;d<p.length;d++)Fl._mergeRanges(u,p[d])}catch(p){console.error(p)}return this._stringRangesToCellRanges(u,s,o),u}_stringRangesToCellRanges(e,t,i){let s=0,o=!1,a=0,u=e[s];if(u){for(let h=i;h<this._bufferService.cols;h++){let p=t.getWidth(h),d=t.getString(h).length||Di.length;if(p!==0){if(!o&&u[0]<=a&&(u[0]=h,o=!0),u[1]<=a){if(u[1]=h,u=e[++s],!u)break;u[0]<=a?(u[0]=h,o=!0):o=!1}a+=d}}u&&(u[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){let o=e[s];if(i){if(t[1]<=o[0])return e[s-1][1]=t[1],e;if(t[1]<=o[1])return e[s-1][1]=Math.max(t[1],o[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=o[0])return e.splice(s,0,t),e;if(t[1]<=o[1])return o[0]=Math.min(t[0],o[0]),e;t[0]<o[1]&&(o[0]=Math.min(t[0],o[0]),i=!0);continue}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};Fl=tt([ue(0,Ht)],Fl);function bk(e){return 57508<=e&&e<=57558}function Ek(e){return 9472<=e&&e<=9631}function Pk(e){return bk(e)||Ek(e)}function Rk(){return{css:{canvas:Cl(),cell:Cl()},device:{canvas:Cl(),cell:Cl(),char:{width:0,height:0,left:0,top:0}}}}function Cl(){return{width:0,height:0}}var Kc=class{constructor(e,t,i,s,o,a,u){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=o,this._decorationService=a,this._themeService=u,this._workCell=new yr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,o,a,u,h,p,d,m){let g=[],S=this._characterJoinerService.getJoinedCharacters(t),v=this._themeService.colors,k=e.getNoBgTrimmedLength();i&&k<a+1&&(k=a+1);let E,T=0,M="",J=0,I=0,U=0,X=0,R=!1,se=0,ie=!1,le=0,me=0,Q=[],W=d!==-1&&m!==-1;for(let j=0;j<k;j++){e.loadCell(j,this._workCell);let B=this._workCell.getWidth();if(B===0)continue;let O=!1,K=j>=me,ee=j,z=this._workCell;if(S.length>0&&j===S[0][0]&&K){let Ne=S.shift(),Ur=this._isCellInSelection(Ne[0],t);for(J=Ne[0]+1;J<Ne[1];J++)K&&(K=Ur===this._isCellInSelection(J,t));K&&(K=!i||a<Ne[0]||a>=Ne[1]),K?(O=!0,z=new kk(this._workCell,e.translateToString(!0,Ne[0],Ne[1]),Ne[1]-Ne[0]),ee=Ne[1]-1,B=z.getWidth()):me=Ne[1]}let re=this._isCellInSelection(j,t),w=i&&j===a,L=W&&j>=d&&j<=m,A=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Ne=>{A=!0});let x=z.getChars()||Di;if(x===" "&&(z.isUnderline()||z.isOverline())&&(x=""),le=B*h-p.get(x,z.isBold(),z.isItalic()),!E)E=this._document.createElement("span");else if(T&&(re&&ie||!re&&!ie&&z.bg===I)&&(re&&ie&&v.selectionForeground||z.fg===U)&&z.extended.ext===X&&L===R&&le===se&&!w&&!O&&!A&&K){z.isInvisible()?M+=Di:M+=x,T++;continue}else T&&(E.textContent=M),E=this._document.createElement("span"),T=0,M="";if(I=z.bg,U=z.fg,X=z.extended.ext,R=L,se=le,ie=re,O&&a>=j&&a<=ee&&(a=j),!this._coreService.isCursorHidden&&w&&this._coreService.isCursorInitialized){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)u&&Q.push("xterm-cursor-blink"),Q.push(s==="bar"?"xterm-cursor-bar":s==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(o)switch(o){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline");break}}if(z.isBold()&&Q.push("xterm-bold"),z.isItalic()&&Q.push("xterm-italic"),z.isDim()&&Q.push("xterm-dim"),z.isInvisible()?M=Di:M=z.getChars()||Di,z.isUnderline()&&(Q.push(`xterm-underline-${z.extended.underlineStyle}`),M===" "&&(M=""),!z.isUnderlineColorDefault()))if(z.isUnderlineColorRGB())E.style.textDecorationColor=`rgb(${Zs.toColorRGB(z.getUnderlineColor()).join(",")})`;else{let Ne=z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&z.isBold()&&Ne<8&&(Ne+=8),E.style.textDecorationColor=v.ansi[Ne].css}z.isOverline()&&(Q.push("xterm-overline"),M===" "&&(M="")),z.isStrikethrough()&&Q.push("xterm-strikethrough"),L&&(E.style.textDecoration="underline");let ae=z.getFgColor(),ve=z.getFgColorMode(),he=z.getBgColor(),we=z.getBgColorMode(),Ce=!!z.isInverse();if(Ce){let Ne=ae;ae=he,he=Ne;let Ur=ve;ve=we,we=Ur}let Pe,Fe,It=!1;this._decorationService.forEachDecorationAtCell(j,t,void 0,Ne=>{Ne.options.layer!=="top"&&It||(Ne.backgroundColorRGB&&(we=50331648,he=Ne.backgroundColorRGB.rgba>>8&16777215,Pe=Ne.backgroundColorRGB),Ne.foregroundColorRGB&&(ve=50331648,ae=Ne.foregroundColorRGB.rgba>>8&16777215,Fe=Ne.foregroundColorRGB),It=Ne.options.layer==="top")}),!It&&re&&(Pe=this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque,he=Pe.rgba>>8&16777215,we=50331648,It=!0,v.selectionForeground&&(ve=50331648,ae=v.selectionForeground.rgba>>8&16777215,Fe=v.selectionForeground)),It&&Q.push("xterm-decoration-top");let Jt;switch(we){case 16777216:case 33554432:Jt=v.ansi[he],Q.push(`xterm-bg-${he}`);break;case 50331648:Jt=at.toColor(he>>16,he>>8&255,he&255),this._addStyle(E,`background-color:#${N_((he>>>0).toString(16),"0",6)}`);break;case 0:default:Ce?(Jt=v.foreground,Q.push("xterm-bg-257")):Jt=v.background}switch(Pe||z.isDim()&&(Pe=Ke.multiplyOpacity(Jt,.5)),ve){case 16777216:case 33554432:z.isBold()&&ae<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ae+=8),this._applyMinimumContrast(E,Jt,v.ansi[ae],z,Pe,void 0)||Q.push(`xterm-fg-${ae}`);break;case 50331648:let Ne=at.toColor(ae>>16&255,ae>>8&255,ae&255);this._applyMinimumContrast(E,Jt,Ne,z,Pe,Fe)||this._addStyle(E,`color:#${N_(ae.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(E,Jt,v.foreground,z,Pe,Fe)||Ce&&Q.push("xterm-fg-257")}Q.length&&(E.className=Q.join(" "),Q.length=0),!w&&!O&&!A&&K?T++:E.textContent=M,le!==this.defaultSpacing&&(E.style.letterSpacing=`${le}px`),g.push(E),j=ee}return E&&T&&(E.textContent=M),g}_applyMinimumContrast(e,t,i,s,o,a){if(this._optionsService.rawOptions.minimumContrastRatio===1||Pk(s.getCode()))return!1;let u=this._getContrastCache(s),h;if(!o&&!a&&(h=u.getColor(t.rgba,i.rgba)),h===void 0){let p=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);h=Ke.ensureContrastRatio(o||t,a||i,p),u.setColor((o||t).rgba,(a||i).rgba,h??null)}return h?(this._addStyle(e,`color:${h.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let i=this._selectionStart,s=this._selectionEnd;return!i||!s?!1:this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0]}};Kc=tt([ue(1,sg),ue(2,jt),ue(3,ti),ue(4,tn),ue(5,eo),ue(6,Hn)],Kc);function N_(e,t,i){for(;e.length<i;)e=t+e;return e}var Lk=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let i=e.createElement("span");i.classList.add("xterm-char-measure-element");let s=e.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontStyle="italic";let a=e.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold",a.style.fontStyle="italic",this._measureElements=[i,s,o,a],this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(o),this._container.appendChild(a),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&e.length===1&&(s=e.charCodeAt(0))<256){if(this._flat[s]!==-9999)return this._flat[s];let u=this._measure(e,0);return u>0&&(this._flat[s]=u),u}let o=e;t&&(o+="B"),i&&(o+="I");let a=this._holey.get(o);if(a===void 0){let u=0;t&&(u|=1),i&&(u|=2),a=this._measure(e,u),a>0&&this._holey.set(o,a)}return a}_measure(e,t){let i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}},Dk=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,s=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1]){this.clear();return}let o=e.buffers.active.ydisp,a=t[1]-o,u=i[1]-o,h=Math.max(a,0),p=Math.min(u,e.rows-1);if(h>=e.rows||p<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=a,this.viewportEndRow=u,this.viewportCappedStartRow=h,this.viewportCappedEndRow=p,this.startCol=t[0],this.endCol=i[0]}isCellSelected(e,t,i){return this.hasSelection?(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol):!1}};function Tk(){return new Dk}var sc="xterm-dom-renderer-owner-",_r="xterm-rows",kl="xterm-fg-",B_="xterm-bg-",Ns="xterm-focus",bl="xterm-selection",Mk=1,qc=class extends De{constructor(e,t,i,s,o,a,u,h,p,d,m,g,S,v){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=s,this._viewportElement=o,this._helperContainer=a,this._linkifier2=u,this._charSizeService=p,this._optionsService=d,this._bufferService=m,this._coreService=g,this._coreBrowserService=S,this._themeService=v,this._terminalClass=Mk++,this._rowElements=[],this._selectionRenderModel=Tk(),this.onRequestRedraw=this._register(new ne).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(_r),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(bl),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=Rk(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(k=>this._injectCss(k))),this._injectCss(this._themeService.colors),this._rowFactory=h.createInstance(Kc,document),this._element.classList.add(sc+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(k=>this._handleLinkHover(k))),this._register(this._linkifier2.onHideLinkUnderline(k=>this._handleLinkLeave(k))),this._register(Ye(()=>{this._element.classList.remove(sc+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new Lk(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let i of this._rowElements)i.style.width=`${this.dimensions.css.canvas.width}px`,i.style.height=`${this.dimensions.css.cell.height}px`,i.style.lineHeight=`${this.dimensions.css.cell.height}px`,i.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${_r} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${_r} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${_r} .xterm-dim { color: ${Ke.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let i=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,o=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${o} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${_r}.${Ns} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${_r}.${Ns} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${_r}.${Ns} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${_r} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${_r} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${_r} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_r} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${_r} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${bl} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${bl} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${bl} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[a,u]of e.ansi.entries())t+=`${this._terminalSelector} .${kl}${a} { color: ${u.css}; }${this._terminalSelector} .${kl}${a}.xterm-dim { color: ${Ke.multiplyOpacity(u,.5).css}; }${this._terminalSelector} .${B_}${a} { background-color: ${u.css}; }`;t+=`${this._terminalSelector} .${kl}257 { color: ${Ke.opaque(e.background).css}; }${this._terminalSelector} .${kl}257.xterm-dim { color: ${Ke.multiplyOpacity(Ke.opaque(e.background),.5).css}; }${this._terminalSelector} .${B_}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let i=this._rowElements.length;i<=t;i++){let s=this._document.createElement("div");this._rowContainer.appendChild(s),this._rowElements.push(s)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Ns),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Ns),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,i),!this._selectionRenderModel.hasSelection))return;let s=this._selectionRenderModel.viewportStartRow,o=this._selectionRenderModel.viewportEndRow,a=this._selectionRenderModel.viewportCappedStartRow,u=this._selectionRenderModel.viewportCappedEndRow,h=this._document.createDocumentFragment();if(i){let p=e[0]>t[0];h.appendChild(this._createSelectionElement(a,p?t[0]:e[0],p?e[0]:t[0],u-a+1))}else{let p=s===a?e[0]:0,d=a===o?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(a,p,d));let m=u-a-1;if(h.appendChild(this._createSelectionElement(a+1,0,this._bufferService.cols,m)),a!==u){let g=o===u?t[0]:this._bufferService.cols;h.appendChild(this._createSelectionElement(u,0,g))}}this._selectionContainer.appendChild(h)}_createSelectionElement(e,t,i,s=1){let o=this._document.createElement("div"),a=t*this.dimensions.css.cell.width,u=this.dimensions.css.cell.width*(i-t);return a+u>this.dimensions.css.canvas.width&&(u=this.dimensions.css.canvas.width-a),o.style.height=`${s*this.dimensions.css.cell.height}px`,o.style.top=`${e*this.dimensions.css.cell.height}px`,o.style.left=`${a}px`,o.style.width=`${u}px`,o}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let i=this._bufferService.buffer,s=i.ybase+i.y,o=Math.min(i.x,this._bufferService.cols-1),a=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,u=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,h=this._optionsService.rawOptions.cursorInactiveStyle;for(let p=e;p<=t;p++){let d=p+i.ydisp,m=this._rowElements[p],g=i.lines.get(d);if(!m||!g)break;m.replaceChildren(...this._rowFactory.createRow(g,d,d===s,u,h,o,a,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${sc}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,o,a){i<0&&(e=0),s<0&&(t=0);let u=this._bufferService.rows-1;i=Math.max(Math.min(i,u),0),s=Math.max(Math.min(s,u),0),o=Math.min(o,this._bufferService.cols);let h=this._bufferService.buffer,p=h.ybase+h.y,d=Math.min(h.x,o-1),m=this._optionsService.rawOptions.cursorBlink,g=this._optionsService.rawOptions.cursorStyle,S=this._optionsService.rawOptions.cursorInactiveStyle;for(let v=i;v<=s;++v){let k=v+h.ydisp,E=this._rowElements[v],T=h.lines.get(k);if(!E||!T)break;E.replaceChildren(...this._rowFactory.createRow(T,k,k===p,g,S,d,m,this.dimensions.css.cell.width,this._widthCache,a?v===i?e:0:-1,a?(v===s?t:o)-1:-1))}}};qc=tt([ue(7,xh),ue(8,Yl),ue(9,jt),ue(10,Ht),ue(11,tn),ue(12,ti),ue(13,Hn)],qc);var Yc=class extends De{constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this._register(new ne),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new Bk(this._optionsService))}catch{this._measureStrategy=this._register(new Nk(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};Yc=tt([ue(2,jt)],Yc);var kg=class extends De{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},Nk=class extends kg{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},Bk=class extends kg{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},Ik=class extends De{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new Ak(this._window)),this._onDprChange=this._register(new ne),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new ne),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this._register(Rt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(be(this._textarea,"focus",()=>this._isFocused=!0)),this._register(be(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},Ak=class extends De{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new On),this._onDprChange=this._register(new ne),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(Ye(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=be(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},Ok=class extends De{constructor(){super(),this.linkProviders=[],this._register(Ye(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function Dh(e,t,i){let s=i.getBoundingClientRect(),o=e.getComputedStyle(i),a=parseInt(o.getPropertyValue("padding-left")),u=parseInt(o.getPropertyValue("padding-top"));return[t.clientX-s.left-a,t.clientY-s.top-u]}function zk(e,t,i,s,o,a,u,h,p){if(!a)return;let d=Dh(e,t,i);if(d)return d[0]=Math.ceil((d[0]+(p?u/2:0))/u),d[1]=Math.ceil(d[1]/h),d[0]=Math.min(Math.max(d[0],1),s+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),o),d}var Xc=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,o){return zk(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(e,t){let i=Dh(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};Xc=tt([ue(0,ri),ue(1,Yl)],Xc);var Fk=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},bg={};Xx(bg,{getSafariVersion:()=>jk,isChromeOS:()=>Lg,isFirefox:()=>Eg,isIpad:()=>Wk,isIphone:()=>Uk,isLegacyEdge:()=>Hk,isLinux:()=>Th,isMac:()=>Hl,isNode:()=>Xl,isSafari:()=>Pg,isWindows:()=>Rg});var Xl=typeof process<"u"&&"title"in process,to=Xl?"node":navigator.userAgent,ro=Xl?"node":navigator.platform,Eg=to.includes("Firefox"),Hk=to.includes("Edge"),Pg=/^((?!chrome|android).)*safari/i.test(to);function jk(){if(!Pg)return 0;let e=to.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Hl=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(ro),Wk=ro==="iPad",Uk=ro==="iPhone",Rg=["Windows","Win16","Win32","WinCE"].includes(ro),Th=ro.indexOf("Linux")>=0,Lg=/\bCrOS\b/.test(to),Dg=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),i=Math.max(t,i),o=e.timeRemaining(),i*1.5>o){s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),this._start();return}s=o}this.clear()}},$k=class extends Dg{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},Vk=class extends Dg{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},jl=!Xl&&"requestIdleCallback"in window?Vk:$k,Kk=class{constructor(){this._queue=new jl}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},Gc=class extends De{constructor(e,t,i,s,o,a,u,h,p){super(),this._rowCount=e,this._optionsService=i,this._charSizeService=s,this._coreService=o,this._coreBrowserService=h,this._renderer=this._register(new On),this._pausedResizeTask=new Kk,this._observerDisposable=this._register(new On),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new ne),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new ne),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new ne),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new ne),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new Fk((d,m)=>this._renderRows(d,m),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new qk(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(Ye(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(u.onResize(()=>this._fullRefresh())),this._register(u.buffers.onBufferActivate(()=>{var d;return(d=this._renderer.value)==null?void 0:d.clear()})),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(a.onDecorationRegistered(()=>this._fullRefresh())),this._register(a.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(u.cols,u.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(u.buffer.y,u.buffer.y,!0))),this._register(p.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let i=new e.IntersectionObserver(s=>this._handleIntersectionChange(s[s.length-1]),{threshold:0});i.observe(t),this._observerDisposable.value=Ye(()=>i.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let s=this._syncOutputHandler.flush();s&&(e=Math.min(e,s.start),t=Math.max(t,s.end)),i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var i;return(i=this._renderer.value)==null?void 0:i.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,i){var s;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,(s=this._renderer.value)==null||s.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};Gc=tt([ue(2,jt),ue(3,Yl),ue(4,tn),ue(5,eo),ue(6,Ht),ue(7,ti),ue(8,Hn)],Gc);var qk=class{constructor(e,t,i){this._coreBrowserService=e,this._coreService=t,this._onTimeout=i,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function Yk(e,t,i,s){let o=i.buffer.x,a=i.buffer.y;if(!i.buffer.hasScrollback)return Qk(o,a,e,t,i,s)+Gl(a,t,i,s)+Jk(o,a,e,t,i,s);let u;if(a===t)return u=o>e?"D":"C",Xs(Math.abs(o-e),Ys(u,s));u=a>t?"D":"C";let h=Math.abs(a-t),p=Gk(a>t?e:o,i)+(h-1)*i.cols+1+Xk(a>t?o:e);return Xs(p,Ys(u,s))}function Xk(e,t){return e-1}function Gk(e,t){return t.cols-e}function Qk(e,t,i,s,o,a){return Gl(t,s,o,a).length===0?"":Xs(Mg(e,t,e,t-Zi(t,o),!1,o).length,Ys("D",a))}function Gl(e,t,i,s){let o=e-Zi(e,i),a=t-Zi(t,i),u=Math.abs(o-a)-Zk(e,t,i);return Xs(u,Ys(Tg(e,t),s))}function Jk(e,t,i,s,o,a){let u;Gl(t,s,o,a).length>0?u=s-Zi(s,o):u=t;let h=s,p=eb(e,t,i,s,o,a);return Xs(Mg(e,u,i,h,p==="C",o).length,Ys(p,a))}function Zk(e,t,i){var u;let s=0,o=e-Zi(e,i),a=t-Zi(t,i);for(let h=0;h<Math.abs(o-a);h++){let p=Tg(e,t)==="A"?-1:1;(u=i.buffer.lines.get(o+p*h))!=null&&u.isWrapped&&s++}return s}function Zi(e,t){let i=0,s=t.buffer.lines.get(e),o=s==null?void 0:s.isWrapped;for(;o&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),o=s==null?void 0:s.isWrapped;return i}function eb(e,t,i,s,o,a){let u;return Gl(i,s,o,a).length>0?u=s-Zi(s,o):u=t,e<i&&u<=s||e>=i&&u<s?"C":"D"}function Tg(e,t){return e>t?"A":"B"}function Mg(e,t,i,s,o,a){let u=e,h=t,p="";for(;(u!==i||h!==s)&&h>=0&&h<a.buffer.lines.length;)u+=o?1:-1,o&&u>a.cols-1?(p+=a.buffer.translateBufferLineToString(h,!1,e,u),u=0,e=0,h++):!o&&u<0&&(p+=a.buffer.translateBufferLineToString(h,!1,0,e+1),u=a.cols-1,e=u,h--);return p+a.buffer.translateBufferLineToString(h,!1,e,u)}function Ys(e,t){let i=t?"O":"[";return V.ESC+i+e}function Xs(e,t){e=Math.floor(e);let i="";for(let s=0;s<e;s++)i+=t;return i}var tb=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function I_(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var oc=50,rb=15,ib=50,nb=500,sb="",ob=new RegExp(sb,"g"),Qc=class extends De{constructor(e,t,i,s,o,a,u,h,p){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=o,this._mouseService=a,this._optionsService=u,this._renderService=h,this._coreBrowserService=p,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new yr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new ne),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new ne),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new ne),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new ne),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new tb(this._bufferService),this._activeSelectionMode=0,this._register(Ye(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let i=this._bufferService.buffer,s=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let o=e[0]<t[0]?e[0]:t[0],a=e[0]<t[0]?t[0]:e[0];for(let u=e[1];u<=t[1];u++){let h=i.translateBufferLineToString(u,!0,o,a);s.push(h)}}else{let o=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],o));for(let a=e[1]+1;a<=t[1]-1;a++){let u=i.lines.get(a),h=i.translateBufferLineToString(a,!0);u!=null&&u.isWrapped?s[s.length-1]+=h:s.push(h)}if(e[1]!==t[1]){let a=i.lines.get(t[1]),u=i.translateBufferLineToString(t[1],!0,0,t[0]);a&&a.isWrapped?s[s.length-1]+=u:s.push(u)}}return s.map(o=>o.replace(ob," ")).join(Rg?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),Th&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!i||!s||!t?!1:this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){let i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!i||!s?!1:this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var o,a;let i=(a=(o=this._linkifier.currentLink)==null?void 0:o.link)==null?void 0:a.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=I_(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let s=this._getMouseBufferCoords(e);return s?(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=Dh(this._coreBrowserService.window,e,this._screenElement)[1],i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-oc),oc),t/=oc,t/Math.abs(t)+Math.round(t*(rb-1)))}shouldForceSelection(e){return Hl?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),ib)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Hl&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){let s=i.lines.get(this._model.selectionEnd[1]);s&&s.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<nb&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let i=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(i&&i[0]!==void 0&&i[1]!==void 0){let s=Yk(i[0]-1,i[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(s,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!i){this._oldHasSelection&&this._fireOnSelectionChange(e,t,i);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){let o=e.loadCell(s,this._workCell).getChars().length;this._workCell.getWidth()===0?i--:o>1&&t!==s&&(i+=o-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;let o=this._bufferService.buffer,a=o.lines.get(e[1]);if(!a)return;let u=o.translateBufferLineToString(e[1],!1),h=this._convertViewportColToCharacterIndex(a,e[0]),p=h,d=e[0]-h,m=0,g=0,S=0,v=0;if(u.charAt(h)===" "){for(;h>0&&u.charAt(h-1)===" ";)h--;for(;p<u.length&&u.charAt(p+1)===" ";)p++}else{let T=e[0],M=e[0];a.getWidth(T)===0&&(m++,T--),a.getWidth(M)===2&&(g++,M++);let J=a.getString(M).length;for(J>1&&(v+=J-1,p+=J-1);T>0&&h>0&&!this._isCharWordSeparator(a.loadCell(T-1,this._workCell));){a.loadCell(T-1,this._workCell);let I=this._workCell.getChars().length;this._workCell.getWidth()===0?(m++,T--):I>1&&(S+=I-1,h-=I-1),h--,T--}for(;M<a.length&&p+1<u.length&&!this._isCharWordSeparator(a.loadCell(M+1,this._workCell));){a.loadCell(M+1,this._workCell);let I=this._workCell.getChars().length;this._workCell.getWidth()===2?(g++,M++):I>1&&(v+=I-1,p+=I-1),p++,M++}}p++;let k=h+d-m+S,E=Math.min(this._bufferService.cols,p-h+m+g-S-v);if(!(!t&&u.slice(h,p).trim()==="")){if(i&&k===0&&a.getCodePoint(0)!==32){let T=o.lines.get(e[1]-1);if(T&&a.isWrapped&&T.getCodePoint(this._bufferService.cols-1)!==32){let M=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(M){let J=this._bufferService.cols-M.start;k-=J,E+=J}}}if(s&&k+E===this._bufferService.cols&&a.getCodePoint(this._bufferService.cols-1)!==32){let T=o.lines.get(e[1]+1);if(T!=null&&T.isWrapped&&T.getCodePoint(0)!==32){let M=this._getWordAt([0,e[1]+1],!1,!1,!0);M&&(E+=M.length)}}return{start:k,length:E}}}_selectWordAt(e,t){let i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=I_(i,this._bufferService.cols)}};Qc=tt([ue(3,Ht),ue(4,tn),ue(5,Ch),ue(6,jt),ue(7,ri),ue(8,ti)],Qc);var A_=class{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},O_=class{constructor(){this._color=new A_,this._css=new A_}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},ht=Object.freeze((()=>{let e=[Je.toColor("#2e3436"),Je.toColor("#cc0000"),Je.toColor("#4e9a06"),Je.toColor("#c4a000"),Je.toColor("#3465a4"),Je.toColor("#75507b"),Je.toColor("#06989a"),Je.toColor("#d3d7cf"),Je.toColor("#555753"),Je.toColor("#ef2929"),Je.toColor("#8ae234"),Je.toColor("#fce94f"),Je.toColor("#729fcf"),Je.toColor("#ad7fa8"),Je.toColor("#34e2e2"),Je.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){let s=t[i/36%6|0],o=t[i/6%6|0],a=t[i%6];e.push({css:at.toCss(s,o,a),rgba:at.toRgba(s,o,a)})}for(let i=0;i<24;i++){let s=8+i*10;e.push({css:at.toCss(s,s,s),rgba:at.toRgba(s,s,s)})}return e})()),Yi=Je.toColor("#ffffff"),Fs=Je.toColor("#000000"),z_=Je.toColor("#ffffff"),F_=Fs,Bs={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},lb=Yi,Jc=class extends De{constructor(e){super(),this._optionsService=e,this._contrastCache=new O_,this._halfContrastCache=new O_,this._onChangeColors=this._register(new ne),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Yi,background:Fs,cursor:z_,cursorAccent:F_,selectionForeground:void 0,selectionBackgroundTransparent:Bs,selectionBackgroundOpaque:Ke.blend(Fs,Bs),selectionInactiveBackgroundTransparent:Bs,selectionInactiveBackgroundOpaque:Ke.blend(Fs,Bs),scrollbarSliderBackground:Ke.opacity(Yi,.2),scrollbarSliderHoverBackground:Ke.opacity(Yi,.4),scrollbarSliderActiveBackground:Ke.opacity(Yi,.5),overviewRulerBorder:Yi,ansi:ht.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=He(e.foreground,Yi),t.background=He(e.background,Fs),t.cursor=Ke.blend(t.background,He(e.cursor,z_)),t.cursorAccent=Ke.blend(t.background,He(e.cursorAccent,F_)),t.selectionBackgroundTransparent=He(e.selectionBackground,Bs),t.selectionBackgroundOpaque=Ke.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=He(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Ke.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?He(e.selectionForeground,M_):void 0,t.selectionForeground===M_&&(t.selectionForeground=void 0),Ke.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Ke.opacity(t.selectionBackgroundTransparent,.3)),Ke.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Ke.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=He(e.scrollbarSliderBackground,Ke.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=He(e.scrollbarSliderHoverBackground,Ke.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=He(e.scrollbarSliderActiveBackground,Ke.opacity(t.foreground,.5)),t.overviewRulerBorder=He(e.overviewRulerBorder,lb),t.ansi=ht.slice(),t.ansi[0]=He(e.black,ht[0]),t.ansi[1]=He(e.red,ht[1]),t.ansi[2]=He(e.green,ht[2]),t.ansi[3]=He(e.yellow,ht[3]),t.ansi[4]=He(e.blue,ht[4]),t.ansi[5]=He(e.magenta,ht[5]),t.ansi[6]=He(e.cyan,ht[6]),t.ansi[7]=He(e.white,ht[7]),t.ansi[8]=He(e.brightBlack,ht[8]),t.ansi[9]=He(e.brightRed,ht[9]),t.ansi[10]=He(e.brightGreen,ht[10]),t.ansi[11]=He(e.brightYellow,ht[11]),t.ansi[12]=He(e.brightBlue,ht[12]),t.ansi[13]=He(e.brightMagenta,ht[13]),t.ansi[14]=He(e.brightCyan,ht[14]),t.ansi[15]=He(e.brightWhite,ht[15]),e.extendedAnsi){let i=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let s=0;s<i;s++)t.ansi[s+16]=He(e.extendedAnsi[s],ht[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};Jc=tt([ue(0,jt)],Jc);function He(e,t){if(e!==void 0)try{return Je.toColor(e)}catch{}return t}var ab=class{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){let i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(let[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},ub=class{constructor(){this._services=new ab,this._services.set(xh,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let i=rC(e).sort((a,u)=>a.index-u.index),s=[];for(let a of i){let u=this._services.get(a.id);if(!u)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id._id}.`);s.push(u)}let o=i.length>0?i[0].index:t.length;if(t.length!==o)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);return new e(...t,...s)}},cb={trace:0,debug:1,info:2,warn:3,error:4,off:5},hb="xterm.js: ",Zc=class extends De{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=cb[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":hb)+t,...i)}trace(e,...t){var i;this._logLevel<=0&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.trace.bind(this._optionsService.options.logger))??console.log,e,t)}debug(e,...t){var i;this._logLevel<=1&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.debug.bind(this._optionsService.options.logger))??console.log,e,t)}info(e,...t){var i;this._logLevel<=2&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.info.bind(this._optionsService.options.logger))??console.info,e,t)}warn(e,...t){var i;this._logLevel<=3&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.warn.bind(this._optionsService.options.logger))??console.warn,e,t)}error(e,...t){var i;this._logLevel<=4&&this._log(((i=this._optionsService.options.logger)==null?void 0:i.error.bind(this._optionsService.options.logger))??console.error,e,t)}};Zc=tt([ue(0,jt)],Zc);var H_=class extends De{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new ne),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new ne),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new ne),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let s=e;s<this._length-t;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let s=this._length-1;s>=e;s--)this._array[this._getCyclicIndex(s+i.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<i.length;s++)this._array[this._getCyclicIndex(e+s)]=i[s];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){let s=this._length+i.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let o=t-1;o>=0;o--)this.set(e+o+i,this.get(e+o));let s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},Le=3,lt=Object.freeze(new Zs),El=0,lc=2,Hs=class Ng{constructor(t,i,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*Le);let o=i||yr.fromCharData([0,Jm,1,0]);for(let a=0;a<t;++a)this.setCell(a,o);this.length=t}get(t){let i=this._data[t*Le+0],s=i&2097151;return[this._data[t*Le+1],i&2097152?this._combined[t]:s?Li(s):"",i>>22,i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):s]}set(t,i){this._data[t*Le+1]=i[0],i[1].length>1?(this._combined[t]=i[1],this._data[t*Le+0]=t|2097152|i[2]<<22):this._data[t*Le+0]=i[1].charCodeAt(0)|i[2]<<22}getWidth(t){return this._data[t*Le+0]>>22}hasWidth(t){return this._data[t*Le+0]&12582912}getFg(t){return this._data[t*Le+1]}getBg(t){return this._data[t*Le+2]}hasContent(t){return this._data[t*Le+0]&4194303}getCodePoint(t){let i=this._data[t*Le+0];return i&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):i&2097151}isCombined(t){return this._data[t*Le+0]&2097152}getString(t){let i=this._data[t*Le+0];return i&2097152?this._combined[t]:i&2097151?Li(i&2097151):""}isProtected(t){return this._data[t*Le+2]&536870912}loadCell(t,i){return El=t*Le,i.content=this._data[El+0],i.fg=this._data[El+1],i.bg=this._data[El+2],i.content&2097152&&(i.combinedData=this._combined[t]),i.bg&268435456&&(i.extended=this._extendedAttrs[t]),i}setCell(t,i){i.content&2097152&&(this._combined[t]=i.combinedData),i.bg&268435456&&(this._extendedAttrs[t]=i.extended),this._data[t*Le+0]=i.content,this._data[t*Le+1]=i.fg,this._data[t*Le+2]=i.bg}setCellFromCodepoint(t,i,s,o){o.bg&268435456&&(this._extendedAttrs[t]=o.extended),this._data[t*Le+0]=i|s<<22,this._data[t*Le+1]=o.fg,this._data[t*Le+2]=o.bg}addCodepointToCell(t,i,s){let o=this._data[t*Le+0];o&2097152?this._combined[t]+=Li(i):o&2097151?(this._combined[t]=Li(o&2097151)+Li(i),o&=-2097152,o|=2097152):o=i|1<<22,s&&(o&=-12582913,o|=s<<22),this._data[t*Le+0]=o}insertCells(t,i,s){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length-t){let o=new yr;for(let a=this.length-t-i-1;a>=0;--a)this.setCell(t+i+a,this.loadCell(t+a,o));for(let a=0;a<i;++a)this.setCell(t+a,s)}else for(let o=t;o<this.length;++o)this.setCell(o,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(t,i,s){if(t%=this.length,i<this.length-t){let o=new yr;for(let a=0;a<this.length-t-i;++a)this.setCell(t+a,this.loadCell(t+i+a,o));for(let a=this.length-i;a<this.length;++a)this.setCell(a,s)}else for(let o=t;o<this.length;++o)this.setCell(o,s);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,s)}replaceCells(t,i,s,o=!1){if(o){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length&&this.getWidth(i-1)===2&&!this.isProtected(i)&&this.setCellFromCodepoint(i,0,1,s);t<i&&t<this.length;)this.isProtected(t)||this.setCell(t,s),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,s),i<this.length&&this.getWidth(i-1)===2&&this.setCellFromCodepoint(i,0,1,s);t<i&&t<this.length;)this.setCell(t++,s)}resize(t,i){if(t===this.length)return this._data.length*4*lc<this._data.buffer.byteLength;let s=t*Le;if(t>this.length){if(this._data.buffer.byteLength>=s*4)this._data=new Uint32Array(this._data.buffer,0,s);else{let o=new Uint32Array(s);o.set(this._data),this._data=o}for(let o=this.length;o<t;++o)this.setCell(o,i)}else{this._data=this._data.subarray(0,s);let o=Object.keys(this._combined);for(let u=0;u<o.length;u++){let h=parseInt(o[u],10);h>=t&&delete this._combined[h]}let a=Object.keys(this._extendedAttrs);for(let u=0;u<a.length;u++){let h=parseInt(a[u],10);h>=t&&delete this._extendedAttrs[h]}}return this.length=t,s*4*lc<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*lc<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,i=!1){if(i){for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,t);return}this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let i in t._combined)this._combined[i]=t._combined[i];this._extendedAttrs={};for(let i in t._extendedAttrs)this._extendedAttrs[i]=t._extendedAttrs[i];this.isWrapped=t.isWrapped}clone(){let t=new Ng(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let i in this._combined)t._combined[i]=this._combined[i];for(let i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Le+0]&4194303)return t+(this._data[t*Le+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*Le+0]&4194303||this._data[t*Le+2]&50331648)return t+(this._data[t*Le+0]>>22);return 0}copyCellsFrom(t,i,s,o,a){let u=t._data;if(a)for(let p=o-1;p>=0;p--){for(let d=0;d<Le;d++)this._data[(s+p)*Le+d]=u[(i+p)*Le+d];u[(i+p)*Le+2]&268435456&&(this._extendedAttrs[s+p]=t._extendedAttrs[i+p])}else for(let p=0;p<o;p++){for(let d=0;d<Le;d++)this._data[(s+p)*Le+d]=u[(i+p)*Le+d];u[(i+p)*Le+2]&268435456&&(this._extendedAttrs[s+p]=t._extendedAttrs[i+p])}let h=Object.keys(t._combined);for(let p=0;p<h.length;p++){let d=parseInt(h[p],10);d>=i&&(this._combined[d-i+s]=t._combined[d])}}translateToString(t,i,s,o){i=i??0,s=s??this.length,t&&(s=Math.min(s,this.getTrimmedLength())),o&&(o.length=0);let a="";for(;i<s;){let u=this._data[i*Le+0],h=u&2097151,p=u&2097152?this._combined[i]:h?Li(h):Di;if(a+=p,o)for(let d=0;d<p.length;++d)o.push(i);i+=u>>22||1}return o&&o.push(i),a}};function db(e,t,i,s,o,a){let u=[];for(let h=0;h<e.length-1;h++){let p=h,d=e.get(++p);if(!d.isWrapped)continue;let m=[e.get(h)];for(;p<e.length&&d.isWrapped;)m.push(d),d=e.get(++p);if(!a&&s>=h&&s<p){h+=m.length-1;continue}let g=0,S=Gs(m,g,t),v=1,k=0;for(;v<m.length;){let T=Gs(m,v,t),M=T-k,J=i-S,I=Math.min(M,J);m[g].copyCellsFrom(m[v],k,S,I,!1),S+=I,S===i&&(g++,S=0),k+=I,k===T&&(v++,k=0),S===0&&g!==0&&m[g-1].getWidth(i-1)===2&&(m[g].copyCellsFrom(m[g-1],i-1,S++,1,!1),m[g-1].setCell(i-1,o))}m[g].replaceCells(S,i,o);let E=0;for(let T=m.length-1;T>0&&(T>g||m[T].getTrimmedLength()===0);T--)E++;E>0&&(u.push(h+m.length-E),u.push(E)),h+=m.length-1}return u}function fb(e,t){let i=[],s=0,o=t[s],a=0;for(let u=0;u<e.length;u++)if(o===u){let h=t[++s];e.onDeleteEmitter.fire({index:u-a,amount:h}),u+=h-1,a+=h,o=t[++s]}else i.push(u);return{layout:i,countRemoved:a}}function pb(e,t){let i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let s=0;s<i.length;s++)e.set(s,i[s]);e.length=t.length}function _b(e,t,i){let s=[],o=e.map((p,d)=>Gs(e,d,t)).reduce((p,d)=>p+d),a=0,u=0,h=0;for(;h<o;){if(o-h<i){s.push(o-h);break}a+=i;let p=Gs(e,u,t);a>p&&(a-=p,u++);let d=e[u].getWidth(a-1)===2;d&&a--;let m=d?i-1:i;s.push(m),h+=m}return s}function Gs(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();let s=!e[t].hasContent(i-1)&&e[t].getWidth(i-1)===1,o=e[t+1].getWidth(0)===2;return s&&o?i-1:i}var Bg=class Ig{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=Ig._nextId++,this._onDispose=this.register(new ne),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Ji(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};Bg._nextId=1;var mb=Bg,ft={},Xi=ft.B;ft[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};ft.A={"#":""};ft.B=void 0;ft[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};ft.C=ft[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};ft.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};ft.E=ft[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};ft.H=ft[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};ft["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var j_=4294967295,W_=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=lt.clone(),this.savedCharset=Xi,this.markers=[],this._nullCell=yr.fromCharData([0,Jm,1,0]),this._whitespaceCell=yr.fromCharData([0,Di,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new jl,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new H_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Ol),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Ol),this._whitespaceCell}getBlankLine(e,t){return new Hs(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>j_?j_:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=lt);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new H_(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let i=this.getNullCell(lt),s=0,o=this._getCorrectBufferLength(t);if(o>this.lines.maxLength&&(this.lines.maxLength=o),this.lines.length>0){if(this._cols<e)for(let u=0;u<this.lines.length;u++)s+=+this.lines.get(u).resize(e,i);let a=0;if(this._rows<t)for(let u=this._rows;u<t;u++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Hs(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+a+1?(this.ybase--,a++,this.ydisp>0&&this.ydisp--):this.lines.push(new Hs(e,i)));else for(let u=this._rows;u>t;u--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(o<this.lines.maxLength){let u=this.lines.length-o;u>0&&(this.lines.trimStart(u),this.ybase=Math.max(this.ybase-u,0),this.ydisp=Math.max(this.ydisp-u,0),this.savedY=Math.max(this.savedY-u,0)),this.lines.maxLength=o}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),a&&(this.y+=a),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let a=0;a<this.lines.length;a++)s+=+this.lines.get(a).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,s=db(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(lt),i);if(s.length>0){let o=fb(this.lines,s);pb(this.lines,o.layout),this._reflowLargerAdjustViewport(e,t,o.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){let s=this.getNullCell(lt),o=i;for(;o-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new Hs(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){let i=this._optionsService.rawOptions.reflowCursorLine,s=this.getNullCell(lt),o=[],a=0;for(let u=this.lines.length-1;u>=0;u--){let h=this.lines.get(u);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;let p=[h];for(;h.isWrapped&&u>0;)h=this.lines.get(--u),p.unshift(h);if(!i){let I=this.ybase+this.y;if(I>=u&&I<u+p.length)continue}let d=p[p.length-1].getTrimmedLength(),m=_b(p,this._cols,e),g=m.length-p.length,S;this.ybase===0&&this.y!==this.lines.length-1?S=Math.max(0,this.y-this.lines.maxLength+g):S=Math.max(0,this.lines.length-this.lines.maxLength+g);let v=[];for(let I=0;I<g;I++){let U=this.getBlankLine(lt,!0);v.push(U)}v.length>0&&(o.push({start:u+p.length+a,newLines:v}),a+=v.length),p.push(...v);let k=m.length-1,E=m[k];E===0&&(k--,E=m[k]);let T=p.length-g-1,M=d;for(;T>=0;){let I=Math.min(M,E);if(p[k]===void 0)break;if(p[k].copyCellsFrom(p[T],M-I,E-I,I,!0),E-=I,E===0&&(k--,E=m[k]),M-=I,M===0){T--;let U=Math.max(T,0);M=Gs(p,U,this._cols)}}for(let I=0;I<p.length;I++)m[I]<e&&p[I].setCell(m[I],s);let J=g-S;for(;J-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+g,this.ybase+t-1)}if(o.length>0){let u=[],h=[];for(let E=0;E<this.lines.length;E++)h.push(this.lines.get(E));let p=this.lines.length,d=p-1,m=0,g=o[m];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);let S=0;for(let E=Math.min(this.lines.maxLength-1,p+a-1);E>=0;E--)if(g&&g.start>d+S){for(let T=g.newLines.length-1;T>=0;T--)this.lines.set(E--,g.newLines[T]);E++,u.push({index:d+1,amount:g.newLines.length}),S+=g.newLines.length,g=o[++m]}else this.lines.set(E,h[d--]);let v=0;for(let E=u.length-1;E>=0;E--)u[E].index+=v,this.lines.onInsertEmitter.fire(u[E]),v+=u[E].amount;let k=Math.max(0,p+a-this.lines.maxLength);k>0&&this.lines.onTrimEmitter.fire(k)}}translateBufferLineToString(e,t,i=0,s){let o=this.lines.get(e);return o?o.translateToString(t,i,s):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new mb(e);return this.markers.push(t),t.register(this.lines.onTrim(i=>{t.line-=i,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(i=>{t.line>=i.index&&(t.line+=i.amount)})),t.register(this.lines.onDelete(i=>{t.line>=i.index&&t.line<i.index+i.amount&&t.dispose(),t.line>i.index&&(t.line-=i.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},gb=class extends De{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new ne),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new W_(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new W_(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},Ag=2,Og=1,eh=class extends De{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new ne),this.onResize=this._onResize.event,this._onScroll=this._register(new ne),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,Ag),this.rows=Math.max(e.rawOptions.rows||0,Og),this.buffers=this._register(new gb(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let i=this.cols!==e,s=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:i,rowsChanged:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let i=this.buffer,s;s=this._cachedBlankLine,(!s||s.length!==this.cols||s.getFg(0)!==e.fg||s.getBg(0)!==e.bg)&&(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;let o=i.ybase+i.scrollTop,a=i.ybase+i.scrollBottom;if(i.scrollTop===0){let u=i.lines.isFull;a===i.lines.length-1?u?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(a+1,0,s.clone()),u?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{let u=a-o+1;i.lines.shiftElements(o+1,u-1,-1),i.lines.set(a,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t){let i=this.buffer;if(e<0){if(i.ydisp===0)return;this.isUserScrolling=!0}else e+i.ydisp>=i.ybase&&(this.isUserScrolling=!1);let s=i.ydisp;i.ydisp=Math.max(Math.min(i.ydisp+e,i.ybase),0),s!==i.ydisp&&(t||this._onScroll.fire(i.ydisp))}};eh=tt([ue(0,jt)],eh);var Mn={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Hl,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},vb=["normal","bold","100","200","300","400","500","600","700","800","900"],yb=class extends De{constructor(e){super(),this._onOptionChange=this._register(new ne),this.onOptionChange=this._onOptionChange.event;let t={...Mn};for(let i in e)if(i in t)try{let s=e[i];t[i]=this._sanitizeAndValidateOption(i,s)}catch(s){console.error(s)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(Ye(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(i=>{i===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(i=>{e.indexOf(i)!==-1&&t()})}_setupOptions(){let e=i=>{if(!(i in Mn))throw new Error(`No option with key "${i}"`);return this.rawOptions[i]},t=(i,s)=>{if(!(i in Mn))throw new Error(`No option with key "${i}"`);s=this._sanitizeAndValidateOption(i,s),this.rawOptions[i]!==s&&(this.rawOptions[i]=s,this._onOptionChange.fire(i))};for(let i in this.rawOptions){let s={get:e.bind(this,i),set:t.bind(this,i)};Object.defineProperty(this.options,i,s)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=Mn[e]),!Sb(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=Mn[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=vb.includes(t)?t:Mn[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function Sb(e){return e==="block"||e==="underline"||e==="bar"}function js(e,t=5){if(typeof e!="object")return e;let i=Array.isArray(e)?[]:{};for(let s in e)i[s]=t<=1?e[s]:e[s]&&js(e[s],t-1);return i}var U_=Object.freeze({insertMode:!1}),$_=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),th=class extends De{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new ne),this.onData=this._onData.event,this._onUserInput=this._register(new ne),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new ne),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new ne),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=js(U_),this.decPrivateModes=js($_)}reset(){this.modes=js(U_),this.decPrivateModes=js($_)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(s=>s.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};th=tt([ue(0,Ht),ue(1,ig),ue(2,jt)],th);var V_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function ac(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(i|=64,i|=e.action):(i|=e.button&3,e.button&4&&(i|=64),e.button&8&&(i|=128),e.action===32?i|=32:e.action===0&&!t&&(i|=3)),i}var uc=String.fromCharCode,K_={DEFAULT:e=>{let t=[ac(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${uc(t[0])}${uc(t[1])}${uc(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${ac(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${ac(e,!0)};${e.x};${e.y}${t}`}},rh=class extends De{constructor(e,t,i){super(),this._bufferService=e,this._coreService=t,this._optionsService=i,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new ne),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(V_))this.addProtocol(s,V_[s]);for(let s of Object.keys(K_))this.addEncoding(s,K_[s]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,i){if(e.deltaY===0||e.shiftKey||t===void 0||i===void 0)return 0;let s=t/i,o=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=s+0,Math.abs(e.deltaY)<50&&(o*=.3),this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};rh=tt([ue(0,Ht),ue(1,tn),ue(2,jt)],rh);var cc=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],wb=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],dt;function xb(e,t){let i=0,s=t.length-1,o;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=i;)if(o=i+s>>1,e>t[o][1])i=o+1;else if(e<t[o][0])s=o-1;else return!0;return!1}var Cb=class{constructor(){if(this.version="6",!dt){dt=new Uint8Array(65536),dt.fill(1),dt[0]=0,dt.fill(0,1,32),dt.fill(0,127,160),dt.fill(2,4352,4448),dt[9001]=2,dt[9002]=2,dt.fill(2,11904,42192),dt[12351]=1,dt.fill(2,44032,55204),dt.fill(2,63744,64256),dt.fill(2,65040,65050),dt.fill(2,65072,65136),dt.fill(2,65280,65377),dt.fill(2,65504,65511);for(let e=0;e<cc.length;++e)dt.fill(0,cc[e][0],cc[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?dt[e]:xb(e,wb)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),s=i===0&&t!==0;if(s){let o=Gi.extractWidth(t);o===0?s=!1:o>i&&(i=o)}return Gi.createPropertyValue(0,i,s)}},Gi=class Bl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new ne,this.onChange=this._onChange.event;let t=new Cb;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,i,s=!1){return(t&16777215)<<3|(i&3)<<1|(s?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let i=0,s=0,o=t.length;for(let a=0;a<o;++a){let u=t.charCodeAt(a);if(55296<=u&&u<=56319){if(++a>=o)return i+this.wcwidth(u);let d=t.charCodeAt(a);56320<=d&&d<=57343?u=(u-55296)*1024+d-56320+65536:i+=this.wcwidth(d)}let h=this.charProperties(u,s),p=Bl.extractWidth(h);Bl.extractShouldJoin(h)&&(p-=Bl.extractWidth(s)),i+=p,s=h}return i}charProperties(t,i){return this._activeProvider.charProperties(t,i)}},kb=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function q_(e){var s;let t=(s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:s.get(e.cols-1),i=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);i&&t&&(i.isWrapped=t[3]!==0&&t[3]!==32)}var Is=2147483647,bb=256,zg=class ih{constructor(t=32,i=32){if(this.maxLength=t,this.maxSubParamsLength=i,i>bb)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let i=new ih;if(!t.length)return i;for(let s=Array.isArray(t[0])?1:0;s<t.length;++s){let o=t[s];if(Array.isArray(o))for(let a=0;a<o.length;++a)i.addSubParam(o[a]);else i.addParam(o)}return i}clone(){let t=new ih(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let i=0;i<this.length;++i){t.push(this.params[i]);let s=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-s>0&&t.push(Array.prototype.slice.call(this._subParams,s,o))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>Is?Is:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>Is?Is:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let i=this._subParamsIdx[t]>>8,s=this._subParamsIdx[t]&255;return s-i>0?this._subParams.subarray(i,s):null}getSubParamsAll(){let t={};for(let i=0;i<this.length;++i){let s=this._subParamsIdx[i]>>8,o=this._subParamsIdx[i]&255;o-s>0&&(t[i]=this._subParams.slice(s,o))}return t}addDigit(t){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let s=this._digitIsSub?this._subParams:this.params,o=s[i-1];s[i-1]=~o?Math.min(o*10+t,Is):t}},As=[],Eb=class{constructor(){this._state=0,this._active=As,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let s=i.indexOf(t);s!==-1&&i.splice(s,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=As}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=As,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||As,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,i){if(!this._active.length)this._handlerFb(this._id,"PUT",ql(e,t,i));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i)}start(){this.reset(),this._state=1}put(e,t,i){if(this._state!==3){if(this._state===1)for(;t<i;){let s=e[t++];if(s===59){this._state=2,this._start();break}if(s<48||57<s){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+s-48}this._state===2&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let i=!1,s=this._active.length-1,o=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;s>=0&&(i=this._active[s].end(e),i!==!0);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}this._active=As,this._id=-1,this._state=0}}},sr=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=ql(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(i=>(this._data="",this._hitLimit=!1,i));return this._data="",this._hitLimit=!1,t}},Os=[],Pb=class{constructor(){this._handlers=Object.create(null),this._active=Os,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Os}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let i=this._handlers[e];return i.push(t),{dispose:()=>{let s=i.indexOf(t);s!==-1&&i.splice(s,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Os,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Os,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let i=this._active.length-1;i>=0;i--)this._active[i].hook(t)}put(e,t,i){if(!this._active.length)this._handlerFb(this._ident,"PUT",ql(e,t,i));else for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let i=!1,s=this._active.length-1,o=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,o=this._stack.fallThrough,this._stack.paused=!1),!o&&i===!1){for(;s>=0&&(i=this._active[s].unhook(e),i!==!0);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}this._active=Os,this._ident=0}},Ws=new zg;Ws.addParam(0);var Y_=class{constructor(e){this._handler=e,this._data="",this._params=Ws,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():Ws,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=ql(e,t,i),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(i=>(this._params=Ws,this._data="",this._hitLimit=!1,i));return this._params=Ws,this._data="",this._hitLimit=!1,t}},Rb=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let o=0;o<e.length;o++)this.table[t<<8|e[o]]=i<<4|s}},gr=160,Lb=(function(){let e=new Rb(4095),t=Array.apply(null,Array(256)).map((h,p)=>p),i=(h,p)=>t.slice(h,p),s=i(32,127),o=i(0,24);o.push(25),o.push.apply(o,i(28,32));let a=i(0,14),u;e.setDefault(1,0),e.addMany(s,0,2,0);for(u in a)e.addMany([24,26,153,154],u,3,0),e.addMany(i(128,144),u,3,0),e.addMany(i(144,152),u,3,0),e.add(156,u,0,0),e.add(27,u,11,1),e.add(157,u,4,8),e.addMany([152,158,159],u,0,7),e.add(155,u,11,3),e.add(144,u,11,9);return e.addMany(o,0,3,0),e.addMany(o,1,3,1),e.add(127,1,0,1),e.addMany(o,8,0,8),e.addMany(o,3,3,3),e.add(127,3,0,3),e.addMany(o,4,3,4),e.add(127,4,0,4),e.addMany(o,6,3,6),e.addMany(o,5,3,5),e.add(127,5,0,5),e.addMany(o,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(o,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(o,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(o,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(o,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(o,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(o,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(gr,0,2,0),e.add(gr,8,5,8),e.add(gr,6,0,6),e.add(gr,11,0,11),e.add(gr,13,13,13),e})(),Db=class extends De{constructor(e=Lb){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new zg,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,i,s)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,i)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(Ye(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new Eb),this._dcsParser=this._register(new Pb),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let o=0;o<e.intermediates.length;++o){let a=e.intermediates.charCodeAt(o);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=a}}if(e.final.length!==1)throw new Error("final must be a single byte");let s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let i=this._identifier(e,[48,126]);this._escHandlers[i]===void 0&&(this._escHandlers[i]=[]);let s=this._escHandlers[i];return s.push(t),{dispose:()=>{let o=s.indexOf(t);o!==-1&&s.splice(o,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let i=this._identifier(e);this._csiHandlers[i]===void 0&&(this._csiHandlers[i]=[]);let s=this._csiHandlers[i];return s.push(t),{dispose:()=>{let o=s.indexOf(t);o!==-1&&s.splice(o,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,o){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=o}parse(e,t,i){let s=0,o=0,a=0,u;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,a=this._parseStack.chunkPos+1;else{if(i===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let h=this._parseStack.handlers,p=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(i===!1&&p>-1){for(;p>=0&&(u=h[p](this._params),u!==!0);p--)if(u instanceof Promise)return this._parseStack.handlerPos=p,u}this._parseStack.handlers=[];break;case 4:if(i===!1&&p>-1){for(;p>=0&&(u=h[p](),u!==!0);p--)if(u instanceof Promise)return this._parseStack.handlerPos=p,u}this._parseStack.handlers=[];break;case 6:if(s=e[this._parseStack.chunkPos],u=this._dcsParser.unhook(s!==24&&s!==26,i),u)return u;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=e[this._parseStack.chunkPos],u=this._oscParser.end(s!==24&&s!==26,i),u)return u;s===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,a=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let h=a;h<t;++h){switch(s=e[h],o=this._transitions.table[this.currentState<<8|(s<160?s:gr)],o>>4){case 2:for(let S=h+1;;++S){if(S>=t||(s=e[S])<32||s>126&&s<gr){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(s=e[S])<32||s>126&&s<gr){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(s=e[S])<32||s>126&&s<gr){this._printHandler(e,h,S),h=S-1;break}if(++S>=t||(s=e[S])<32||s>126&&s<gr){this._printHandler(e,h,S),h=S-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:h,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let p=this._csiHandlers[this._collect<<8|s],d=p?p.length-1:-1;for(;d>=0&&(u=p[d](this._params),u!==!0);d--)if(u instanceof Promise)return this._preserveStack(3,p,d,o,h),u;d<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingJoinState=0;break;case 8:do switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}while(++h<t&&(s=e[h])>47&&s<60);h--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:let m=this._escHandlers[this._collect<<8|s],g=m?m.length-1:-1;for(;g>=0&&(u=m[g](),u!==!0);g--)if(u instanceof Promise)return this._preserveStack(4,m,g,o,h),u;g<0&&this._escHandlerFb(this._collect<<8|s),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let S=h+1;;++S)if(S>=t||(s=e[S])===24||s===26||s===27||s>127&&s<gr){this._dcsParser.put(e,h,S),h=S-1;break}break;case 14:if(u=this._dcsParser.unhook(s!==24&&s!==26),u)return this._preserveStack(6,[],0,o,h),u;s===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let S=h+1;;S++)if(S>=t||(s=e[S])<32||s>127&&s<gr){this._oscParser.put(e,h,S),h=S-1;break}break;case 6:if(u=this._oscParser.end(s!==24&&s!==26),u)return this._preserveStack(5,[],0,o,h),u;s===27&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=o&15}}},Tb=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,Mb=/^[\da-f]+$/;function X_(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let i=Tb.exec(t);if(i){let s=i[1]?15:i[4]?255:i[7]?4095:65535;return[Math.round(parseInt(i[1]||i[4]||i[7]||i[10],16)/s*255),Math.round(parseInt(i[2]||i[5]||i[8]||i[11],16)/s*255),Math.round(parseInt(i[3]||i[6]||i[9]||i[12],16)/s*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),Mb.exec(t)&&[3,6,9,12].includes(t.length))){let i=t.length/3,s=[0,0,0];for(let o=0;o<3;++o){let a=parseInt(t.slice(i*o,i*o+i),16);s[o]=i===1?a<<4:i===2?a:i===3?a>>4:a>>8}return s}}function hc(e,t){let i=e.toString(16),s=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}function Nb(e,t=16){let[i,s,o]=e;return`rgb:${hc(i,t)}/${hc(s,t)}/${hc(o,t)}`}var Bb={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Ri=131072,G_=10;function Q_(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var J_=5e3,Z_=0,Ib=class extends De{constructor(e,t,i,s,o,a,u,h,p=new Db){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=o,this._oscLinkService=a,this._coreMouseService=u,this._unicodeService=h,this._parser=p,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new eC,this._utf8Decoder=new tC,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=lt.clone(),this._eraseAttrDataInternal=lt.clone(),this._onRequestBell=this._register(new ne),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new ne),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new ne),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new ne),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new ne),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new ne),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new ne),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new ne),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new ne),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new ne),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new ne),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new ne),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new ne),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new nh(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,m)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:m.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,m,g)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:m,data:g})}),this._parser.setDcsHandlerFallback((d,m,g)=>{m==="HOOK"&&(g=g.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:m,payload:g})}),this._parser.setPrintHandler((d,m,g)=>this.print(d,m,g)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(V.BEL,()=>this.bell()),this._parser.setExecuteHandler(V.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(V.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(V.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(V.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(V.BS,()=>this.backspace()),this._parser.setExecuteHandler(V.HT,()=>this.tab()),this._parser.setExecuteHandler(V.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(V.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(Ml.IND,()=>this.index()),this._parser.setExecuteHandler(Ml.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(Ml.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new sr(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new sr(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new sr(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new sr(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new sr(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new sr(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new sr(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new sr(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new sr(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new sr(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new sr(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new sr(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in ft)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Y_((d,m)=>this.requestStatusString(d,m)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,i)=>setTimeout(()=>i("#SLOW_TIMEOUT"),J_))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${J_} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,o=this._activeBuffer.y,a=0,u=this._parseStack.paused;if(u){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,o=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Ri&&(a=this._parseStack.position+Ri)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Ri&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Ri))),u||this._dirtyRowTracker.clearRange(),e.length>Ri)for(let d=a;d<e.length;d+=Ri){let m=d+Ri<e.length?d+Ri:e.length,g=typeof e=="string"?this._stringDecoder.decode(e.substring(d,m),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,m),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,g))return this._preserveStack(s,o,g,d),this._logSlowResolvingAsync(i),i}else if(!u){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,d))return this._preserveStack(s,o,d,0),this._logSlowResolvingAsync(i),i}(this._activeBuffer.x!==s||this._activeBuffer.y!==o)&&this._onCursorMove.fire();let h=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),p=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);p<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(p,this._bufferService.rows-1),end:Math.min(h,this._bufferService.rows-1)})}print(e,t,i){let s,o,a=this._charsetService.charset,u=this._optionsService.rawOptions.screenReaderMode,h=this._bufferService.cols,p=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,m=this._curAttrData,g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&g.getWidth(this._activeBuffer.x-1)===2&&g.setCellFromCodepoint(this._activeBuffer.x-1,0,1,m);let S=this._parser.precedingJoinState;for(let v=t;v<i;++v){if(s=e[v],s<127&&a){let M=a[String.fromCharCode(s)];M&&(s=M.charCodeAt(0))}let k=this._unicodeService.charProperties(s,S);o=Gi.extractWidth(k);let E=Gi.extractShouldJoin(k),T=E?Gi.extractWidth(S):0;if(S=k,u&&this._onA11yChar.fire(Li(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+o-T>h){if(p){let M=g,J=this._activeBuffer.x-T;for(this._activeBuffer.x=T,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),g=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),T>0&&g instanceof Hs&&g.copyCellsFrom(M,J,0,T,!1);J<h;)M.setCellFromCodepoint(J++,0,1,m)}else if(this._activeBuffer.x=h-1,o===2)continue}if(E&&this._activeBuffer.x){let M=g.getWidth(this._activeBuffer.x-1)?1:2;g.addCodepointToCell(this._activeBuffer.x-M,s,o);for(let J=o-T;--J>=0;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,m);continue}if(d&&(g.insertCells(this._activeBuffer.x,o-T,this._activeBuffer.getNullCell(m)),g.getWidth(h-1)===2&&g.setCellFromCodepoint(h-1,0,1,m)),g.setCellFromCodepoint(this._activeBuffer.x++,s,o,m),o>0)for(;--o;)g.setCellFromCodepoint(this._activeBuffer.x++,0,0,m)}this._parser.precedingJoinState=S,this._activeBuffer.x<h&&i-t>0&&g.getWidth(this._activeBuffer.x)===0&&!g.hasContent(this._activeBuffer.x)&&g.setCellFromCodepoint(this._activeBuffer.x,0,1,m),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,i=>Q_(i.params[0],this._optionsService.rawOptions.windowOptions)?t(i):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new Y_(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new sr(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,o=!1){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);a.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),o),s&&(a.isWrapped=!1)}_resetBufferLine(e,t=!1){let i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){var s;this._restrictCursor(this._bufferService.cols);let i;switch(e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(i=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,i-1);i--&&!((s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i))!=null&&s.getTrimmedLength()););for(;i>=0;i--)this._bufferService.scroll(this._eraseAttrData())}else{for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let o=this._activeBuffer.lines.length-this._bufferService.rows;o>0&&(this._activeBuffer.lines.trimStart(o),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-o,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-o,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(o-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let i=this._activeBuffer.ybase+this._activeBuffer.y,s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(lt));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);s.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),s.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let i=e.params[0]||1,s=Gi.extractWidth(t),o=this._activeBuffer.x-s,a=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(o),u=new Uint32Array(a.length*i),h=0;for(let d=0;d<a.length;){let m=a.codePointAt(d)||0;u[h++]=m,d+=m>65535?2:1}let p=h;for(let d=1;d<i;++d)u.copyWithin(p,0,h),p+=h;return this.print(u,0,p),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(V.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(V.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(V.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(V.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(V.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Xi),this._charsetService.setgCharset(1,Xi),this._charsetService.setgCharset(2,Xi),this._charsetService.setgCharset(3,Xi);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){(E=>(E[E.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",E[E.SET=1]="SET",E[E.RESET=2]="RESET",E[E.PERMANENTLY_SET=3]="PERMANENTLY_SET",E[E.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(void 0||(i={}));let s=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:a}=this._coreMouseService,u=this._coreService,{buffers:h,cols:p}=this._bufferService,{active:d,alt:m}=h,g=this._optionsService.rawOptions,S=(E,T)=>(u.triggerDataEvent(`${V.ESC}[${t?"":"?"}${E};${T}$y`),!0),v=E=>E?1:2,k=e.params[0];return t?k===2?S(k,4):k===4?S(k,v(u.modes.insertMode)):k===12?S(k,3):k===20?S(k,v(g.convertEol)):S(k,0):k===1?S(k,v(s.applicationCursorKeys)):k===3?S(k,g.windowOptions.setWinLines?p===80?2:p===132?1:0:0):k===6?S(k,v(s.origin)):k===7?S(k,v(s.wraparound)):k===8?S(k,3):k===9?S(k,v(o==="X10")):k===12?S(k,v(g.cursorBlink)):k===25?S(k,v(!u.isCursorHidden)):k===45?S(k,v(s.reverseWraparound)):k===66?S(k,v(s.applicationKeypad)):k===67?S(k,4):k===1e3?S(k,v(o==="VT200")):k===1002?S(k,v(o==="DRAG")):k===1003?S(k,v(o==="ANY")):k===1004?S(k,v(s.sendFocus)):k===1005?S(k,4):k===1006?S(k,v(a==="SGR")):k===1015?S(k,4):k===1016?S(k,v(a==="SGR_PIXELS")):k===1048?S(k,1):k===47||k===1047||k===1049?S(k,v(d===m)):k===2004?S(k,v(s.bracketedPasteMode)):k===2026?S(k,v(s.synchronizedOutput)):S(k,0)}_updateAttrColor(e,t,i,s,o){return t===2?(e|=50331648,e&=-16777216,e|=Zs.fromColorRGB([i,s,o])):t===5&&(e&=-50331904,e|=33554432|i&255),e}_extractColor(e,t,i){let s=[0,0,-1,0,0,0],o=0,a=0;do{if(s[a+o]=e.params[t+a],e.hasSubParams(t+a)){let u=e.getSubParams(t+a),h=0;do s[1]===5&&(o=1),s[a+h+1+o]=u[h];while(++h<u.length&&h+a+1+o<s.length);break}if(s[1]===5&&a+o>=2||s[1]===2&&a+o>=5)break;s[1]&&(o=1)}while(++a+t<e.length&&a+o<s.length);for(let u=2;u<s.length;++u)s[u]===-1&&(s[u]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return a}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=lt.fg,e.bg=lt.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,i,s=this._curAttrData;for(let o=0;o<t;o++)i=e.params[o],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777216|i-90|8):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777216|i-100|8):i===0?this._processSGR0(s):i===1?s.fg|=134217728:i===3?s.bg|=67108864:i===4?(s.fg|=268435456,this._processUnderline(e.hasSubParams(o)?e.getSubParams(o)[0]:1,s)):i===5?s.fg|=536870912:i===7?s.fg|=67108864:i===8?s.fg|=1073741824:i===9?s.fg|=2147483648:i===2?s.bg|=134217728:i===21?this._processUnderline(2,s):i===22?(s.fg&=-134217729,s.bg&=-134217729):i===23?s.bg&=-67108865:i===24?(s.fg&=-268435457,this._processUnderline(0,s)):i===25?s.fg&=-536870913:i===27?s.fg&=-67108865:i===28?s.fg&=-1073741825:i===29?s.fg&=2147483647:i===39?(s.fg&=-67108864,s.fg|=lt.fg&16777215):i===49?(s.bg&=-67108864,s.bg|=lt.bg&16777215):i===38||i===48||i===58?o+=this._extractColor(e,o,s):i===53?s.bg|=1073741824:i===55?s.bg&=-1073741825:i===59?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):i===100?(s.fg&=-67108864,s.fg|=lt.fg&16777215,s.bg&=-67108864,s.bg|=lt.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${V.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${V.ESC}[${t};${i}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${V.ESC}[?${t};${i}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=lt.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let i=t%2===1;this._coreService.decPrivateModes.cursorBlink=i}return!0}setScrollRegion(e){let t=e.params[0]||1,i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||i===0)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!Q_(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${V.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>G_&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>G_&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],i=e.split(";");for(;i.length>1;){let s=i.shift(),o=i.shift();if(/^\d+$/.exec(s)){let a=parseInt(s);if(em(a))if(o==="?")t.push({type:0,index:a});else{let u=X_(o);u&&t.push({type:1,index:a,color:u})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let i=e.slice(0,t).trim(),s=e.slice(t+1);return s?this._createHyperlink(i,s):i.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let i=e.split(":"),s,o=i.findIndex(a=>a.startsWith("id="));return o!==-1&&(s=i[o].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let i=e.split(";");for(let s=0;s<i.length&&!(t>=this._specialColors.length);++s,++t)if(i[s]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let o=X_(i[s]);o&&this._onColor.fire([{type:1,index:this._specialColors[t],color:o}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],i=e.split(";");for(let s=0;s<i.length;++s)if(/^\d+$/.exec(i[s])){let o=parseInt(i[s]);em(o)&&t.push({type:2,index:o})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Xi),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(Bb[e[0]],ft[e[1]]||Xi),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=lt.clone(),this._eraseAttrDataInternal=lt.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new yr;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let i=u=>(this._coreService.triggerDataEvent(`${V.ESC}${u}${V.ESC}\\`),!0),s=this._bufferService.buffer,o=this._optionsService.rawOptions;return i(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${s.scrollTop+1};${s.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[o.cursorStyle]-(o.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},nh=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(Z_=e,e=t,t=Z_),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};nh=tt([ue(0,Ht)],nh);function em(e){return 0<=e&&e<256}var Ab=5e7,tm=12,Ob=50,zb=class extends De{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new ne),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let i;for(;i=this._writeBuffer.shift();){this._action(i);let s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>Ab)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let i=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let s=this._writeBuffer[this._bufferOffset],o=this._action(s,t);if(o){let u=h=>performance.now()-i>=tm?setTimeout(()=>this._innerWrite(0,h)):this._innerWrite(i,h);o.catch(h=>(queueMicrotask(()=>{throw h}),Promise.resolve(!1))).then(u);return}let a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=s.length,performance.now()-i>=tm)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>Ob&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},sh=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let h=t.addMarker(t.ybase+t.y),p={data:e,id:this._nextId++,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(p,h)),this._dataByLinkId.set(p.id,p),p.id}let i=e,s=this._getEntryIdKey(i),o=this._entriesWithId.get(s);if(o)return this.addLineToLink(o.id,t.ybase+t.y),o.id;let a=t.addMarker(t.ybase+t.y),u={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(u,a)),this._entriesWithId.set(u.key,u),this._dataByLinkId.set(u.id,u),u.id}addLineToLink(e,t){let i=this._dataByLinkId.get(e);if(i&&i.lines.every(s=>s.line!==t)){let s=this._bufferService.buffer.addMarker(t);i.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(i,s))}}getLinkData(e){var t;return(t=this._dataByLinkId.get(e))==null?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let i=e.lines.indexOf(t);i!==-1&&(e.lines.splice(i,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};sh=tt([ue(0,Ht)],sh);var rm=!1,Fb=class extends De{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new On),this._onBinary=this._register(new ne),this.onBinary=this._onBinary.event,this._onData=this._register(new ne),this.onData=this._onData.event,this._onLineFeed=this._register(new ne),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new ne),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new ne),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new ne),this._instantiationService=new ub,this.optionsService=this._register(new yb(e)),this._instantiationService.setService(jt,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(eh)),this._instantiationService.setService(Ht,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(Zc)),this._instantiationService.setService(ig,this._logService),this.coreService=this._register(this._instantiationService.createInstance(th)),this._instantiationService.setService(tn,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(rh)),this._instantiationService.setService(rg,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Gi)),this._instantiationService.setService(sC,this.unicodeService),this._charsetService=this._instantiationService.createInstance(kb),this._instantiationService.setService(nC,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(sh),this._instantiationService.setService(ng,this._oscLinkService),this._inputHandler=this._register(new Ib(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Rt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Rt.forward(this._bufferService.onResize,this._onResize)),this._register(Rt.forward(this.coreService.onData,this._onData)),this._register(Rt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new zb((t,i)=>this._inputHandler.parse(t,i))),this._register(Rt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new ne),this._onScroll.event(e=>{var t;(t=this._onScrollApi)==null||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!rm&&(this._logService.warn("writeSync is unreliable and will be removed soon."),rm=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,Ag),t=Math.max(t,Og),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(q_.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(q_(this._bufferService),!1))),this._windowsWrappingHeuristics.value=Ye(()=>{for(let t of e)t.dispose()})}}},Hb={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function jb(e,t,i,s){var u;let o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?o.key=V.ESC+"OA":o.key=V.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?o.key=V.ESC+"OD":o.key=V.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?o.key=V.ESC+"OC":o.key=V.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?o.key=V.ESC+"OB":o.key=V.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\b":V.DEL,e.altKey&&(o.key=V.ESC+o.key);break;case 9:if(e.shiftKey){o.key=V.ESC+"[Z";break}o.key=V.HT,o.cancel=!0;break;case 13:o.key=e.altKey?V.ESC+V.CR:V.CR,o.cancel=!0;break;case 27:o.key=V.ESC,e.altKey&&(o.key=V.ESC+V.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?o.key=V.ESC+"[1;"+(a+1)+"D":t?o.key=V.ESC+"OD":o.key=V.ESC+"[D";break;case 39:if(e.metaKey)break;a?o.key=V.ESC+"[1;"+(a+1)+"C":t?o.key=V.ESC+"OC":o.key=V.ESC+"[C";break;case 38:if(e.metaKey)break;a?o.key=V.ESC+"[1;"+(a+1)+"A":t?o.key=V.ESC+"OA":o.key=V.ESC+"[A";break;case 40:if(e.metaKey)break;a?o.key=V.ESC+"[1;"+(a+1)+"B":t?o.key=V.ESC+"OB":o.key=V.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(o.key=V.ESC+"[2~");break;case 46:a?o.key=V.ESC+"[3;"+(a+1)+"~":o.key=V.ESC+"[3~";break;case 36:a?o.key=V.ESC+"[1;"+(a+1)+"H":t?o.key=V.ESC+"OH":o.key=V.ESC+"[H";break;case 35:a?o.key=V.ESC+"[1;"+(a+1)+"F":t?o.key=V.ESC+"OF":o.key=V.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=V.ESC+"[5;"+(a+1)+"~":o.key=V.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=V.ESC+"[6;"+(a+1)+"~":o.key=V.ESC+"[6~";break;case 112:a?o.key=V.ESC+"[1;"+(a+1)+"P":o.key=V.ESC+"OP";break;case 113:a?o.key=V.ESC+"[1;"+(a+1)+"Q":o.key=V.ESC+"OQ";break;case 114:a?o.key=V.ESC+"[1;"+(a+1)+"R":o.key=V.ESC+"OR";break;case 115:a?o.key=V.ESC+"[1;"+(a+1)+"S":o.key=V.ESC+"OS";break;case 116:a?o.key=V.ESC+"[15;"+(a+1)+"~":o.key=V.ESC+"[15~";break;case 117:a?o.key=V.ESC+"[17;"+(a+1)+"~":o.key=V.ESC+"[17~";break;case 118:a?o.key=V.ESC+"[18;"+(a+1)+"~":o.key=V.ESC+"[18~";break;case 119:a?o.key=V.ESC+"[19;"+(a+1)+"~":o.key=V.ESC+"[19~";break;case 120:a?o.key=V.ESC+"[20;"+(a+1)+"~":o.key=V.ESC+"[20~";break;case 121:a?o.key=V.ESC+"[21;"+(a+1)+"~":o.key=V.ESC+"[21~";break;case 122:a?o.key=V.ESC+"[23;"+(a+1)+"~":o.key=V.ESC+"[23~";break;case 123:a?o.key=V.ESC+"[24;"+(a+1)+"~":o.key=V.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?o.key=V.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?o.key=V.DEL:e.keyCode===219?o.key=V.ESC:e.keyCode===220?o.key=V.FS:e.keyCode===221&&(o.key=V.GS);else if((!i||s)&&e.altKey&&!e.metaKey){let h=(u=Hb[e.keyCode])==null?void 0:u[e.shiftKey?1:0];if(h)o.key=V.ESC+h;else if(e.keyCode>=65&&e.keyCode<=90){let p=e.ctrlKey?e.keyCode-64:e.keyCode+32,d=String.fromCharCode(p);e.shiftKey&&(d=d.toUpperCase()),o.key=V.ESC+d}else if(e.keyCode===32)o.key=V.ESC+(e.ctrlKey?V.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let p=e.code.slice(3,4);e.shiftKey||(p=p.toLowerCase()),o.key=V.ESC+p,o.cancel=!0}}else i&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(o.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?o.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(o.key=V.US),e.key==="@"&&(o.key=V.NUL));break}return o}var nt=0,Wb=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new jl,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new jl,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((o,a)=>this._getKey(o)-this._getKey(a)),t=0,i=0,s=new Array(this._array.length+this._insertedValues.length);for(let o=0;o<s.length;o++)i>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[i])?(s[o]=e[t],t++):s[o]=this._array[i++];this._array=s,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(nt=this._search(t),nt===-1)||this._getKey(this._array[nt])!==t)return!1;do if(this._array[nt]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(nt),!0;while(++nt<this._array.length&&this._getKey(this._array[nt])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((o,a)=>o-a),t=0,i=new Array(this._array.length-e.length),s=0;for(let o=0;o<this._array.length;o++)e[t]===o?t++:i[s++]=this._array[o];this._array=i,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(nt=this._search(e),!(nt<0||nt>=this._array.length)&&this._getKey(this._array[nt])===e))do yield this._array[nt];while(++nt<this._array.length&&this._getKey(this._array[nt])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(nt=this._search(e),!(nt<0||nt>=this._array.length)&&this._getKey(this._array[nt])===e))do t(this._array[nt]);while(++nt<this._array.length&&this._getKey(this._array[nt])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1,o=this._getKey(this._array[s]);if(o>e)i=s-1;else if(o<e)t=s+1;else{for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}}return t}},dc=0,im=0,Ub=class extends De{constructor(){super(),this._decorations=new Wb(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new ne),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new ne),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(Ye(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new $b(e);if(t){let i=t.marker.onDispose(()=>t.dispose()),s=t.onDispose(()=>{s.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),i.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let s=0,o=0;for(let a of this._decorations.getKeyIterator(t))s=a.options.x??0,o=s+(a.options.width??1),e>=s&&e<o&&(!i||(a.options.layer??"bottom")===i)&&(yield a)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,o=>{dc=o.options.x??0,im=dc+(o.options.width??1),e>=dc&&e<im&&(!i||(o.options.layer??"bottom")===i)&&s(o)})}},$b=class extends Ti{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new ne),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new ne),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Je.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Je.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},Vb=1e3,Kb=class{constructor(e,t=Vb){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let s=performance.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){let o=s-this._lastRefreshMs,a=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},a)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},nm=20,Wl=class extends De{constructor(e,t,i,s){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let o=this._coreBrowserService.mainDocument;this._accessibilityContainer=o.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=o.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=o.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new Kb(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(a=>this._handleResize(a.rows))),this._register(this._terminal.onRender(a=>this._refreshRows(a.start,a.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(a=>this._handleChar(a))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(a=>this._handleTab(a))),this._register(this._terminal.onKey(a=>this._handleKey(a.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(be(o,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(Ye(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<nm+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===nm+1&&(this._liveRegion.textContent+=bc.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let i=this._terminal.buffer,s=i.lines.length.toString();for(let o=e;o<=t;o++){let a=i.lines.get(i.ydisp+o),u=[],h=(a==null?void 0:a.translateToString(!0,void 0,void 0,u))||"",p=(i.ydisp+o+1).toString(),d=this._rowElements[o];d&&(h.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=h,this._rowColumns.set(d,u)),d.setAttribute("aria-posinset",p),d.setAttribute("aria-setsize",s),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let i=e.target,s=this._rowElements[t===0?1:this._rowElements.length-2],o=i.getAttribute("aria-posinset"),a=t===0?"1":`${this._terminal.buffer.lines.length}`;if(o===a||e.relatedTarget!==s)return;let u,h;if(t===0?(u=i,h=this._rowElements.pop(),this._rowContainer.removeChild(h)):(u=this._rowElements.shift(),h=i,this._rowContainer.removeChild(u)),u.removeEventListener("focus",this._topBoundaryFocusListener),h.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let p=this._createAccessibilityTreeNode();this._rowElements.unshift(p),this._rowContainer.insertAdjacentElement("afterbegin",p)}else{let p=this._createAccessibilityTreeNode();this._rowElements.push(p),this._rowContainer.appendChild(p)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var h;if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let s=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:s,offset:((h=s.textContent)==null?void 0:h.length)??0}),!this._rowContainer.contains(i.node))return;let o=({node:p,offset:d})=>{let m=p instanceof Text?p.parentNode:p,g=parseInt(m==null?void 0:m.getAttribute("aria-posinset"),10)-1;if(isNaN(g))return console.warn("row is invalid. Race condition?"),null;let S=this._rowColumns.get(m);if(!S)return console.warn("columns is null. Race condition?"),null;let v=d<S.length?S[d]:S.slice(-1)[0]+1;return v>=this._terminal.cols&&(++g,v=0),{row:g,column:v}},a=o(t),u=o(i);if(!(!a||!u)){if(a.row>u.row||a.row===u.row&&a.column>=u.column)throw new Error("invalid range");this._terminal.select(a.column,a.row,(u.row-a.row)*this._terminal.cols-a.column+u.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var o,a;e.style.transform="";let t=e.getBoundingClientRect().width,i=(a=(o=this._rowColumns.get(e))==null?void 0:o.slice(-1))==null?void 0:a[0];if(!i)return;let s=i*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${s/t})`}};Wl=tt([ue(1,xh),ue(2,ti),ue(3,ri)],Wl);var oh=class extends De{constructor(e,t,i,s,o){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=s,this._linkProviderService=o,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new ne),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new ne),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(Ye(()=>{var a;Ji(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(a=this._activeProviderReplies)==null||a.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(be(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(be(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(be(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(be(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let i=e.composedPath();for(let s=0;s<i.length;s++){let o=i[s];if(o.classList.contains("xterm"))break;if(o.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var s,o;(!this._activeProviderReplies||!t)&&((s=this._activeProviderReplies)==null||s.forEach(a=>{a==null||a.forEach(u=>{u.link.dispose&&u.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(let[a,u]of this._linkProviderService.linkProviders.entries())t?(o=this._activeProviderReplies)!=null&&o.get(a)&&(i=this._checkLinkProviderResult(a,e,i)):u.provideLinks(e.y,h=>{var d,m;if(this._isMouseOut)return;let p=h==null?void 0:h.map(g=>({link:g}));(d=this._activeProviderReplies)==null||d.set(a,p),i=this._checkLinkProviderResult(a,e,i),((m=this._activeProviderReplies)==null?void 0:m.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let i=new Set;for(let s=0;s<t.size;s++){let o=t.get(s);if(o)for(let a=0;a<o.length;a++){let u=o[a],h=u.link.range.start.y<e?0:u.link.range.start.x,p=u.link.range.end.y>e?this._bufferService.cols:u.link.range.end.x;for(let d=h;d<=p;d++){if(i.has(d)){o.splice(a--,1);break}i.add(d)}}}}_checkLinkProviderResult(e,t,i){var a;if(!this._activeProviderReplies)return i;let s=this._activeProviderReplies.get(e),o=!1;for(let u=0;u<e;u++)(!this._activeProviderReplies.has(u)||this._activeProviderReplies.get(u))&&(o=!0);if(!o&&s){let u=s.find(h=>this._linkAtPosition(h.link,t));u&&(i=!0,this._handleNewLink(u))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let u=0;u<this._activeProviderReplies.size;u++){let h=(a=this._activeProviderReplies.get(u))==null?void 0:a.find(p=>this._linkAtPosition(p.link,t));if(h){i=!0,this._handleNewLink(h);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&qb(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Ji(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var i,s;return(s=(i=this._currentLink)==null?void 0:i.state)==null?void 0:s.decorations.pointerCursor},set:i=>{var s;(s=this._currentLink)!=null&&s.state&&this._currentLink.state.decorations.pointerCursor!==i&&(this._currentLink.state.decorations.pointerCursor=i,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",i))}},underline:{get:()=>{var i,s;return(s=(i=this._currentLink)==null?void 0:i.state)==null?void 0:s.decorations.underline},set:i=>{var s,o,a;(s=this._currentLink)!=null&&s.state&&((a=(o=this._currentLink)==null?void 0:o.state)==null?void 0:a.decorations.underline)!==i&&(this._currentLink.state.decorations.underline=i,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,i))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(i=>{if(!this._currentLink)return;let s=i.start===0?0:i.start+1+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.ydisp+1+i.end;if(this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=o&&(this._clearCurrentLink(s,o),this._lastMouseEvent)){let a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._askForLink(a,!1)}})))}_linkHover(e,t,i){var s;(s=this._currentLink)!=null&&s.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){let i=e.range,s=this._bufferService.buffer.ydisp,o=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(o)}_linkLeave(e,t,i){var s;(s=this._currentLink)!=null&&s.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){let i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,o=t.y*this._bufferService.cols+t.x;return i<=o&&o<=s}_positionFromMouseEvent(e,t,i){let s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,o){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:o}}};oh=tt([ue(1,Ch),ue(2,ri),ue(3,Ht),ue(4,og)],oh);function qb(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var Yb=class extends Fb{constructor(e={}){super(e),this._linkifier=this._register(new On),this.browser=bg,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new On),this._onCursorMove=this._register(new ne),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new ne),this.onKey=this._onKey.event,this._onRender=this._register(new ne),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new ne),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new ne),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new ne),this.onBell=this._onBell.event,this._onFocus=this._register(new ne),this._onBlur=this._register(new ne),this._onA11yCharEmitter=this._register(new ne),this._onA11yTabEmitter=this._register(new ne),this._onWillOpen=this._register(new ne),this._setup(),this._decorationService=this._instantiationService.createInstance(Ub),this._instantiationService.setService(eo,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(Ok),this._instantiationService.setService(og,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Pc)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh((t==null?void 0:t.start)??0,(t==null?void 0:t.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(Rt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Rt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Rt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Rt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(Ye(()=>{var t,i;this._customKeyEventHandler=void 0,(i=(t=this.element)==null?void 0:t.parentNode)==null||i.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let i,s="";switch(t.index){case 256:i="foreground",s="10";break;case 257:i="background",s="11";break;case 258:i="cursor",s="12";break;default:i="ansi",s="4;"+t.index}switch(t.type){case 0:let o=Ke.toColorRGB(i==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[i]);this.coreService.triggerDataEvent(`${V.ESC}]${s};${Nb(o)}${Cg.ST}`);break;case 1:if(i==="ansi")this._themeService.modifyColors(a=>a.ansi[t.index]=at.toColor(...t.color));else{let a=i;this._themeService.modifyColors(u=>u[a]=at.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Wl,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(V.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,o=t.getWidth(i),a=this._renderService.dimensions.css.cell.width*o,u=this.buffer.y*this._renderService.dimensions.css.cell.height,h=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=h+"px",this.textarea.style.top=u+"px",this.textarea.style.width=a+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(be(this.element,"copy",t=>{this.hasSelection()&&Jx(t,this._selectionService)}));let e=t=>Zx(t,this.textarea,this.coreService,this.optionsService);this._register(be(this.textarea,"paste",e)),this._register(be(this.element,"paste",e)),Eg?this._register(be(this.element,"mousedown",t=>{t.button===2&&p_(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(be(this.element,"contextmenu",t=>{p_(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Th&&this._register(be(this.element,"auxclick",t=>{t.button===1&&Qm(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(be(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(be(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(be(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(be(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(be(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(be(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(be(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var o;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((o=this.element)==null?void 0:o.ownerDocument.defaultView)&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(be(this.screenElement,"mousemove",a=>this.updateCursorStyle(a))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let i=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",kc.get()),Lg||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>i.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(Ik,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(ti,this._coreBrowserService),this._register(be(this.textarea,"focus",a=>this._handleTextAreaFocus(a))),this._register(be(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(Yc,this._document,this._helperContainer),this._instantiationService.setService(Yl,this._charSizeService),this._themeService=this._instantiationService.createInstance(Jc),this._instantiationService.setService(Hn,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Fl),this._instantiationService.setService(sg,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(Gc,this.rows,this.screenElement)),this._instantiationService.setService(ri,this._renderService),this._register(this._renderService.onRenderedViewportChange(a=>this._onRender.fire(a))),this.onResize(a=>this._renderService.resize(a.cols,a.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Vc,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(Xc),this._instantiationService.setService(Ch,this._mouseService);let s=this._linkifier.value=this._register(this._instantiationService.createInstance(oh,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Uc,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(a=>{super.scrollLines(a,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(Qc,this.element,this.screenElement,s)),this._instantiationService.setService(lC,this._selectionService),this._register(this._selectionService.onRequestScrollLines(a=>this.scrollLines(a.amount,a.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(a=>this._renderService.handleSelectionChanged(a.start,a.end,a.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(a=>{this.textarea.value=a,this.textarea.focus(),this.textarea.select()})),this._register(Rt.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{var a;this._selectionService.refresh(),(a=this._viewport)==null||a.queueSync()})),this._register(this._instantiationService.createInstance($c,this.screenElement)),this._register(be(this.element,"mousedown",a=>this._selectionService.handleMouseDown(a))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Wl,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",a=>this._handleScreenReaderModeOptionChange(a))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(zl,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",a=>{!this._overviewRulerRenderer&&a&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(zl,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(qc,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function i(a){var d,m,g,S,v;let u=e._mouseService.getMouseReportCoords(a,e.screenElement);if(!u)return!1;let h,p;switch(a.overrideType||a.type){case"mousemove":p=32,a.buttons===void 0?(h=3,a.button!==void 0&&(h=a.button<3?a.button:3)):h=a.buttons&1?0:a.buttons&4?1:a.buttons&2?2:3;break;case"mouseup":p=0,h=a.button<3?a.button:3;break;case"mousedown":p=1,h=a.button<3?a.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(a)===!1)return!1;let k=a.deltaY;if(k===0||e.coreMouseService.consumeWheelEvent(a,(S=(g=(m=(d=e._renderService)==null?void 0:d.dimensions)==null?void 0:m.device)==null?void 0:g.cell)==null?void 0:S.height,(v=e._coreBrowserService)==null?void 0:v.dpr)===0)return!1;p=k<0?0:1,h=4;break;default:return!1}return p===void 0||h===void 0||h>4?!1:e.coreMouseService.triggerMouseEvent({col:u.col,row:u.row,x:u.x,y:u.y,button:h,action:p,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}let s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o={mouseup:a=>(i(a),a.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(a)),wheel:a=>(i(a),this.cancel(a,!0)),mousedrag:a=>{a.buttons&&i(a)},mousemove:a=>{a.buttons||i(a)}};this._register(this.coreMouseService.onProtocolChange(a=>{a?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(a)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),a&8?s.mousemove||(t.addEventListener("mousemove",o.mousemove),s.mousemove=o.mousemove):(t.removeEventListener("mousemove",s.mousemove),s.mousemove=null),a&16?s.wheel||(t.addEventListener("wheel",o.wheel,{passive:!1}),s.wheel=o.wheel):(t.removeEventListener("wheel",s.wheel),s.wheel=null),a&2?s.mouseup||(s.mouseup=o.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),a&4?s.mousedrag||(s.mousedrag=o.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(be(t,"mousedown",a=>{if(a.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(a)))return i(a),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(a)})),this._register(be(t,"wheel",a=>{var u,h,p,d,m;if(!s.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(a)===!1)return!1;if(!this.buffer.hasScrollback){if(a.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(a,(d=(p=(h=(u=e._renderService)==null?void 0:u.dimensions)==null?void 0:h.device)==null?void 0:p.cell)==null?void 0:d.height,(m=e._coreBrowserService)==null?void 0:m.dpr)===0)return this.cancel(a,!0);let g=V.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(a.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(g,!0),this.cancel(a,!0)}}},{passive:!1}))}refresh(e,t){var i;(i=this._renderService)==null||i.refreshRows(e,t)}updateCursorStyle(e){var t;(t=this._selectionService)!=null&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){Gm(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,t){var i;(i=this._selectionService)==null||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let i=jb(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),i.type===3||i.type===2){let s=this.rows-1;return this.scrollLines(i.type===2?-s:s),this.cancel(e,!0)}if(i.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((i.key===V.ETX||i.key===V.CR)&&(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(Xb(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){var i;(i=this._charSizeService)==null||i.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(lt));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var t;this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),(t=this._selectionService)==null||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(V.ESC+"[I"):this.coreService.triggerDataEvent(V.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),i=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${V.ESC}[4;${i};${t}t`);break;case 1:let s=this._renderService.dimensions.css.cell.width.toFixed(0),o=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${V.ESC}[6;${o};${s}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function Xb(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var Gb=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},Qb=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new yr)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}},sm=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new Qb(t)}getNullCell(){return new yr}},Jb=class extends De{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new ne),this.onBufferChange=this._onBufferChange.event,this._normal=new sm(this._core.buffers.normal,"normal"),this._alternate=new sm(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},Zb=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,i=>t(i.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(i,s)=>t(i,s.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},e2=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},t2=["cols","rows"],Ir=0,r2=class extends De{constructor(e){super(),this._core=this._register(new Yb(e)),this._addonManager=this._register(new Gb),this._publicOptions={...this._core.options};let t=s=>this._core.options[s],i=(s,o)=>{this._checkReadonlyOptions(s),this._core.options[s]=o};for(let s in this._core.options){let o={get:t.bind(this,s),set:i.bind(this,s)};Object.defineProperty(this._publicOptions,s,o)}}_checkReadonlyOptions(e){if(t2.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new Zb(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new e2(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new Jb(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return kc.get()},set promptLabel(e){kc.set(e)},get tooMuchOutput(){return bc.get()},set tooMuchOutput(e){bc.set(e)}}}_verifyIntegers(...e){for(Ir of e)if(Ir===1/0||isNaN(Ir)||Ir%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Ir of e)if(Ir&&(Ir===1/0||isNaN(Ir)||Ir%1!==0||Ir<0))throw new Error("This API only accepts positive integers")}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var i2=2,n2=1,s2=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){var g;if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:((g=this._terminal.options.overviewRuler)==null?void 0:g.width)||14,i=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(i.getPropertyValue("height")),o=Math.max(0,parseInt(i.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),u={top:parseInt(a.getPropertyValue("padding-top")),bottom:parseInt(a.getPropertyValue("padding-bottom")),right:parseInt(a.getPropertyValue("padding-right")),left:parseInt(a.getPropertyValue("padding-left"))},h=u.top+u.bottom,p=u.right+u.left,d=s-h,m=o-p-t;return{cols:Math.max(i2,Math.floor(m/e.css.cell.width)),rows:Math.max(n2,Math.floor(d/e.css.cell.height))}}};function o2({thoughts:e=[]}){var L;const[t,i]=pe.useState("codex"),[s,o]=pe.useState(""),[a,u]=pe.useState(!0),[h,p]=pe.useState(6e5),[d,m]=pe.useState([]),[g,S]=pe.useState(""),[v,k]=pe.useState(`y
`),[E,T]=pe.useState(!1),[M,J]=pe.useState(""),[I,U]=pe.useState(!1),[X,R]=pe.useState(null),[se,ie]=pe.useState({}),le=Nn.useRef(null),me=Nn.useRef(null),Q=Nn.useRef(null),W=Nn.useRef(null),j=Nn.useRef(g);j.current=g;const B=pe.useMemo(()=>d.find(A=>A.id===g)||d[0]||null,[d,g]);async function O(){const x=(await yx()).tasks??[];m(x),!g&&x.length>0&&S(x[0].id)}pe.useEffect(()=>{O().catch(()=>{});const A=setInterval(()=>O().catch(()=>{}),3e3);return()=>clearInterval(A)},[]),pe.useEffect(()=>{const A=e[e.length-1];A&&String(A.type||"").startsWith("terminal.")&&O().catch(()=>{})},[e]),pe.useEffect(()=>{if(!me.current||le.current)return;const A=new r2({fontFamily:"Consolas, 'Courier New', monospace",fontSize:12,cursorBlink:!0,convertEol:!0,theme:{background:"#000000",foreground:"#7CFC8A"}}),x=new s2;A.loadAddon(x),A.open(me.current),x.fit(),le.current=A,Q.current=x;const ae=()=>x.fit();return window.addEventListener("resize",ae),()=>{window.removeEventListener("resize",ae),A.dispose(),le.current=null,Q.current=null}},[]),pe.useEffect(()=>{const A=window.location.protocol==="https:"?"wss":"ws",x=new WebSocket(`${A}://${window.location.host}/ws`);return W.current=x,x.onopen=()=>U(!0),x.onclose=()=>U(!1),x.onerror=()=>U(!1),x.onmessage=ae=>{var ve,he;try{const we=JSON.parse(ae.data),Ce=(ve=we==null?void 0:we.data)==null?void 0:ve.taskId;if(!Ce)return;if(we.type==="terminal.stream"){const Pe=((he=we==null?void 0:we.data)==null?void 0:he.chunk)??"";ie(Fe=>({...Fe,[Ce]:(Fe[Ce]||"")+Pe})),j.current===Ce&&le.current&&le.current.write(Pe)}we.type==="terminal.prompt"&&R(we)}catch{}},()=>x.close()},[]),pe.useEffect(()=>{if(!le.current)return;le.current.clear();const A=se[g]||"";if(A){le.current.write(A);return}const x=((B==null?void 0:B.logsTail)??[]).join("");x&&le.current.write(x)},[g,B==null?void 0:B.id]);async function K(){var A;T(!0),J("");try{const x=await $m({agentName:t,taskPrompt:s,autoApprove:a,timeoutMs:Number(h)||6e5});if(x.error)throw new Error(x.error);const ae=(A=x.task)==null?void 0:A.id;await O(),ae&&S(ae),o("")}catch(x){J(x.message)}finally{T(!1)}}async function ee(){B!=null&&B.id&&(await Rl(B.id,v),k(`y
`))}async function z(){B!=null&&B.id&&(await Rl(B.id,`y
`),R(null))}async function re(){B!=null&&B.id&&(await Rl(B.id,`n
`),R(null))}async function w(){B!=null&&B.id&&(await Vm(B.id),await O())}return b.jsxs("div",{className:"flex flex-col h-full text-xs",children:[b.jsxs("div",{className:"shrink-0 p-3 border-b border-gray-800 space-y-2",children:[b.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500",children:[b.jsx("span",{className:`w-2 h-2 rounded-full ${I?"bg-green-500":"bg-red-500"}`}),b.jsxs("span",{children:["WS ",I?"":""]})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[b.jsx("input",{value:t,onChange:A=>i(A.target.value),placeholder:": codex",className:"px-2 py-1.5 rounded bg-gray-900 border border-gray-800 text-gray-200 outline-none"}),b.jsx("input",{type:"number",value:h,onChange:A=>p(A.target.value),placeholder:"timeoutMs",className:"px-2 py-1.5 rounded bg-gray-900 border border-gray-800 text-gray-200 outline-none"})]}),b.jsx("textarea",{value:s,onChange:A=>o(A.target.value),rows:3,placeholder:"...",className:"w-full px-2 py-1.5 rounded bg-gray-900 border border-gray-800 text-gray-200 outline-none resize-y"}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("label",{className:"flex items-center gap-1 text-gray-400",children:[b.jsx("input",{type:"checkbox",checked:a,onChange:A=>u(A.target.checked)}),"Auto-Approve"]}),b.jsx("button",{disabled:E||!s.trim(),onClick:K,className:"ml-auto px-3 py-1.5 rounded bg-indigo-700 hover:bg-indigo-600 text-white disabled:opacity-50",children:""})]}),M&&b.jsx("p",{className:"text-red-400",children:M})]}),b.jsxs("div",{className:"flex-1 min-h-0 grid grid-cols-3",children:[b.jsxs("div",{className:"border-r border-gray-800 overflow-y-auto",children:[d.length===0&&b.jsx("p",{className:"p-3 text-gray-500",children:""}),d.map(A=>b.jsxs("button",{onClick:()=>S(A.id),className:`w-full text-left p-2 border-b border-gray-900 ${(B==null?void 0:B.id)===A.id?"bg-gray-900":"hover:bg-gray-900/60"}`,children:[b.jsx("p",{className:"text-gray-200 truncate",children:A.agentName}),b.jsxs("p",{className:"text-gray-500 truncate",children:[A.status,"  ",A.progress??0,"%"]})]},A.id))]}),b.jsxs("div",{className:"col-span-2 flex flex-col min-h-0",children:[b.jsxs("div",{className:"shrink-0 p-2 border-b border-gray-800 flex items-center gap-2",children:[b.jsx("div",{className:"flex-1 h-1.5 rounded bg-gray-800 overflow-hidden",children:b.jsx("div",{className:"h-full bg-green-500 transition-all",style:{width:`${Math.max(0,Math.min(100,(B==null?void 0:B.progress)||0))}%`}})}),b.jsxs("span",{className:"text-gray-400",children:[(B==null?void 0:B.progress)??0,"%"]}),b.jsx("button",{onClick:w,className:"px-2 py-1 rounded bg-red-900/40 hover:bg-red-800/40 text-red-300",children:""})]}),((L=X==null?void 0:X.data)==null?void 0:L.taskId)===(B==null?void 0:B.id)&&b.jsxs("div",{className:"shrink-0 p-2 border-b border-yellow-900/50 bg-yellow-900/20 text-yellow-300 flex items-center gap-2",children:[b.jsx("span",{className:"text-[10px]",children:""}),b.jsx("button",{onClick:z,className:"px-2 py-1 rounded bg-green-900/40 hover:bg-green-800/40 text-green-300",children:" Y"}),b.jsx("button",{onClick:re,className:"px-2 py-1 rounded bg-red-900/40 hover:bg-red-800/40 text-red-300",children:" N"})]}),b.jsx("div",{className:"flex-1 min-h-0 bg-black p-1 overflow-hidden",children:b.jsx("div",{ref:me,className:"w-full h-full"})}),b.jsxs("div",{className:"shrink-0 p-2 border-t border-gray-800 flex gap-2",children:[b.jsx("input",{value:v,onChange:A=>k(A.target.value),className:"flex-1 px-2 py-1 rounded bg-gray-900 border border-gray-800 text-gray-200 outline-none",placeholder:" y\\\\n"}),b.jsx("button",{onClick:ee,className:"px-3 py-1 rounded bg-gray-800 hover:bg-gray-700 text-gray-200",children:""})]})]})]})]})}function l2(e=60){const[t,i]=pe.useState([]),[s,o]=pe.useState(!1),a=pe.useRef(null);return pe.useEffect(()=>{let h=!0,p=null;function d(){const m=Sx(g=>{h&&(o(!0),i(S=>{const v=[...S,{...g,id:Date.now()+Math.random()}];return v.length>e?v.slice(-e):v}))});a.current=m}return d(),()=>{var m;h=!1,(m=a.current)==null||m.call(a),clearTimeout(p)}},[e]),{thoughts:t,connected:s,clear:()=>i([])}}const a2=[{id:"thought",label:"",icon:kx},{id:"status",label:"",icon:Dx},{id:"workspace",label:"",icon:Lx},{id:"terminal",label:"",icon:Nx}];function u2(){const{thoughts:e,connected:t,clear:i}=l2(80),[s,o]=pe.useState("thought"),[a,u]=pe.useState(!0);return b.jsxs("div",{className:"flex flex-col h-screen bg-gray-950 text-gray-100 overflow-hidden",children:[b.jsx(qx,{thoughts:e}),b.jsxs("header",{className:"shrink-0 flex items-center gap-3 px-4 py-2.5 border-b border-gray-800 bg-gray-950 z-10",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"text-xl",children:""}),b.jsxs("div",{children:[b.jsx("h1",{className:"text-sm font-bold text-white leading-none",children:"WuXing-Agent"}),b.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:""})]})]}),b.jsx("div",{className:"flex-1 flex items-center gap-1",children:[{key:"water",label:"",color:"#38bdf8"},{key:"fire",label:"",color:"#f97316"},{key:"earth",label:"",color:"#eab308"},{key:"metal",label:"",color:"#a8a29e"},{key:"wood",label:"",color:"#4ade80"}].map(h=>{const p=e.slice(-20).filter(m=>m.element===h.key).length,d=Math.min(p*12,100);return b.jsxs("div",{className:"flex items-center gap-1",title:`${h.label}`,children:[b.jsx("span",{className:"text-[10px] hidden sm:inline",style:{color:h.color},children:h.label}),b.jsx("div",{className:"w-12 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${d}%`,background:h.color}})})]},h.key)})}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("div",{className:`w-1.5 h-1.5 rounded-full pulse-dot ${t?"bg-green-400":"bg-red-500"}`}),b.jsx("span",{className:"text-[10px] text-gray-500",children:t?"":""})]})]}),b.jsxs("div",{className:"flex flex-1 min-h-0",children:[b.jsx("div",{className:"flex-1 min-w-0",children:b.jsx(Fx,{thoughts:e})}),b.jsxs("div",{className:"relative flex items-center",children:[b.jsx("div",{className:"w-px h-full bg-gray-800"}),b.jsx("button",{onClick:()=>u(!a),className:`absolute left-1/2 -translate-x-1/2 z-10
              w-4 h-10 bg-gray-800 hover:bg-gray-700 border border-gray-700
              rounded-full flex items-center justify-center transition-colors`,children:a?b.jsx(Px,{size:10,className:"text-gray-400"}):b.jsx(Ex,{size:10,className:"text-gray-400"})})]}),a&&b.jsxs("div",{className:"w-80 shrink-0 flex flex-col border-l border-gray-800 bg-gray-950",children:[b.jsx("div",{className:"flex shrink-0 border-b border-gray-800",children:a2.map(h=>{const p=h.icon;return b.jsxs("button",{onClick:()=>o(h.id),className:`flex-1 flex items-center justify-center gap-1 py-2 text-[11px] font-medium transition-colors
                      ${s===h.id?"text-indigo-400 border-b-2 border-indigo-500 bg-indigo-950/30":"text-gray-500 hover:text-gray-300"}`,children:[b.jsx(p,{size:12}),h.label]},h.id)})}),b.jsxs("div",{className:"flex-1 min-h-0",children:[s==="thought"&&b.jsx(Wx,{thoughts:e,connected:t,onClear:i}),s==="status"&&b.jsx(Ux,{}),s==="workspace"&&b.jsx(Kx,{}),s==="terminal"&&b.jsx(o2,{thoughts:e})]})]})]})]})}Wy.createRoot(document.getElementById("root")).render(b.jsx(Nn.StrictMode,{children:b.jsx(u2,{})}));
